# 报告唯一命名 (Report Unique Naming)

## 1. 目的 (Purpose)

- **功能目标**: 为每次测试运行生成唯一的报告名称，确保不覆盖已有报告
- **业务价值**: 保证测试历史记录完整性，支持追溯和对比分析
- **TBD**: 具体的命名规范细节可能需要根据实际使用场景调整

## 2. 需求 (Requirements)

### Requirement: 报告唯一命名生成
系统应为每次运行生成唯一的报告名称，确保不覆盖已有报告。

#### Scenario: 运行案例生成新报告
- **WHEN** 用户运行测试案例
- **THEN** 系统生成包含时间戳和随机数的唯一报告名称

#### Scenario: 运行计划生成新报告
- **WHEN** 用户运行测试计划
- **THEN** 系统为该计划下的每个案例生成唯一报告名称

#### Scenario: 同一案例多次运行
- **WHEN** 同一案例在短时间内被多次运行
- **THEN** 每次运行都生成独立的报告记录，互不覆盖

### Requirement: 报告名称格式
报告名称应包含案例/计划标识、时间戳和随机数，便于识别和追溯。

#### Scenario: 案例报告命名
- **WHEN** 为案例生成报告
- **THEN** 报告名称格式为 `report_{case_id}_{timestamp}_{random}`

#### Scenario: 计划报告命名
- **WHEN** 为计划生成报告
- **THEN** 报告名称格式为 `report_{plan_id}_{timestamp}_{random}`

#### Scenario: 时间戳精度
- **WHEN** 生成时间戳
- **THEN** 使用 ISO 8601 格式，精确到秒

#### Scenario: 随机数长度
- **WHEN** 生成随机数
- **THEN** 使用 6 位十六进制数，确保同一秒内的唯一性

### Requirement: 报告名称唯一性验证
系统应验证生成的报告名称在数据库中不存在，防止冲突。

#### Scenario: 名称冲突检测
- **WHEN** 生成的报告名称已存在
- **THEN** 系统重新生成随机数部分，直到名称唯一

#### Scenario: 最大重试次数
- **WHEN** 连续 10 次生成冲突名称
- **THEN** 系统抛出错误并记录日志

## 3. 待确认项 (TBD)

1. **随机数生成算法**: 使用何种随机数生成器？
2. **时间戳时区**: 使用 UTC 还是本地时间？
3. **错误处理**: 达到最大重试次数后的具体错误处理流程？
4. **性能优化**: 是否需要缓存已生成的名称以加速冲突检测？
