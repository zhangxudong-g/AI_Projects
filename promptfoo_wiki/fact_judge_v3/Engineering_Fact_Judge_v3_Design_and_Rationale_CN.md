# Engineering Fact Judge v3 – 设计与原理

## 系统概述

Engineering Fact Judge v3 是一个专门设计的评估系统，旨在严格定义和执行由大型语言模型（LLM）生成的工程解释的事实边界。它在评估流水线中充当关键的守门人，确保生成的文档基于实际源代码，而不是听起来合理但缺乏支持的声明。

### 在完整评估流程中的作用

在更广泛的评估流水线中，Fact Judge v3 充当以下组件之间的验证层：
- **源代码**：事实依据参考
- **生成的Wiki/文档**：LLM生成的解释
- **下游评分阶段**：对实用性和工程价值的高级评估

Fact Judge v3 评估生成的解释是否准确反映了源代码，而不引入虚构元素、夸大的职责或语义过度延伸。

### 与其他组件的关系

与专注于完整性的覆盖率检查系统或评估可读性的风格评估器不同，Fact Judge v3 专门针对事实准确性。它的运作原则是，无论解释听起来多么合理或有用，工程文档都必须基于代码现实。

### 为什么 Fact Judge v3 单独存在

Fact Judge v3 作为一个独立概念存在，因为事实准确性与其他评估维度正交。一份文档可以很全面且写得很好，但仍包含可能误导工程师的虚构元素。相反，一份简洁但准确的文档为工程决策提供了坚实的基础。

## 核心评估原则

### 源代码至上

源代码是验证工程解释的唯一可接受的事实依据。行业惯例、常见架构模式或代码中未明确支持的术语不能作为文档中声明的证据。

这一原则确保评估系统不会奖励听起来合理但缺乏代码支持的解释，防止传播与实际实现不符的架构假设。

### 解释 ≠ 猜测

即使是合理的假设也必须得到源代码的明确支持。常见的架构模式、标准框架或行业最佳实践不足以作为文档中声明的充分证据。该系统区分"代码实际做什么"与"类似系统通常做什么"。

这可以防止引入听起来合理但缺乏支持的解释，这些解释可能会误导工程师对实际系统行为的理解。

### 伪造是主要风险

发明的层级、职责、行为或架构元素被视为高风险故障。系统优先识别和拒绝虚构内容，而不是奖励包含不准确性的全面或结构良好的解释。

这种方法反映了工程现实，即错误信息通常比不完整信息更有害，特别是在做关于系统修改或集成的决策时。

### 工程实用性次于真实性

虽然有帮助的解释很有价值，但正确性优先于实用性。一个有帮助但不正确的解释被认为比不完整但准确的解释更糟糕。这种权衡确保工程师可以信任文档作为理解系统行为的可靠参考。

## 事实违规类别

### 架构伪造

**定义**：引入源代码中不存在的架构元素，如发明的服务、控制器、框架或事务管理系统。

**触发声明**：关于代码中不存在的架构组件、层级或基础设施的声明。例如，描述一个不存在的缓存层，或声称存在微服务架构而代码是单体的。

**对工程工作的危险**：架构伪造可能导致工程师对系统依赖、可扩展性特征或集成点做出错误假设，可能导致重大返工或系统故障。

### 责任膨胀

**定义**：向代码元素分配实际实现不支持的责任、义务或能力。

**触发声明**：描述函数、类或模块执行它们实际上不执行的任务，或声称比代码实现更广泛的能力。例如，声称一个简单的数据访问函数处理复杂的业务逻辑。

**对工程工作的危险**：责任膨胀可能导致对系统行为的错误假设，导致工程师依赖不存在的功能或忽略实际的实现细节。

### 机制不匹配

**定义**：描述与代码实际实现不同的系统行为，即使所描述的行为看起来合理。

**触发声明**：以与实际代码实现相矛盾的方式解释系统工作原理。例如，描述同步处理而代码实现异步行为。

**对工程工作的危险**：机制不匹配可能导致对系统性能、错误处理或定时的错误期望，可能导致集成问题或调试困难。

### 术语幻觉

**定义**：在代码中没有明确证据的情况下，将设计模式、架构概念或行业术语视为事实。

**触发声明**：声称使用特定设计模式、架构风格或行业标准而没有代码支持。例如，描述系统使用"观察者模式"而代码没有实现该模式。

**对工程工作的危险**：术语幻觉可能误导工程师对系统实际架构和设计决策的理解，影响他们如何扩展或修改系统的理解。

### 语义过度延伸（尤其针对SQL）

**定义**：推断代码中未明确显示的并发性、隔离性、业务语义或其他高级行为。

**触发声明**：假设事务行为、隔离级别或业务逻辑含义，这些在SQL代码中并不明显。例如，声称查询是线程安全的而代码没有实现同步。

**对工程工作的危险**：语义过度延伸可能导致对数据完整性、并发处理或业务规则执行的错误假设，可能导致数据损坏或逻辑错误。

## 回归驱动设计

Engineering Fact Judge v3 受到一套全面的回归案例保护，这些案例定义了可接受行为的不可协商边界。这些回归案例作为系统预期行为的权威规范。

### 回归案例的权威性

回归案例代表可接受和不可接受解释模式的具体示例。它们提供客观标准，优先于主观模型判断或人类偏好。评估系统的任何未来更改都必须保留这些回归案例的结果。

### 通过回归的重要性

通过回归测试比在主观质量措施上获得高分更重要。回归案例代表系统的最小可行行为，确保关键故障模式仍被检测和预防。

### 不可协商的边界

回归案例建立了"不可协商的边界"，定义了什么是可接受的工程文档。这些边界防止评估标准的逐渐退化，这种退化可能允许虚构内容溜进来。

## Fact Judge v3 不做的事情

### 评判写作风格或流畅度

该系统不评估散文质量、可读性或沟通效果。这些方面由其他评估阶段处理，这些阶段可以在事实准确内容的基础上运行。

### 奖励冗长

较长的解释并不天生比简短的好。系统专注于事实准确性而不是完整性，允许下游系统单独评估完整性。

### 推断超出代码的意图

该系统不尝试理解代码中未明确反映的开发人员意图、业务需求或设计目标。它只评估代码实际实现的内容，而不是它可能打算实现的内容。

### 除非显示否则假设标准框架

该系统不假设有标准框架、库或架构模式的存在，除非它们在代码中明确明显。这防止将框架特定行为归因于自定义实现。

## 设计后果

### 许多LLM生成文档的低分

许多LLM生成的文档得分很低，因为它们自然倾向于听起来合理但缺乏支持的解释。这是优先考虑事实准确性而非似然性的有意后果。

### 偏好保守解释

该系统奖励紧密贴合代码的保守解释，即使它们看起来不完整。这创造了支持可靠工程决策的准确性偏向。

### 与人工审稿人相比感觉严格

该系统可能比可能接受合理解释的人工审稿人感觉更严格。这种严格性是有意的工程权衡，优先考虑可靠性而非宽容。

### 有意的工程权衡

该设计代表了优先考虑事实准确性而非其他理想品质（如帮助性或完整性）的有意识决定。这种权衡反映了工程原则，即在技术环境中，错误信息比不完整信息更有害。

## 结论

Engineering Fact Judge v3 在评估流水线中充当关键质量门，确保生成的工程文档基于源代码现实。通过其对事实准确性的关注、全面的违规类别和回归驱动设计，它为下游评估阶段提供了可靠基础，同时防止传播可能误导工程师的虚构或不正确信息。