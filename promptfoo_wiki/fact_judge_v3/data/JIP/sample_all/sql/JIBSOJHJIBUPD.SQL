CREATE OR REPLACE PROCEDURE JIBSOJHJIBUPD ( i_TEST_FLG IN NUMBER,
--1.0.000.000-05.00-03.00
                                                           i_NIDOBI          IN NUMBER,
                                                           i_NTODOKE_BI      IN NUMBER,
                                                           i_NIDO_TODOKE_KBN IN NUMBER,
                                                           i_VGEN_BIKO       IN NVARCHAR2,
                                                           i_VHON_BIKO       IN NVARCHAR2,
                                                           i_NSHOKUIN_NO     IN NVARCHAR2,
                                                           i_VTANMATSU_NO    IN NVARCHAR2,
                                                           o_NSQL_CODE       OUT NUMBER,
                                                           o_VSQL_MSG        OUT NVARCHAR2)

IS
--------------------------------------------------------
--  業務名        JIB(住民記録)
--  PG 名         JIBSOJHJIBUPD
--  名称          住居表示変更住基更新
--  処理概要      住居表示変更対象者の現住所と本籍住所の変更に伴いマスター更新を行う
--  作成者        ZCZL.DUANDONGLIN
--  作成日        2022/07/28
--  Version       0.2.000.000
--------------------------------------------------------
--  修正概要      戸籍連携はマイグレ対象外なのでコメントアウトする
--  作成者        H.Furui
--  作成日        2022/08/02
--  Version       0.2.000.000
--------------------------------------------------------
--  修正概要      : NKBSOJIDOHの呼び出しをコメントアウトする。
--  バージョン    : 0.0.000.000
--  修正者／修正日: JIP H.Furui   2022/08/15
--------------------------------------------------------
--  修正概要      : 廃棄テーブルの対応
--  バージョン    : 0.2.000.001
--  修正者／修正日: ZCZL.GUORUIHUA   2023/04/06
--------------------------------------------------------
--  修正概要      : 住記系追加作業
--  バージョン    : 0.2.000.002
--  修正者／修正日: ZCZL.WANGM   2023/06/28
--------------------------------------------------------
--  修正概要      : 新WizLIFE２次開発
--  バージョン    : 0.3.000.000
--  修正者／修正日: DIS.Liuyaxin 2024/02/05
--------------------------------------------------------
--  修正概要      : 新WizLIFE２次開発（最新フラグ＝１追加確認）
--  バージョン    : 0.3.000.000
--  修正者／修正日: DIS.Qianyinhua   2024/02/22
--------------------------------------------------------
--  修正概要      : 新WizLIFE2次開発 IT_JIB_00622対応
--  バージョン    : 0.3.000.000
--  修正者／修正日: DIS.WangDeli 2024/11/09
--------------------------------------------------------
  --住居表示変更対象者取得カーソル定義
  CURSOR CJUSHOHENKOTAISHO
  IS
    SELECT *
      FROM JIBTJUSHOHENKO_TAISHO
      WHERE
            GEN_TAISHO_FLG = 1 OR
            HON_TAISHO_FLG = 1
      ORDER BY
            SETAI_NO,
      BF_GEN_CITY_CD,
      BF_GEN_OAZA_CD,
      BF_GEN_HONBAN,
      BF_GEN_EDABAN1,
      BF_GEN_EDABAN2,
      BF_GEN_EDABAN3,
      BF_GEN_GAIKU,
      BF_GEN_TOU,
      BF_GEN_GOU,
      KISAI_JUNI,
      KOJIN_NO;
  --ローカル変数
  o_EBT_IES_ATENAKIHON  JIBWIES_JUKIKIHON%ROWTYPE;   --宛名基本中間（IES用）
  o_EBT_IES_JUKIIDO     JIBWIES_JUKIIDO%ROWTYPE;      --住基異動中間（IES用）
  o_EBT_IES_JUKIJUSHO   JIBWIES_JUKIJUSHO%ROWTYPE;    --住基住所中間（IES用）
--旧氏記載対応_宛名基本より宛名基本中間（IES用）を作成するタイミングで、住基情報より住基情報(IES用)を作成する。
  o_EBT_IES_JUKIJOHO    JIBWIES_JUKIJOHO%ROWTYPE;     --住基情報中間 (IES用)
  o_EBT_JUSHOHENKO      JIBTJUSHOHENKO%ROWTYPE;       --住所変更証明書管理
  o_GABTATENAKIHON      JIBTJUKIKIHON%ROWTYPE;       --宛名基本
  o_GABTJUKIIDO         JIBTJUKIIDO%ROWTYPE;          --住基異動
  o_GEN_GABTJUKIJUSHO   JIBTJUKIJUSHO%ROWTYPE;        --住基住所(現住所)
  o_HON_GABTJUKIJUSHO   JIBTJUKIJUSHO%ROWTYPE;        --住基住所(本籍)
  --CALL JIBSOIEUPD ための変数
  o_VKOJIN_NO VARCHAR2(1000);
  o_RIREKI_RENBAN VARCHAR2(1000);
  o_IDO_JIYU VARCHAR2(1000); -- 2008/09/19  ADD by H.Fujimoto
  o_VSEATI_NO VARCHAR2(1000);
  o_ISHORIBI_KEY PLS_INTEGER;
  o_ISHORI_JIKAN_KEY PLS_INTEGER;
  o_N_SQL_CODE NUMBER;
  o_V_SQL_MSG VARCHAR2(500);
  w_V_SETAINO         NUMBER;          
  w_V_GEN_KOJIN_NO    VARCHAR2(1000); 
  w_V_HON_KOJIN_NO    VARCHAR2(1000); 
  W_TAISHO_NUM        NUMBER;          
  VSQL                VARCHAR2(4000);  
  --復帰コード
  I_RTN               PLS_INTEGER;
  RTN_CD              PLS_INTEGER;
  FLAG                BOOLEAN;
  W_SYSDATE           NVARCHAR2(8); --処理日
  W_SYSTIME           NVARCHAR2(6); --処理時間
  W_NIDOBI            NUMBER(8);    --異動日（西暦）
  W_NTODOKE_BI        NUMBER(8);    --届出日（西暦）
  W_ENTORYID          NUMBER(9);    --エントリーID
  W_JIYU              PLS_INTEGER;  --事由区分
  W_UPDKUBUN          PLS_INTEGER;  --更新区分 --2013/08/08 T.ABE ADD
  --日付編集
  wio_WYMD            PLS_INTEGER;
  wio_SYMD            PLS_INTEGER;
  wo_ED_GYYMMDD1      NVARCHAR2(9);
  wo_ED_GYYMMDD2      NVARCHAR2(9);
  wo_ED_GYYMMDD3      NVARCHAR2(11);
  wo_KJ_GENGO         NVARCHAR2(2);
  wo_KG_GENGO         NVARCHAR2(1);
  wo_WYY              PLS_INTEGER;
  wo_SYYYY            PLS_INTEGER;
  wo_WGYYMM           PLS_INTEGER;
  wo_MM               PLS_INTEGER;
  wo_DD               PLS_INTEGER;
  wo_WYMD             PLS_INTEGER;
  wo_SYMD             PLS_INTEGER;
  --制御コンスタント
  CTLPRM1             NUMBER(1);
  CTLPRM2             NUMBER(1);
  CTLPRM3             NUMBER(1);
  CTLPRM4             NUMBER(1);
  CTLPRM5             NUMBER(1);
  CTLPRM6             NUMBER(1);
  CTLPRM7             NUMBER(1);
  CTLPRM8             NUMBER(1);
  CTLPRM9             NUMBER(1);
--  定数宣言
------------------------------------------------------------------------------
  C_ISUCCESS          CONSTANT  PLS_INTEGER := 0;        -- 正常
  C_ISUCCESS_EXEC     CONSTANT  PLS_INTEGER := 1;        -- 正常＆更新実行
  C_INOT_SUCCESS      CONSTANT  PLS_INTEGER := -1;       -- 異常
  C_TEST              CONSTANT  PLS_INTEGER := 1;        --テストフラグ(テスト)
--2024/02/05 DIS.Liuyaxin Update start 0.3.000.000:新WizLIFE２次開発
--  C_GENJUSHO          CONSTANT  PLS_INTEGER := 42;        --事由区分(現住所変更)
--  C_HONJUSHO          CONSTANT  PLS_INTEGER := 41;        --事由区分(本籍変更)
  C_GENJUSHO          CONSTANT  PLS_INTEGER := 420;        --事由区分(現住所変更)
  C_HONJUSHO          CONSTANT  PLS_INTEGER := 410;        --事由区分(本籍変更)
--2024/02/05 DIS.Liuyaxin Update end
  C_HIGENZON          CONSTANT  PLS_INTEGER := 11;        --住基未更新(非現存)
  C_HUYIKI            CONSTANT  PLS_INTEGER := 12;        --住基未更新(不一致)
  C_SONOTA            CONSTANT  PLS_INTEGER := 13;        --住基未更新(その他）
  C_KOSINZUMI         CONSTANT  PLS_INTEGER := 10;        --住基更新済
  C_GENJUSHORENBAN    CONSTANT  PLS_INTEGER := 901;       --現住所連番
  C_HONJUSHORENBAN    CONSTANT  PLS_INTEGER := 905;       --本籍地連番
  C_YITIBU            CONSTANT  PLS_INTEGER := 1;         --一部
  C_ZENBU             CONSTANT  PLS_INTEGER := 2;         --全部
  W_GHKBN             NVARCHAR2(3);                                    -- 現住所／本籍区分
  I_CNT               PLS_INTEGER;                                     -- 世帯内カウント
  C_GEN               CONSTANT  NVARCHAR2(3) := 'GEN';    --現住所
  C_HON               CONSTANT  NVARCHAR2(3) := 'HON';    --本籍
--2023/06/28 ZCZL.WANGM ADD Start 0.2.000.002:住記系追加作業
  NKOSEKIJKN          NUMBER;
  o_tITEM             A_CONS_PRM;
--2023/06/28 ZCZL.WANGM ADD End

  TYPE MT_TAISHO      IS TABLE OF JIBTJUSHOHENKO_TAISHO%ROWTYPE  INDEX BY BINARY_INTEGER;
  M_TAISHO            MT_TAISHO;                                       -- 世帯内退避レコードテーブル

  TYPE MRRENKEIDATA   IS RECORD                                        -- 世帯内連携データ退避レコード
  (
    NRIREKI_RENBAN    JIBWIES_JUKIKIHON.RIREKI_RENBAN%TYPE,           -- 世帯内連携データ退避レコード.履歴連番
    NSETAI_NO         JIBWIES_JUKIKIHON.SETAI_NO%TYPE,                -- 世帯内連携データ退避レコード.世帯番号
    IIDO_JIYU         PLS_INTEGER                                      -- 世帯内連携データ退避レコード.異動事由
  );

  TYPE MTRENKEIDATA   IS TABLE OF MRRENKEIDATA  INDEX BY BINARY_INTEGER;
  MRENKEIDATA         MTRENKEIDATA;                                    -- 世帯内連携データ退避レコードテーブル
------------------------------------------------------------------------------
--  制御コンスタントの入力
------------------------------------------------------------------------------
FUNCTION FUNC_INPUT_CTL_CONSTANT RETURN PLS_INTEGER IS
  TACONSPRM                 A_CONS_PRM;   --配列
  NPRM_LENGTH               NUMBER;       --配列の長
BEGIN
  --行政情報設定用の制御パラメータを取得する。
  RTN_CD := KKAPK0030.FPRMSHUTOKU('JIB','00JHGYOSEIJOHO','0',TACONSPRM,NPRM_LENGTH);
  --パラメータを取得できない場合、ディフォト値ゼロを設定する。
  CTLPRM1 := 0;
  CTLPRM2 := 0;
  CTLPRM3 := 0;
  CTLPRM4 := 0;
  CTLPRM5 := 0;
  CTLPRM6 := 0;
  CTLPRM7 := 0;
  CTLPRM8 := 0;
  CTLPRM9 := 0;
  IF (RTN_CD = C_ISUCCESS) AND (TACONSPRM.LAST > 0) THEN
    FOR ICNT IN TACONSPRM.FIRST..TACONSPRM.LAST LOOP
      CASE ICNT
        WHEN 1 THEN
          CTLPRM1 := NVL(TACONSPRM(1),0);
        WHEN 2 THEN
          CTLPRM2 := NVL(TACONSPRM(2),0);
        WHEN 3 THEN
          CTLPRM3 := NVL(TACONSPRM(3),0);
        WHEN 4 THEN
          CTLPRM4 := NVL(TACONSPRM(4),0);
        WHEN 5 THEN
          CTLPRM5 := NVL(TACONSPRM(5),0);
        WHEN 6 THEN
          CTLPRM6 := NVL(TACONSPRM(6),0);
        WHEN 7 THEN
          CTLPRM7 := NVL(TACONSPRM(7),0);
        WHEN 8 THEN
          CTLPRM8 := NVL(TACONSPRM(8),0);
        WHEN 9 THEN
          CTLPRM9 := NVL(TACONSPRM(9),0);
        ELSE
          NULL;
      END CASE;
    END LOOP;
  END IF;
  RETURN RTN_CD;
END FUNC_INPUT_CTL_CONSTANT;
------------------------------------------------------------------------------
--  前回テスト情報のクリア
------------------------------------------------------------------------------
FUNCTION FUNC_CLEAR_TAISHO_TEST RETURN PLS_INTEGER IS
BEGIN
    RTN_CD := C_ISUCCESS;
    BEGIN
        --引数.テストフラグ＝1の場合
        IF i_TEST_FLG = C_TEST THEN
            --住居表示変更対象者TBL.テスト情報のクリア
            UPDATE JIBTJUSHOHENKO_TAISHO
        SET GEN_TEST_FLG   = 0,
                  HON_TEST_FLG   = 0,
                  TEST_DATE      = 0,
                  TEST_TIME      = 0;
        END IF;
    EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
    END;
    RETURN RTN_CD;
END FUNC_CLEAR_TAISHO_TEST;
------------------------------------------------------------------------------
--  宛名基本中間（IES用）の初期化
------------------------------------------------------------------------------
PROCEDURE INIT_EBT_IES_ATENAKIHON IS
BEGIN
    o_EBT_IES_ATENAKIHON.ENTRY_ID := 0;
    o_EBT_IES_ATENAKIHON.KOJIN_NO := 0;
    o_EBT_IES_ATENAKIHON.RIREKI_RENBAN := 0;
    o_EBT_IES_ATENAKIHON.TEKIYO_BI := 0;
    o_EBT_IES_ATENAKIHON.TOROKU_GYOMU := '';
    o_EBT_IES_ATENAKIHON.JUMINHYO_CD := 0;
    o_EBT_IES_ATENAKIHON.SETAI_NO := 0;
    o_EBT_IES_ATENAKIHON.GENZON_KBN := 0;
    o_EBT_IES_ATENAKIHON.JINKAKU_KBN := 0;
    o_EBT_IES_ATENAKIHON.KOKUSEKI_CD := 0;
    o_EBT_IES_ATENAKIHON.SANTEIDANTAI_CD := 0;
    o_EBT_IES_ATENAKIHON.SEINENGAPI := 0;
    o_EBT_IES_ATENAKIHON.WAREKI_SEINENGAPI := 0;
    o_EBT_IES_ATENAKIHON.HYOJI_SEINENGAPI := '' ;
    o_EBT_IES_ATENAKIHON.SEIBETSU := 0;
    o_EBT_IES_ATENAKIHON.SHIMEI_KANA := '' ;
    o_EBT_IES_ATENAKIHON.SHIMEI_KANJI := '' ;
    o_EBT_IES_ATENAKIHON.HONMYO_KANA := '' ;
    o_EBT_IES_ATENAKIHON.HONMYO_KANJI := '' ;
    o_EBT_IES_ATENAKIHON.DAIHYO_KATAGAKI := '';
    o_EBT_IES_ATENAKIHON.DAIHYO_SHIMEI := '';
    o_EBT_IES_ATENAKIHON.TEL_NO := '';
    o_EBT_IES_ATENAKIHON.TEL_KBN := 0;
    o_EBT_IES_ATENAKIHON.FAX_NO := '';
    o_EBT_IES_ATENAKIHON.MAIL_ADS := '';
    o_EBT_IES_ATENAKIHON.YUHEN_KBN := 0;
    o_EBT_IES_ATENAKIHON.TOROKU_JIYU := '';
    o_EBT_IES_ATENAKIHON.JUFUKU_KOJIN_NO := 0;
    o_EBT_IES_ATENAKIHON.SYS_SAKUSEIBI := '';
    o_EBT_IES_ATENAKIHON.SYS_KOSHINBI := 0;
    o_EBT_IES_ATENAKIHON.SYS_JIKAN := '';
    o_EBT_IES_ATENAKIHON.SYS_SHOKUINKOJIN_NO := 0;
    o_EBT_IES_ATENAKIHON.SYS_TANMATSU_NO := '';
    o_EBT_IES_ATENAKIHON.GAIJI_FLG := 0;
    o_EBT_IES_ATENAKIHON.HOJINSOSHIKI_CD := 0;
    o_EBT_IES_ATENAKIHON.JE_KOKUHOSHISANWARI_KBN := 0;
    o_EBT_IES_ATENAKIHON.JE_JINTEKIGENMEN_KBN := 0;
    o_EBT_IES_ATENAKIHON.JE_SHOYUSHAKEISHONIN_KBN := 0;
    o_EBT_IES_ATENAKIHON.JE_LINK_KOJIN_NO := 0;
    o_EBT_IES_ATENAKIHON.JE_NAYOSE_NO := '';
    o_EBT_IES_ATENAKIHON.YOBI1_CD := 0;
    o_EBT_IES_ATENAKIHON.YOBI2_CD := 0;
    o_EBT_IES_ATENAKIHON.YOBI3_CD := 0;
    o_EBT_IES_ATENAKIHON.YOBI4_CD := 0;
    o_EBT_IES_ATENAKIHON.YOBI5_CD := 0;
    o_EBT_IES_ATENAKIHON.YOBI1_CH := '';
    o_EBT_IES_ATENAKIHON.YOBI2_CH := '';
    o_EBT_IES_ATENAKIHON.YOBI3_CH := '';
    o_EBT_IES_ATENAKIHON.YOBI4_CH := '';
    o_EBT_IES_ATENAKIHON.YOBI5_CH := '';
    o_EBT_IES_ATENAKIHON.SHISHO_CD := 0;
    o_EBT_IES_ATENAKIHON.CHIKU_CD := 0;
    o_EBT_IES_ATENAKIHON.GYOSEIKU_CD := 0;
    o_EBT_IES_ATENAKIHON.HAN_CD := 0;
    o_EBT_IES_ATENAKIHON.SHOGAKU_CD := 0;
    o_EBT_IES_ATENAKIHON.CHUGAKU_CD := 0;
    o_EBT_IES_ATENAKIHON.TOHYOKU_CD := 0;
    o_EBT_IES_ATENAKIHON.USER_CD := 0;
    o_EBT_IES_ATENAKIHON.OAZA_CD := 0;
    o_EBT_IES_ATENAKIHON.HONBAN := '';
    o_EBT_IES_ATENAKIHON.EDABAN1 := '';
    o_EBT_IES_ATENAKIHON.EDABAN2 := '';
    o_EBT_IES_ATENAKIHON.EDABAN3 := '';
    o_EBT_IES_ATENAKIHON.KATAGAKI_CD := 0;
    o_EBT_IES_ATENAKIHON.GAIKU := '';
    o_EBT_IES_ATENAKIHON.TOU := '';
    o_EBT_IES_ATENAKIHON.GOU := '';
    o_EBT_IES_ATENAKIHON.JICHI_CD := 0;
    o_EBT_IES_ATENAKIHON.YUBIN_NO := '';
    o_EBT_IES_ATENAKIHON.YUBIN_NOBC := '';
    o_EBT_IES_ATENAKIHON.CHOMEI := '';
    o_EBT_IES_ATENAKIHON.BANCHI := '';
    o_EBT_IES_ATENAKIHON.KATAGAKI := '';
    o_EBT_IES_ATENAKIHON.CHOMEI_KANA := '';
    o_EBT_IES_ATENAKIHON.BANCHI_KANA := '';
    o_EBT_IES_ATENAKIHON.KATAGAKI_KANA := '';
    o_EBT_IES_ATENAKIHON.KATAGAKI_HIDE_FLG := 0;
    o_EBT_IES_ATENAKIHON.TOUGOU_NO          := '';
    o_EBT_IES_ATENAKIHON.SEIDO_KOJIN_NO     := null;
    o_EBT_IES_ATENAKIHON.SEIDO_HOJIN_NO     := 0;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD1        := 0;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD2        := 0;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD3        := 0;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD4        := 0;
    o_EBT_IES_ATENAKIHON.ZOKUGARAKBN        := 0;
    o_EBT_IES_ATENAKIHON.ZOKUGARAMEI        := '';
    o_EBT_IES_ATENAKIHON.JITSUZOKUGARAMEI   := '';
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
    o_EBT_IES_ATENAKIHON.SHIMEI_KANA_FLG    := 0;
    o_EBT_IES_ATENAKIHON.RIREKI_EDABAN      := 0;
    o_EBT_IES_ATENAKIHON.SAISHIN_FLG        := 0;
    o_EBT_IES_ATENAKIHON.TORIKESHI_FLG      := 0;
    o_EBT_IES_ATENAKIHON.JOHYOYODATA_FLG    := 0;
    o_EBT_IES_ATENAKIHON.KOKUMEI_CD         := 0;
--2024/02/05 DIS.Liuyaxin Add end
END INIT_EBT_IES_ATENAKIHON;
------------------------------------------------------------------------------
--  宛名基本中間（IES用）のインサート
------------------------------------------------------------------------------
FUNCTION FUNC_SET_ATENAKIHON(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE) RETURN PLS_INTEGER IS

BEGIN
--2024/11/09 DIS.Wangdeli Add 0.3.000.000:新WizLIFE２次開発 IT_JIB_00622対応
    RTN_CD := C_ISUCCESS;
    --宛名基本中間（IES用）の初期化
    INIT_EBT_IES_ATENAKIHON;
    o_EBT_IES_ATENAKIHON.ENTRY_ID := NVL(W_ENTORYID,0);
    o_EBT_IES_ATENAKIHON.KOJIN_NO := NVL(R_TAISHO.KOJIN_NO,0);
    o_EBT_IES_ATENAKIHON.RIREKI_RENBAN := NVL(o_GABTATENAKIHON.RIREKI_RENBAN + 10, 0);
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
    o_EBT_IES_ATENAKIHON.RIREKI_EDABAN   := NVL(o_GABTATENAKIHON.RIREKI_EDABAN,0);
    o_EBT_IES_ATENAKIHON.SAISHIN_FLG     := NVL(o_GABTATENAKIHON.SAISHIN_FLG,0);
    o_EBT_IES_ATENAKIHON.TORIKESHI_FLG   := NVL(o_GABTATENAKIHON.TORIKESHI_FLG,0);
    o_EBT_IES_ATENAKIHON.JOHYOYODATA_FLG := NVL(o_GABTATENAKIHON.JOHYOYODATA_FLG,0);
--2024/02/05 DIS.Liuyain Add end
    o_EBT_IES_ATENAKIHON.TEKIYO_BI := NVL(W_NIDOBI,0);
    o_EBT_IES_ATENAKIHON.TOROKU_GYOMU := NVL(o_GABTATENAKIHON.TOROKU_GYOMU,'');
    o_EBT_IES_ATENAKIHON.JUMINHYO_CD := NVL(o_GABTATENAKIHON.JUMINHYO_CD,0);
    o_EBT_IES_ATENAKIHON.SETAI_NO := NVL(o_GABTATENAKIHON.SETAI_NO,0);
    o_EBT_IES_ATENAKIHON.GENZON_KBN := NVL(o_GABTATENAKIHON.GENZON_KBN,0);
    o_EBT_IES_ATENAKIHON.JINKAKU_KBN := NVL(o_GABTATENAKIHON.JINKAKU_KBN,0);
    o_EBT_IES_ATENAKIHON.KOKUSEKI_CD := NVL(o_GABTATENAKIHON.KOKUSEKI_CD,0);
    o_EBT_IES_ATENAKIHON.SANTEIDANTAI_CD := NVL(o_GABTATENAKIHON.SANTEIDANTAI_CD,0);
    o_EBT_IES_ATENAKIHON.SEINENGAPI := NVL(o_GABTATENAKIHON.SEINENGAPI,0);
    o_EBT_IES_ATENAKIHON.WAREKI_SEINENGAPI := NVL(o_GABTATENAKIHON.WAREKI_SEINENGAPI,0);
    o_EBT_IES_ATENAKIHON.HYOJI_SEINENGAPI := o_GABTATENAKIHON.HYOJI_SEINENGAPI;
    o_EBT_IES_ATENAKIHON.SEIBETSU := NVL(o_GABTATENAKIHON.SEIBETSU,0);
    o_EBT_IES_ATENAKIHON.SHIMEI_KANA := o_GABTATENAKIHON.SHIMEI_KANA;
    o_EBT_IES_ATENAKIHON.SHIMEI_KANJI := o_GABTATENAKIHON.SHIMEI_KANJI;
    o_EBT_IES_ATENAKIHON.HONMYO_KANA := o_GABTATENAKIHON.HONMYO_KANA;
    o_EBT_IES_ATENAKIHON.HONMYO_KANJI := o_GABTATENAKIHON.HONMYO_KANJI;
    o_EBT_IES_ATENAKIHON.DAIHYO_KATAGAKI := o_GABTATENAKIHON.DAIHYO_KATAGAKI;
    o_EBT_IES_ATENAKIHON.DAIHYO_SHIMEI := o_GABTATENAKIHON.DAIHYO_SHIMEI;
    o_EBT_IES_ATENAKIHON.TEL_NO := o_GABTATENAKIHON.TEL_NO;
    o_EBT_IES_ATENAKIHON.TEL_KBN := NVL(o_GABTATENAKIHON.TEL_KBN,0);
    o_EBT_IES_ATENAKIHON.FAX_NO := o_GABTATENAKIHON.FAX_NO;
    o_EBT_IES_ATENAKIHON.MAIL_ADS := o_GABTATENAKIHON.MAIL_ADS;
    o_EBT_IES_ATENAKIHON.YUHEN_KBN := NVL(o_GABTATENAKIHON.YUHEN_KBN,0);
    o_EBT_IES_ATENAKIHON.TOROKU_JIYU := o_GABTATENAKIHON.TOROKU_JIYU;
    o_EBT_IES_ATENAKIHON.JUFUKU_KOJIN_NO := NVL(o_GABTATENAKIHON.JUFUKU_KOJIN_NO,0);
    o_EBT_IES_ATENAKIHON.SYS_SAKUSEIBI := TO_NUMBER(W_SYSDATE);
    o_EBT_IES_ATENAKIHON.SYS_KOSHINBI := 0;
    o_EBT_IES_ATENAKIHON.SYS_JIKAN := TO_NUMBER(W_SYSTIME);
    o_EBT_IES_ATENAKIHON.SYS_SHOKUINKOJIN_NO := NVL(i_NSHOKUIN_NO,0);
    o_EBT_IES_ATENAKIHON.SYS_TANMATSU_NO := i_VTANMATSU_NO;
    o_EBT_IES_ATENAKIHON.GAIJI_FLG := NVL(o_GABTATENAKIHON.GAIJI_FLG,0);
    o_EBT_IES_ATENAKIHON.HOJINSOSHIKI_CD := NVL(o_GABTATENAKIHON.HOJINSOSHIKI_CD,0);
    o_EBT_IES_ATENAKIHON.JE_KOKUHOSHISANWARI_KBN := NVL(o_GABTATENAKIHON.JE_KOKUHOSHISANWARI_KBN,0);
    o_EBT_IES_ATENAKIHON.JE_JINTEKIGENMEN_KBN := NVL(o_GABTATENAKIHON.JE_JINTEKIGENMEN_KBN,0);
    o_EBT_IES_ATENAKIHON.JE_SHOYUSHAKEISHONIN_KBN := NVL(o_GABTATENAKIHON.JE_SHOYUSHAKEISHONIN_KBN,0);
    o_EBT_IES_ATENAKIHON.JE_LINK_KOJIN_NO := NVL(o_GABTATENAKIHON.JE_LINK_KOJIN_NO,0);
    o_EBT_IES_ATENAKIHON.JE_NAYOSE_NO := o_GABTATENAKIHON.JE_NAYOSE_NO;
    o_EBT_IES_ATENAKIHON.YOBI1_CD := NVL(o_GABTATENAKIHON.YOBI1_CD,0);
    o_EBT_IES_ATENAKIHON.YOBI2_CD := NVL(o_GABTATENAKIHON.YOBI2_CD,0);
    o_EBT_IES_ATENAKIHON.YOBI3_CD := NVL(o_GABTATENAKIHON.YOBI3_CD,0);
    o_EBT_IES_ATENAKIHON.YOBI4_CD := NVL(o_GABTATENAKIHON.YOBI4_CD,0);
    o_EBT_IES_ATENAKIHON.YOBI5_CD := NVL(o_GABTATENAKIHON.YOBI5_CD,0);
    o_EBT_IES_ATENAKIHON.YOBI1_CH := o_GABTATENAKIHON.YOBI1_CH;
    o_EBT_IES_ATENAKIHON.YOBI2_CH := o_GABTATENAKIHON.YOBI2_CH;
    o_EBT_IES_ATENAKIHON.YOBI3_CH := o_GABTATENAKIHON.YOBI3_CH;
    o_EBT_IES_ATENAKIHON.YOBI4_CH := o_GABTATENAKIHON.YOBI4_CH;
    o_EBT_IES_ATENAKIHON.YOBI5_CH := o_GABTATENAKIHON.YOBI5_CH;
    IF(W_UPDKUBUN = 2) THEN   
      o_EBT_IES_ATENAKIHON.SHISHO_CD := NVL(o_GABTATENAKIHON.SHISHO_CD,0);
      o_EBT_IES_ATENAKIHON.CHIKU_CD := NVL(o_GABTATENAKIHON.CHIKU_CD,0);
      o_EBT_IES_ATENAKIHON.GYOSEIKU_CD := NVL(o_GABTATENAKIHON.GYOSEIKU_CD,0);
      o_EBT_IES_ATENAKIHON.HAN_CD := NVL(o_GABTATENAKIHON.HAN_CD,0);
      o_EBT_IES_ATENAKIHON.SHOGAKU_CD := NVL(o_GABTATENAKIHON.SHOGAKU_CD,0);
      o_EBT_IES_ATENAKIHON.CHUGAKU_CD := NVL(o_GABTATENAKIHON.CHUGAKU_CD,0);
      o_EBT_IES_ATENAKIHON.TOHYOKU_CD := NVL(o_GABTATENAKIHON.TOHYOKU_CD,0);
      o_EBT_IES_ATENAKIHON.USER_CD := NVL(o_GABTATENAKIHON.USER_CD,0);
      o_EBT_IES_ATENAKIHON.OAZA_CD := NVL(o_GABTATENAKIHON.OAZA_CD,0);
      o_EBT_IES_ATENAKIHON.HONBAN := o_GABTATENAKIHON.HONBAN;
      o_EBT_IES_ATENAKIHON.EDABAN1 := o_GABTATENAKIHON.EDABAN1;
      o_EBT_IES_ATENAKIHON.EDABAN2 := o_GABTATENAKIHON.EDABAN2;
      o_EBT_IES_ATENAKIHON.EDABAN3 := o_GABTATENAKIHON.EDABAN3;
      o_EBT_IES_ATENAKIHON.KATAGAKI_CD := NVL(o_GABTATENAKIHON.KATAGAKI_CD,0);
      o_EBT_IES_ATENAKIHON.GAIKU := o_GABTATENAKIHON.GAIKU;
      o_EBT_IES_ATENAKIHON.TOU := o_GABTATENAKIHON.TOU;
      o_EBT_IES_ATENAKIHON.GOU := o_GABTATENAKIHON.GOU;
      o_EBT_IES_ATENAKIHON.JICHI_CD := NVL(o_GABTATENAKIHON.JICHI_CD,0);
      o_EBT_IES_ATENAKIHON.YUBIN_NO := o_GABTATENAKIHON.YUBIN_NO;
      o_EBT_IES_ATENAKIHON.YUBIN_NOBC := o_GABTATENAKIHON.YUBIN_NOBC;
      o_EBT_IES_ATENAKIHON.CHOMEI := o_GABTATENAKIHON.CHOMEI;
      o_EBT_IES_ATENAKIHON.BANCHI := o_GABTATENAKIHON.BANCHI;
      o_EBT_IES_ATENAKIHON.KATAGAKI := o_GABTATENAKIHON.KATAGAKI;
      o_EBT_IES_ATENAKIHON.CHOMEI_KANA := o_GABTATENAKIHON.CHOMEI_KANA;
      o_EBT_IES_ATENAKIHON.BANCHI_KANA := o_GABTATENAKIHON.BANCHI_KANA;
      o_EBT_IES_ATENAKIHON.KATAGAKI_KANA := o_GABTATENAKIHON.KATAGAKI_KANA;
      o_EBT_IES_ATENAKIHON.KATAGAKI_HIDE_FLG := NVL(o_GABTATENAKIHON.KATAGAKI_HIDE_FLG,0);
    ELSIF(W_UPDKUBUN = 1) THEN
      IF CTLPRM9 = 0 THEN
        o_EBT_IES_ATENAKIHON.SHISHO_CD := NVL(o_GABTATENAKIHON.SHISHO_CD,0);
      ELSE
        o_EBT_IES_ATENAKIHON.SHISHO_CD := NVL(R_TAISHO.SHISHO_CD,0);
      END IF;
      IF CTLPRM2 = 0 THEN
        o_EBT_IES_ATENAKIHON.CHIKU_CD := NVL(o_GABTATENAKIHON.CHIKU_CD,0);
      ELSE
        o_EBT_IES_ATENAKIHON.CHIKU_CD := NVL(R_TAISHO.CHIKU_CD,0);
      END IF;
      IF CTLPRM1 = 0 THEN
        o_EBT_IES_ATENAKIHON.GYOSEIKU_CD := NVL(o_GABTATENAKIHON.GYOSEIKU_CD,0);
      ELSE
        o_EBT_IES_ATENAKIHON.GYOSEIKU_CD := NVL(R_TAISHO.GYOSEIKU_CD,0);
      END IF;
      IF CTLPRM3 = 0 THEN
        o_EBT_IES_ATENAKIHON.HAN_CD := NVL(o_GABTATENAKIHON.HAN_CD,0);
      ELSE
        o_EBT_IES_ATENAKIHON.HAN_CD := NVL(R_TAISHO.HAN_CD,0);
      END IF;
      IF CTLPRM4 = 0 THEN
        o_EBT_IES_ATENAKIHON.SHOGAKU_CD := NVL(o_GABTATENAKIHON.SHOGAKU_CD,0);
      ELSE
        o_EBT_IES_ATENAKIHON.SHOGAKU_CD := NVL(R_TAISHO.SHOGAKU_CD,0);
      END IF;
      IF CTLPRM5 = 0 THEN
        o_EBT_IES_ATENAKIHON.CHUGAKU_CD := NVL(o_GABTATENAKIHON.CHUGAKU_CD,0);
      ELSE
        o_EBT_IES_ATENAKIHON.CHUGAKU_CD := NVL(R_TAISHO.CHUGAKU_CD,0);
      END IF;
      IF CTLPRM6 = 0 THEN
        o_EBT_IES_ATENAKIHON.TOHYOKU_CD := NVL(o_GABTATENAKIHON.TOHYOKU_CD,0);
      ELSE
        o_EBT_IES_ATENAKIHON.TOHYOKU_CD := NVL(R_TAISHO.TOHYOKU_CD,0);
      END IF;
      o_EBT_IES_ATENAKIHON.USER_CD := NVL(R_TAISHO.AF_GEN_CITY_CD,0);
      o_EBT_IES_ATENAKIHON.OAZA_CD := NVL(R_TAISHO.AF_GEN_OAZA_CD,0);
      o_EBT_IES_ATENAKIHON.HONBAN := R_TAISHO.AF_GEN_HONBAN;
      o_EBT_IES_ATENAKIHON.EDABAN1 := R_TAISHO.AF_GEN_EDABAN1;
      o_EBT_IES_ATENAKIHON.EDABAN2 := R_TAISHO.AF_GEN_EDABAN2;
      o_EBT_IES_ATENAKIHON.EDABAN3 := R_TAISHO.AF_GEN_EDABAN3;
      o_EBT_IES_ATENAKIHON.KATAGAKI_CD := NVL(R_TAISHO.AF_GEN_KATAGAKI_CD,0);
      o_EBT_IES_ATENAKIHON.GAIKU := R_TAISHO.AF_GEN_GAIKU;
      o_EBT_IES_ATENAKIHON.TOU := R_TAISHO.AF_GEN_TOU;
      o_EBT_IES_ATENAKIHON.GOU := R_TAISHO.AF_GEN_GOU;
      o_EBT_IES_ATENAKIHON.JICHI_CD := NVL(R_TAISHO.AF_GEN_JICHI_CD,0);
      o_EBT_IES_ATENAKIHON.YUBIN_NO := R_TAISHO.AF_GEN_YUBIN_NO;
      o_EBT_IES_ATENAKIHON.YUBIN_NOBC := R_TAISHO.AF_GEN_YUBIN_NOBC;
      o_EBT_IES_ATENAKIHON.CHOMEI := R_TAISHO.AF_GEN_CHOMEI;
      o_EBT_IES_ATENAKIHON.BANCHI := R_TAISHO.AF_GEN_BANCHI;
      o_EBT_IES_ATENAKIHON.KATAGAKI := R_TAISHO.AF_GEN_KATAGAKI;
      o_EBT_IES_ATENAKIHON.CHOMEI_KANA := R_TAISHO.AF_GEN_CHOMEI_KANA;
      o_EBT_IES_ATENAKIHON.BANCHI_KANA := R_TAISHO.AF_GEN_BANCHI_KANA;
      o_EBT_IES_ATENAKIHON.KATAGAKI_KANA := R_TAISHO.AF_GEN_KATAGAKI_KANA;
      o_EBT_IES_ATENAKIHON.KATAGAKI_HIDE_FLG := NVL(R_TAISHO.AF_GEN_KATAGAKI_HIDE_FLG,0);
    END IF;
    o_EBT_IES_ATENAKIHON.TOUGOU_NO          := o_GABTATENAKIHON.TOUGOU_NO;
    o_EBT_IES_ATENAKIHON.SEIDO_KOJIN_NO     := o_GABTATENAKIHON.SEIDO_KOJIN_NO;
    o_EBT_IES_ATENAKIHON.SEIDO_HOJIN_NO     := o_GABTATENAKIHON.SEIDO_HOJIN_NO;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD1        := o_GABTATENAKIHON.ZOKUGARACD1;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD2        := o_GABTATENAKIHON.ZOKUGARACD2;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD3        := o_GABTATENAKIHON.ZOKUGARACD3;
    o_EBT_IES_ATENAKIHON.ZOKUGARACD4        := o_GABTATENAKIHON.ZOKUGARACD4;
    o_EBT_IES_ATENAKIHON.ZOKUGARAKBN        := o_GABTATENAKIHON.ZOKUGARAKBN;
    o_EBT_IES_ATENAKIHON.ZOKUGARAMEI        := o_GABTATENAKIHON.ZOKUGARAMEI;
    o_EBT_IES_ATENAKIHON.JITSUZOKUGARAMEI   := o_GABTATENAKIHON.JITSUZOKUGARAMEI;
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
    o_EBT_IES_ATENAKIHON.KETAPRM            := o_GABTATENAKIHON.KETAPRM;
    o_EBT_IES_ATENAKIHON.KOKUMEI_CD         := NVL(o_GABTATENAKIHON.KOKUMEI_CD,0);
    o_EBT_IES_ATENAKIHON.SHIMEI_KANA_FLG    := NVL(o_GABTJUKIIDO.SHIMEI_KANA_FLG,0);
    o_EBT_IES_ATENAKIHON.TSUSHO_KANA_FLG    := NVL(o_GABTJUKIIDO.TSUSHO_KANA_FLG,0);
--2024/02/05 DIS.Liuyaxin Add end
    BEGIN
      INSERT INTO JIBWIES_JUKIKIHON VALUES o_EBT_IES_ATENAKIHON;
    EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
    END;
    RETURN RTN_CD;
END FUNC_SET_ATENAKIHON;
------------------------------------------------------------------------------
--  住基異動中間（IES用）のインサートする前に初期化
------------------------------------------------------------------------------
PROCEDURE INIT_EBT_IES_JUKIIDO IS
  BEGIN
      --初期化
      o_EBT_IES_JUKIIDO.ENTRY_ID             := 0;
      o_EBT_IES_JUKIIDO.KOJIN_NO             := 0;
      o_EBT_IES_JUKIIDO.JUMINHYO_CD          := 0;
      o_EBT_IES_JUKIIDO.SETAI_NO             := 0;
      o_EBT_IES_JUKIIDO.JUN_SETAI_KBN        := 0;
      o_EBT_IES_JUKIIDO.SAIDAI_JUSHO_REN     := 0;
      o_EBT_IES_JUKIIDO.GENZON_KBN           := 0;
      o_EBT_IES_JUKIIDO.JINKAKU_KBN          := 0;
      o_EBT_IES_JUKIIDO.NUSHI_KBN            := 0;
      o_EBT_IES_JUKIIDO.SHISHO_CD            := 0;
      o_EBT_IES_JUKIIDO.CHIKU_CD             := 0;
      o_EBT_IES_JUKIIDO.GYOSEIKU_CD          := 0;
      o_EBT_IES_JUKIIDO.HAN_CD               := 0;
      o_EBT_IES_JUKIIDO.SHOGAKU_CD           := 0;
      o_EBT_IES_JUKIIDO.CHUGAKU_CD           := 0;
      o_EBT_IES_JUKIIDO.TOHYOKU_CD           := 0;
      o_EBT_IES_JUKIIDO.GENJUSHO_REN         := 0;
      o_EBT_IES_JUKIIDO.HONSEKI_REN          := 0;
      o_EBT_IES_JUKIIDO.BIKO                 := '';
      o_EBT_IES_JUKIIDO.ZENBU_ICHIBU_KEY     := 0;
      o_EBT_IES_JUKIIDO.GOMI_CD              := 0;
      o_EBT_IES_JUKIIDO.SINYO_CD             := 0;
      o_EBT_IES_JUKIIDO.SANTEIDANTAI_CD      := 0;
      o_EBT_IES_JUKIIDO.ZOKUGARA_CD1         := 0;
      o_EBT_IES_JUKIIDO.ZOKUGARA_CD2         := 0;
      o_EBT_IES_JUKIIDO.ZOKUGARA_CD3         := 0;
      o_EBT_IES_JUKIIDO.ZOKUGARA_CD4         := 0;
      o_EBT_IES_JUKIIDO.ZOKUGARA_KBN         := 0;
      o_EBT_IES_JUKIIDO.ZOKUGARA_MEI         := '';
      o_EBT_IES_JUKIIDO.JITSU_ZOKUGARA_MEI   := '';
      o_EBT_IES_JUKIIDO.SEINENGAPI           := 0;
      o_EBT_IES_JUKIIDO.WAREKI_SEINENGAPI    := 0;
      o_EBT_IES_JUKIIDO.HYOJI_SEINENGAPI     := '';
      o_EBT_IES_JUKIIDO.SEIBETSU             := 0;
      o_EBT_IES_JUKIIDO.KISAI_JUNI           := 0;
      o_EBT_IES_JUKIIDO.IDO_BI               := 0;
      o_EBT_IES_JUKIIDO.IDO_JIYU             := 0;
      o_EBT_IES_JUKIIDO.IDO_TODOKE_BI        := 0;
      o_EBT_IES_JUKIIDO.IDO_TODOKE_KBN       := 0;
      o_EBT_IES_JUKIIDO.JUTEI_BI             := 0;
      o_EBT_IES_JUKIIDO.JUTEI_JIYU           := 0;
      o_EBT_IES_JUKIIDO.JUTEI_TODOKEDE_BI    := 0;
      o_EBT_IES_JUKIIDO.JUTEI_TODOKEDE_KBN   := 0;
      o_EBT_IES_JUKIIDO.ZENJUSHO_REN         := 0;
      o_EBT_IES_JUKIIDO.TENNYUMAE_REN      := 0;
      o_EBT_IES_JUKIIDO.TENNYU_MITODOKE_REN             := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_BI              := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_TODOKEDE_BI     := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_TODOKEDE_KBN    := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_REN             := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_BI            := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_TSUCHI_BI     := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN  := 0;
      o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_REN           := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NARU                      := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NARU_JIYU                 := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NARU_TODOKEDE_BI          := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NARU_TODOKEDE_KBN         := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU                  := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_JIYU             := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_TODOKEDE_BI      := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_TODOKEDE_KBN     := 0;
      o_EBT_IES_JUKIIDO.SHIBOBI_FUSHO_KBN               := 0;
      o_EBT_IES_JUKIIDO.SHIMEI_KANA                     := '';
      o_EBT_IES_JUKIIDO.SHIMEI_KANJI                    := '';
      o_EBT_IES_JUKIIDO.HONMYO_KANA                     := '';
      o_EBT_IES_JUKIIDO.HONMYO_KANJI                    := '';
      o_EBT_IES_JUKIIDO.NUSHI_SHIMEI_KANA               := '';
      o_EBT_IES_JUKIIDO.NUSHI_SHIMEI_KANJI              := '';
      o_EBT_IES_JUKIIDO.KAISEI_REN                      := 0;
      o_EBT_IES_JUKIIDO.KAISEI_BI                       := 0;
      o_EBT_IES_JUKIIDO.KYU_SHIMEI_KANA                 := '';
      o_EBT_IES_JUKIIDO.KYU_SHIMEI_KANJI                := '';
      o_EBT_IES_JUKIIDO.KOIKI_KOJIN_NO                  := 0;
      o_EBT_IES_JUKIIDO.SHORIBI_KEY                     := 0;
      o_EBT_IES_JUKIIDO.SHORI_JIKAN_KEY                 := 0;
      o_EBT_IES_JUKIIDO.SHORI_KBN_KEY                   := 0;
      o_EBT_IES_JUKIIDO.SHOKUINKOJIN_NO_KEY             := 0;
      o_EBT_IES_JUKIIDO.SYS_SAKUSEIBI                   := 0;
      o_EBT_IES_JUKIIDO.SYS_KOSHINBI                    := 0;
      o_EBT_IES_JUKIIDO.SYS_JIKAN                       := 0;
      o_EBT_IES_JUKIIDO.SYS_SHOKUINKOJIN_NO             := 0;
      o_EBT_IES_JUKIIDO.SYS_TANMATSU_NO                 := '';
      o_EBT_IES_JUKIIDO.KOIKIKOFU_STOP_CD               := 0;
      o_EBT_IES_JUKIIDO.GAIJI_FLG                       := 0;
      o_EBT_IES_JUKIIDO.YOBI1_CD                        := 0;
      o_EBT_IES_JUKIIDO.YOBI2_CD                        := 0;
      o_EBT_IES_JUKIIDO.YOBI3_CD                        := 0;
      o_EBT_IES_JUKIIDO.YOBI4_CD                        := 0;
      o_EBT_IES_JUKIIDO.YOBI5_CD                        := 0;
      o_EBT_IES_JUKIIDO.YOBI1_CH                        := '';
      o_EBT_IES_JUKIIDO.YOBI2_CH                        := '';
      o_EBT_IES_JUKIIDO.YOBI3_CH                        := '';
      o_EBT_IES_JUKIIDO.YOBI4_CH                        := '';
      o_EBT_IES_JUKIIDO.YOBI5_CH                        := '';
--2013/08/01 T.ABE ADD Start
      o_EBT_IES_JUKIIDO.ALP_SHIMEI_KANA                 := '';
      o_EBT_IES_JUKIIDO.ALP_SHIMEI_KANJI                := '';
      o_EBT_IES_JUKIIDO.GAI_SHIMEI_KANA                 := '';
      o_EBT_IES_JUKIIDO.GAI_SHIMEI_KANJI                := '';
      o_EBT_IES_JUKIIDO.TSUSHOMEI_KANA                  := '';
      o_EBT_IES_JUKIIDO.TSUSHOMEI_KANJI                 := '';
      o_EBT_IES_JUKIIDO.HEIKIMEI_KANA                   := '';
      o_EBT_IES_JUKIIDO.HEIKIMEI_KANJI                  := '';
      o_EBT_IES_JUKIIDO.GAIKOKU_JUMIN_NARU              := 0;
      o_EBT_IES_JUKIIDO.ZAIRYU_NO_SHUBETSU              := 0;
      o_EBT_IES_JUKIIDO.ZAIRYU_CARD_NO                  := '';
      o_EBT_IES_JUKIIDO.ZAIRYU_SHIKAKU_CD               := 0;
      o_EBT_IES_JUKIIDO.ZAIRYU_SHURYO_BI                := 0;
      o_EBT_IES_JUKIIDO.ZAIRYU_KIKAN_NEN                := 0;
      o_EBT_IES_JUKIIDO.ZAIRYU_KIKAN_TSUKI              := 0;
      o_EBT_IES_JUKIIDO.ZAIRYU_KIKAN_HI                 := 0;
      o_EBT_IES_JUKIIDO.KOKUSEKI_CD                     := 0;
      o_EBT_IES_JUKIIDO.CARD_MANRYO_BI                  := 0;
      o_EBT_IES_JUKIIDO.KBN_30_45                       := 0;
      o_EBT_IES_JUKIIDO.KYOJYUCHI_UMU                   := 0;
      o_EBT_IES_JUKIIDO.SEINENGAPI_FUSHO_KBN            := 0;
      o_EBT_IES_JUKIIDO.RYOKEN_BANGO                    := 0;
      o_EBT_IES_JUKIIDO.RYOKEN_HAKKO_BI                 := 0;
      o_EBT_IES_JUKIIDO.JORIKU_KYOKA_BI                 := 0;
      o_EBT_IES_JUKIIDO.JUMIN_NUSHI_SHIMEI              := 0;
      o_EBT_IES_JUKIIDO.SEIDO_KOJIN_NO                  := null;
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
      o_EBT_IES_JUKIIDO.SAISEIKISAI_DATE                := 0;
      o_EBT_IES_JUKIIDO.SAISEISHOJODATE                 := 0;
      o_EBT_IES_JUKIIDO.SHIMEI_KANA_FLG                 := 0;
      o_EBT_IES_JUKIIDO.TSUSHO_KANA_FLG                 := 0;
      o_EBT_IES_JUKIIDO.NYURYOKUBASHO                   := '';
      o_EBT_IES_JUKIIDO.SAISYUTOROKUJUSHO_REN           := 0;
      o_EBT_IES_JUKIIDO.SEIBETSU_FUSHO_KBN              := 0;
      o_EBT_IES_JUKIIDO.IDO_JIYU_SHOSAI                 := 0;
      o_EBT_IES_JUKIIDO.IDOKOMOKU_1                     := 0;
      o_EBT_IES_JUKIIDO.RYUIJIKO_1                      := '';
      o_EBT_IES_JUKIIDO.IDOKOMOKU_2                     := 0;
      o_EBT_IES_JUKIIDO.RYUIJIKO_2                      := '';
      o_EBT_IES_JUKIIDO.IDOKOMOKU_3                     := 0;
      o_EBT_IES_JUKIIDO.RYUIJIKO_3                      := '';
      o_EBT_IES_JUKIIDO.KBN_30_46_47                    := '';     
--2024/02/05 DIS.Liuyaxin Add end
END INIT_EBT_IES_JUKIIDO;
------------------------------------------------------------------------------
--  住基異動中間（IES用）のインサート
------------------------------------------------------------------------------
FUNCTION FUNC_SET_JUKIIDO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE) RETURN PLS_INTEGER IS

BEGIN

  BEGIN
    RTN_CD := C_ISUCCESS;
  INIT_EBT_IES_JUKIIDO;              --初期化

  o_EBT_IES_JUKIIDO.ENTRY_ID         := NVL(W_ENTORYID,0);
  o_EBT_IES_JUKIIDO.KOJIN_NO         := NVL(R_TAISHO.KOJIN_NO,0);
  o_EBT_IES_JUKIIDO.JUMINHYO_CD      := NVL(o_GABTJUKIIDO.JUMINHYO_CD,0);
  o_EBT_IES_JUKIIDO.SETAI_NO         := NVL(o_GABTJUKIIDO.SETAI_NO,0);
  o_EBT_IES_JUKIIDO.JUN_SETAI_KBN    := NVL(o_GABTJUKIIDO.JUN_SETAI_KBN,0);
  o_EBT_IES_JUKIIDO.SAIDAI_JUSHO_REN := 0;            --【固定値】０
  o_EBT_IES_JUKIIDO.GENZON_KBN       := NVL(o_GABTJUKIIDO.GENZON_KBN,0);
  o_EBT_IES_JUKIIDO.JINKAKU_KBN      := NVL(o_GABTJUKIIDO.JINKAKU_KBN,0);
  o_EBT_IES_JUKIIDO.NUSHI_KBN        := NVL(o_GABTJUKIIDO.NUSHI_KBN,0);

  --事由区分＝４１(本籍変更)の場合
  IF W_UPDKUBUN = 2 THEN
    o_EBT_IES_JUKIIDO.SHISHO_CD      := NVL(o_GABTJUKIIDO.SHISHO_CD,0);
    o_EBT_IES_JUKIIDO.CHIKU_CD       := NVL(o_GABTJUKIIDO.CHIKU_CD,0);
    o_EBT_IES_JUKIIDO.GYOSEIKU_CD    := NVL(o_GABTJUKIIDO.GYOSEIKU_CD,0);
    o_EBT_IES_JUKIIDO.HAN_CD         := NVL(o_GABTJUKIIDO.HAN_CD,0);
    o_EBT_IES_JUKIIDO.SHOGAKU_CD     := NVL(o_GABTJUKIIDO.SHOGAKU_CD,0);
    o_EBT_IES_JUKIIDO.CHUGAKU_CD     := NVL(o_GABTJUKIIDO.CHUGAKU_CD,0);
    o_EBT_IES_JUKIIDO.TOHYOKU_CD     := NVL(o_GABTJUKIIDO.TOHYOKU_CD,0);
    o_EBT_IES_JUKIIDO.GENJUSHO_REN   := NVL(o_GABTJUKIIDO.GENJUSHO_REN,0);
    o_EBT_IES_JUKIIDO.HONSEKI_REN    := C_HONJUSHORENBAN;    --【固定値】９０５：本籍地連番
    o_EBT_IES_JUKIIDO.BIKO           := i_VHON_BIKO;         -- 引数.備考（本籍地）
    o_EBT_IES_JUKIIDO.ZENBU_ICHIBU_KEY := C_YITIBU;          --【固定値】1　    :一部
    o_EBT_IES_JUKIIDO.GOMI_CD        := NVL(o_GABTJUKIIDO.GOMI_CD,0);
    o_EBT_IES_JUKIIDO.SINYO_CD       := NVL(o_GABTJUKIIDO.SINYO_CD,0);
  END IF;

  --事由区分＝４２(現住所変更)の場合
  IF W_UPDKUBUN = 1 THEN
    IF CTLPRM9 = 0 THEN
      o_EBT_IES_JUKIIDO.SHISHO_CD      := NVL(o_GABTJUKIIDO.SHISHO_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.SHISHO_CD      := NVL(R_TAISHO.SHISHO_CD,0);
    END IF;
    IF CTLPRM2 = 0 THEN
      o_EBT_IES_JUKIIDO.CHIKU_CD       := NVL(o_GABTJUKIIDO.CHIKU_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.CHIKU_CD       := NVL(R_TAISHO.CHIKU_CD,0);
    END IF;
    IF CTLPRM1 = 0 THEN
      o_EBT_IES_JUKIIDO.GYOSEIKU_CD    := NVL(o_GABTJUKIIDO.GYOSEIKU_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.GYOSEIKU_CD    := NVL(R_TAISHO.GYOSEIKU_CD,0);
    END IF;
    IF CTLPRM3 = 0 THEN
      o_EBT_IES_JUKIIDO.HAN_CD         := NVL(o_GABTJUKIIDO.HAN_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.HAN_CD         := NVL(R_TAISHO.HAN_CD,0);
    END IF;
    IF CTLPRM4 = 0 THEN
      o_EBT_IES_JUKIIDO.SHOGAKU_CD     := NVL(o_GABTJUKIIDO.SHOGAKU_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.SHOGAKU_CD     := NVL(R_TAISHO.SHOGAKU_CD,0);
    END IF;
    IF CTLPRM5 = 0 THEN
      o_EBT_IES_JUKIIDO.CHUGAKU_CD     := NVL(o_GABTJUKIIDO.CHUGAKU_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.CHUGAKU_CD     := NVL(R_TAISHO.CHUGAKU_CD,0);
    END IF;
    IF CTLPRM6 = 0 THEN
      o_EBT_IES_JUKIIDO.TOHYOKU_CD     := NVL(o_GABTJUKIIDO.TOHYOKU_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.TOHYOKU_CD     := NVL(R_TAISHO.TOHYOKU_CD,0);
    END IF;
    o_EBT_IES_JUKIIDO.GENJUSHO_REN   := C_GENJUSHORENBAN;       --【固定値】９０１ ：現住所連番
    o_EBT_IES_JUKIIDO.HONSEKI_REN    := NVL(o_GABTJUKIIDO.HONSEKI_REN,0);
    o_EBT_IES_JUKIIDO.BIKO           := i_VGEN_BIKO;            -- 引数.備考（現住所）
    o_EBT_IES_JUKIIDO.ZENBU_ICHIBU_KEY := C_ZENBU;              --【固定値】2       :全部
    IF CTLPRM7 = 0 THEN
      o_EBT_IES_JUKIIDO.GOMI_CD        := NVL(o_GABTJUKIIDO.GOMI_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.GOMI_CD        := NVL(R_TAISHO.GOMI_CD,0);
    END IF;
    IF CTLPRM8 = 0 THEN
      o_EBT_IES_JUKIIDO.SINYO_CD       := NVL(o_GABTJUKIIDO.SINYO_CD,0);
    ELSE
      o_EBT_IES_JUKIIDO.SINYO_CD       := NVL(R_TAISHO.SINYO_CD,0);
    END IF;
  END IF;

  o_EBT_IES_JUKIIDO.SANTEIDANTAI_CD      := NVL(o_GABTJUKIIDO.SANTEIDANTAI_CD,0);
  o_EBT_IES_JUKIIDO.ZOKUGARA_CD1         := NVL(o_GABTJUKIIDO.ZOKUGARA_CD1,0);
  o_EBT_IES_JUKIIDO.ZOKUGARA_CD2         := NVL(o_GABTJUKIIDO.ZOKUGARA_CD2,0);
  o_EBT_IES_JUKIIDO.ZOKUGARA_CD3         := NVL(o_GABTJUKIIDO.ZOKUGARA_CD3,0);
  o_EBT_IES_JUKIIDO.ZOKUGARA_CD4         := NVL(o_GABTJUKIIDO.ZOKUGARA_CD4,0);
  o_EBT_IES_JUKIIDO.ZOKUGARA_KBN         := NVL(o_GABTJUKIIDO.ZOKUGARA_KBN,0);
  o_EBT_IES_JUKIIDO.ZOKUGARA_MEI         := o_GABTJUKIIDO.ZOKUGARA_MEI;
  o_EBT_IES_JUKIIDO.JITSU_ZOKUGARA_MEI   := o_GABTJUKIIDO.JITSU_ZOKUGARA_MEI;
  o_EBT_IES_JUKIIDO.SEINENGAPI           := NVL(o_GABTJUKIIDO.SEINENGAPI,0);
  o_EBT_IES_JUKIIDO.WAREKI_SEINENGAPI    := NVL(o_GABTJUKIIDO.WAREKI_SEINENGAPI,0);
  o_EBT_IES_JUKIIDO.HYOJI_SEINENGAPI     := o_GABTJUKIIDO.HYOJI_SEINENGAPI;
  o_EBT_IES_JUKIIDO.SEIBETSU             := NVL(o_GABTJUKIIDO.SEIBETSU,0);
  o_EBT_IES_JUKIIDO.KISAI_JUNI           := NVL(o_GABTJUKIIDO.KISAI_JUNI,0);
  o_EBT_IES_JUKIIDO.IDO_BI               := NVL(W_NIDOBI,0);                  --引数.異動日
  o_EBT_IES_JUKIIDO.IDO_JIYU             := NVL(W_JIYU,0);                    --異動事由
  o_EBT_IES_JUKIIDO.IDO_TODOKE_BI        := NVL(W_NTODOKE_BI,0);              --引数.届出日
  o_EBT_IES_JUKIIDO.IDO_TODOKE_KBN       := NVL(i_NIDO_TODOKE_KBN,0);         --引数.異動届出区分
  o_EBT_IES_JUKIIDO.JUTEI_BI                        := NVL(o_GABTJUKIIDO.JUTEI_BI,0);
  o_EBT_IES_JUKIIDO.JUTEI_JIYU                      := NVL(o_GABTJUKIIDO.JUTEI_JIYU,0);
  o_EBT_IES_JUKIIDO.JUTEI_TODOKEDE_BI               := NVL(o_GABTJUKIIDO.JUTEI_TODOKEDE_BI,0);
  o_EBT_IES_JUKIIDO.JUTEI_TODOKEDE_KBN              := NVL(o_GABTJUKIIDO.JUTEI_TODOKEDE_KBN,0);
  o_EBT_IES_JUKIIDO.ZENJUSHO_REN                    := NVL(o_GABTJUKIIDO.ZENJUSHO_REN,0);
  o_EBT_IES_JUKIIDO.TENNYUMAE_REN             := NVL(o_GABTJUKIIDO.TENNYUMAE_REN,0);
  o_EBT_IES_JUKIIDO.TENNYU_MITODOKE_REN             := NVL(o_GABTJUKIIDO.TENNYU_MITODOKE_REN,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_BI              := NVL(o_GABTJUKIIDO.TENSHUTSU_YOTEI_BI,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_TODOKEDE_BI     := NVL(o_GABTJUKIIDO.TENSHUTSU_YOTEI_TODOKEDE_BI,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_TODOKEDE_KBN    := NVL(o_GABTJUKIIDO.TENSHUTSU_YOTEI_TODOKEDE_KBN,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_YOTEI_REN             := NVL(o_GABTJUKIIDO.TENSHUTSU_YOTEI_REN,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_BI            := NVL(o_GABTJUKIIDO.TENSHUTSU_KAKUTEI_BI,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_TSUCHI_BI     := NVL(o_GABTJUKIIDO.TENSHUTSU_KAKUTEI_TSUCHI_BI,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN  := NVL(o_GABTJUKIIDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN,0);
  o_EBT_IES_JUKIIDO.TENSHUTSU_KAKUTEI_REN           := NVL(o_GABTJUKIIDO.TENSHUTSU_KAKUTEI_REN,0);
  o_EBT_IES_JUKIIDO.JUMIN_NARU                      := NVL(o_GABTJUKIIDO.JUMIN_NARU,0);
  o_EBT_IES_JUKIIDO.JUMIN_NARU_JIYU                 := NVL(o_GABTJUKIIDO.JUMIN_NARU_JIYU,0);
  o_EBT_IES_JUKIIDO.JUMIN_NARU_TODOKEDE_BI          := NVL(o_GABTJUKIIDO.JUMIN_NARU_TODOKEDE_BI,0);
  o_EBT_IES_JUKIIDO.JUMIN_NARU_TODOKEDE_KBN         := NVL(o_GABTJUKIIDO.JUMIN_NARU_TODOKEDE_KBN,0);
  o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU                  := NVL(o_GABTJUKIIDO.JUMIN_NAKUNARU,0);
  o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_JIYU             := NVL(o_GABTJUKIIDO.JUMIN_NAKUNARU_JIYU,0);
  o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_TODOKEDE_BI      := NVL(o_GABTJUKIIDO.JUMIN_NAKUNARU_TODOKEDE_BI,0);
  o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_TODOKEDE_KBN     := NVL(o_GABTJUKIIDO.JUMIN_NAKUNARU_TODOKEDE_KBN,0);
  o_EBT_IES_JUKIIDO.SHIBOBI_FUSHO_KBN               := NVL(o_GABTJUKIIDO.SHIBOBI_FUSHO_KBN,0);
  o_EBT_IES_JUKIIDO.SHIMEI_KANA                     := o_GABTJUKIIDO.SHIMEI_KANA;
  o_EBT_IES_JUKIIDO.SHIMEI_KANJI                    := o_GABTJUKIIDO.SHIMEI_KANJI;
  o_EBT_IES_JUKIIDO.HONMYO_KANA                     := o_GABTJUKIIDO.HONMYO_KANA;
  o_EBT_IES_JUKIIDO.HONMYO_KANJI                    := o_GABTJUKIIDO.HONMYO_KANJI;
  o_EBT_IES_JUKIIDO.NUSHI_SHIMEI_KANA               := o_GABTJUKIIDO.NUSHI_SHIMEI_KANA;
  o_EBT_IES_JUKIIDO.NUSHI_SHIMEI_KANJI              := o_GABTJUKIIDO.NUSHI_SHIMEI_KANJI;
  o_EBT_IES_JUKIIDO.KAISEI_REN                      := NVL(o_GABTJUKIIDO.KAISEI_REN,0);
  o_EBT_IES_JUKIIDO.KAISEI_BI                       := NVL(o_GABTJUKIIDO.KAISEI_BI,0);
  o_EBT_IES_JUKIIDO.KYU_SHIMEI_KANA                 := o_GABTJUKIIDO.KYU_SHIMEI_KANA;
  o_EBT_IES_JUKIIDO.KYU_SHIMEI_KANJI                := o_GABTJUKIIDO.KYU_SHIMEI_KANJI;
  o_EBT_IES_JUKIIDO.KOIKI_KOJIN_NO                  := NVL(o_GABTJUKIIDO.KOIKI_KOJIN_NO,0);
  o_EBT_IES_JUKIIDO.SHORIBI_KEY                     := TO_NUMBER(W_SYSDATE);     --システム日付
  o_EBT_IES_JUKIIDO.SHORI_JIKAN_KEY                 := TO_NUMBER(W_SYSTIME);
  o_EBT_IES_JUKIIDO.SHORI_KBN_KEY                   := NVL(W_JIYU,0);            --事由
  o_EBT_IES_JUKIIDO.SHOKUINKOJIN_NO_KEY             := NVL(i_NSHOKUIN_NO,0);     --引数.職員個人番号
  o_EBT_IES_JUKIIDO.SYS_SAKUSEIBI                   := TO_NUMBER(W_SYSDATE);     --システム日付
  o_EBT_IES_JUKIIDO.SYS_KOSHINBI                    := 0;                        --【固定値】０
  o_EBT_IES_JUKIIDO.SYS_JIKAN                       := TO_NUMBER(W_SYSTIME);
  o_EBT_IES_JUKIIDO.SYS_SHOKUINKOJIN_NO             := NVL(i_NSHOKUIN_NO,0);     --引数.職員個人番号
  o_EBT_IES_JUKIIDO.SYS_TANMATSU_NO                 := i_VTANMATSU_NO;           --引数.端末番号
  o_EBT_IES_JUKIIDO.KOIKIKOFU_STOP_CD               := NVL(o_GABTJUKIIDO.KOIKIKOFU_STOP_CD,0);
  o_EBT_IES_JUKIIDO.GAIJI_FLG                       := NVL(o_GABTJUKIIDO.GAIJI_FLG,0);
  o_EBT_IES_JUKIIDO.YOBI1_CD                        := NVL(o_GABTJUKIIDO.YOBI1_CD,0);
  o_EBT_IES_JUKIIDO.YOBI2_CD                        := NVL(o_GABTJUKIIDO.YOBI2_CD,0);
  o_EBT_IES_JUKIIDO.YOBI3_CD                        := NVL(o_GABTJUKIIDO.YOBI3_CD,0);
  o_EBT_IES_JUKIIDO.YOBI4_CD                        := NVL(o_GABTJUKIIDO.YOBI4_CD,0);
  o_EBT_IES_JUKIIDO.YOBI5_CD                        := NVL(o_GABTJUKIIDO.YOBI5_CD,0);
  o_EBT_IES_JUKIIDO.YOBI1_CH                        := o_GABTJUKIIDO.YOBI1_CH;
  o_EBT_IES_JUKIIDO.YOBI2_CH                        := o_GABTJUKIIDO.YOBI2_CH;
  o_EBT_IES_JUKIIDO.YOBI3_CH                        := o_GABTJUKIIDO.YOBI3_CH;
  o_EBT_IES_JUKIIDO.YOBI4_CH                        := o_GABTJUKIIDO.YOBI4_CH;
  o_EBT_IES_JUKIIDO.YOBI5_CH                        := o_GABTJUKIIDO.YOBI5_CH;
  o_EBT_IES_JUKIIDO.ALP_SHIMEI_KANA                 := o_GABTJUKIIDO.ALP_SHIMEI_KANA;
  o_EBT_IES_JUKIIDO.ALP_SHIMEI_KANJI                := o_GABTJUKIIDO.ALP_SHIMEI_KANJI;
  o_EBT_IES_JUKIIDO.GAI_SHIMEI_KANA                 := o_GABTJUKIIDO.GAI_SHIMEI_KANA;
  o_EBT_IES_JUKIIDO.GAI_SHIMEI_KANJI                := o_GABTJUKIIDO.GAI_SHIMEI_KANJI;
  o_EBT_IES_JUKIIDO.TSUSHOMEI_KANA                  := o_GABTJUKIIDO.TSUSHOMEI_KANA;
  o_EBT_IES_JUKIIDO.TSUSHOMEI_KANJI                 := o_GABTJUKIIDO.TSUSHOMEI_KANJI;
  o_EBT_IES_JUKIIDO.HEIKIMEI_KANA                   := o_GABTJUKIIDO.HEIKIMEI_KANA;
  o_EBT_IES_JUKIIDO.HEIKIMEI_KANJI                  := o_GABTJUKIIDO.HEIKIMEI_KANJI;
  o_EBT_IES_JUKIIDO.GAIKOKU_JUMIN_NARU              := o_GABTJUKIIDO.GAIKOKU_JUMIN_NARU;
  o_EBT_IES_JUKIIDO.ZAIRYU_NO_SHUBETSU              := o_GABTJUKIIDO.ZAIRYU_NO_SHUBETSU;
  o_EBT_IES_JUKIIDO.ZAIRYU_CARD_NO                  := o_GABTJUKIIDO.ZAIRYU_CARD_NO;
  o_EBT_IES_JUKIIDO.ZAIRYU_SHIKAKU_CD               := o_GABTJUKIIDO.ZAIRYU_SHIKAKU_CD;
  o_EBT_IES_JUKIIDO.ZAIRYU_SHURYO_BI                := o_GABTJUKIIDO.ZAIRYU_SHURYO_BI;
  o_EBT_IES_JUKIIDO.ZAIRYU_KIKAN_NEN                := o_GABTJUKIIDO.ZAIRYU_KIKAN_NEN;
  o_EBT_IES_JUKIIDO.ZAIRYU_KIKAN_TSUKI              := o_GABTJUKIIDO.ZAIRYU_KIKAN_TSUKI;
  o_EBT_IES_JUKIIDO.ZAIRYU_KIKAN_HI                 := o_GABTJUKIIDO.ZAIRYU_KIKAN_HI;
  o_EBT_IES_JUKIIDO.KOKUSEKI_CD                     := o_GABTJUKIIDO.KOKUSEKI_CD;
  o_EBT_IES_JUKIIDO.CARD_MANRYO_BI                  := o_GABTJUKIIDO.CARD_MANRYO_BI;
  o_EBT_IES_JUKIIDO.KBN_30_45                       := o_GABTJUKIIDO.KBN_30_45;
  o_EBT_IES_JUKIIDO.KYOJYUCHI_UMU                   := 0;
  o_EBT_IES_JUKIIDO.SEINENGAPI_FUSHO_KBN            := o_GABTJUKIIDO.SEINENGAPI_FUSHO_KBN;
  o_EBT_IES_JUKIIDO.RYOKEN_BANGO                    := o_GABTJUKIIDO.RYOKEN_BANGO;
  o_EBT_IES_JUKIIDO.RYOKEN_HAKKO_BI                 := o_GABTJUKIIDO.RYOKEN_HAKKO_BI;
  o_EBT_IES_JUKIIDO.JORIKU_KYOKA_BI                 := o_GABTJUKIIDO.JORIKU_KYOKA_BI;
  o_EBT_IES_JUKIIDO.JUMIN_NUSHI_SHIMEI              := o_GABTJUKIIDO.JUMIN_NUSHI_SHIMEI;
  o_EBT_IES_JUKIIDO.SEIDO_KOJIN_NO                  := o_GABTJUKIIDO.SEIDO_KOJIN_NO;
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
  o_EBT_IES_JUKIIDO.NYURYOKUBASHO                   := o_GABTJUKIIDO.NYURYOKUBASHO;
  o_EBT_IES_JUKIIDO.SHIMEI_KANA_FLG                 := NVL(o_GABTJUKIIDO.SHIMEI_KANA_FLG,0);
  o_EBT_IES_JUKIIDO.TSUSHO_KANA_FLG                 := NVL(o_GABTJUKIIDO.TSUSHO_KANA_FLG,0);
  o_EBT_IES_JUKIIDO.JIJITSUJONOSETAINUSHI_KANA      := o_GABTJUKIIDO.JIJITSUJONOSETAINUSHI_KANA;
  o_EBT_IES_JUKIIDO.JIJITSUJONOSETAINUSHI_KANJI     := o_GABTJUKIIDO.JIJITSUJONOSETAINUSHI_KANJI;
  o_EBT_IES_JUKIIDO.SAISYUTOROKUJUSHO_REN           := NVL(o_GABTJUKIIDO.SAISYUTOROKUJUSHO_REN,0);
  o_EBT_IES_JUKIIDO.SAISEIKISAI_DATE                := NVL(o_GABTJUKIIDO.SAISEIKISAI_DATE,0);
  o_EBT_IES_JUKIIDO.SAISEIKISAIDATE_FUSHO_FLG       := NVL(o_GABTJUKIIDO.SAISEIKISAIDATE_FUSHO_FLG,0);
  o_EBT_IES_JUKIIDO.SAISEIKISAIDATE_FUSHO_HYOKI     := o_GABTJUKIIDO.SAISEIKISAIDATE_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.SAISEISHOJODATE                 := NVL(o_GABTJUKIIDO.SAISEISHOJODATE,0);
  o_EBT_IES_JUKIIDO.SAISEISHOJODATE_FUSHO_FLG       := NVL(o_GABTJUKIIDO.SAISEISHOJODATE_FUSHO_FLG,0);
  o_EBT_IES_JUKIIDO.SAISEISHOJODATE_FUSHO_HYOKI     := o_GABTJUKIIDO.SAISEISHOJODATE_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.KBN_30_46_47                    := o_GABTJUKIIDO.KBN_30_46_47;
  o_EBT_IES_JUKIIDO.SEINENGAPI_FUSHO_HYOKI          := o_GABTJUKIIDO.SEINENGAPI_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.IDO_BI_FUSHO_FLG                := 0;
  o_EBT_IES_JUKIIDO.IDO_BI_FUSHO_HYOKI              := NULL;
  o_EBT_IES_JUKIIDO.JUTEI_BI_FUSHO_FLG              := NVL(o_GABTJUKIIDO.JUTEI_BI_FUSHO_FLG,0);
  o_EBT_IES_JUKIIDO.JUTEI_BI_FUSHO_HYOKI            := o_GABTJUKIIDO.JUTEI_BI_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.JUMIN_NARU_FUSHO_FLG            := NVL(o_GABTJUKIIDO.JUMIN_NARU_FUSHO_FLG,0);
  o_EBT_IES_JUKIIDO.JUMIN_NARU_FUSHO_HYOKI          := o_GABTJUKIIDO.JUMIN_NARU_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_FUSHO_FLG        := NVL(o_GABTJUKIIDO.JUMIN_NAKUNARU_FUSHO_FLG,0);
  o_EBT_IES_JUKIIDO.JUMIN_NAKUNARU_FUSHO_HYOKI      := o_GABTJUKIIDO.JUMIN_NAKUNARU_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.KAISEI_BI_FUSHO_FLG             := NVL(o_GABTJUKIIDO.KAISEI_BI_FUSHO_FLG,0);
  o_EBT_IES_JUKIIDO.KAISEI_BI_FUSHO_HYOKI           := o_GABTJUKIIDO.KAISEI_BI_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.GAIKOKU_JUMIN_NARU_FUSHO_FLG    := NVL(o_GABTJUKIIDO.GAIKOKU_JUMIN_NARU_FUSHO_FLG,0);
  o_EBT_IES_JUKIIDO.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI  := o_GABTJUKIIDO.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI;
  o_EBT_IES_JUKIIDO.SEIBETSU_FUSHO_KBN              := NVL(o_GABTJUKIIDO.SEIBETSU_FUSHO_KBN,0);
  o_EBT_IES_JUKIIDO.IDO_JIYU_SHOSAI                 := NVL(o_GABTJUKIIDO.IDO_JIYU_SHOSAI,0);
  o_EBT_IES_JUKIIDO.IDOKOMOKU_1                     := NVL(o_GABTJUKIIDO.IDOKOMOKU_1,0);
  o_EBT_IES_JUKIIDO.RYUIJIKO_1                      := o_GABTJUKIIDO.RYUIJIKO_1;
  o_EBT_IES_JUKIIDO.IDOKOMOKU_2                     := NVL(o_GABTJUKIIDO.IDOKOMOKU_2,0);
  o_EBT_IES_JUKIIDO.RYUIJIKO_2                      := o_GABTJUKIIDO.RYUIJIKO_2;
  o_EBT_IES_JUKIIDO.IDOKOMOKU_3                     := NVL(o_GABTJUKIIDO.IDOKOMOKU_3,0);
  o_EBT_IES_JUKIIDO.RYUIJIKO_3                      := o_GABTJUKIIDO.RYUIJIKO_3;
  o_EBT_IES_JUKIIDO.RIREKI_SENTAKUFUKA_FLG          := 0;
  o_EBT_IES_JUKIIDO.TODOKEDE_NO                     := 0;
  o_EBT_IES_JUKIIDO.TORIKESHI_TODOKEDE_NO           := 0;
--2024/02/05 DIS.Liuyaxin Add end
  --住基異動中間（IES用）へのインサート
  INSERT INTO JIBWIES_JUKIIDO VALUES o_EBT_IES_JUKIIDO;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
  END;
  RETURN RTN_CD;
END FUNC_SET_JUKIIDO;
------------------------------------------------------------------------------
-- 住基住所中間（IES用）のインサート前に初期化
------------------------------------------------------------------------------
PROCEDURE INIT_JIBWIES_JUKIJUSHO IS
BEGIN
    o_EBT_IES_JUKIJUSHO.ENTRY_ID                   := 0;
    o_EBT_IES_JUKIJUSHO.KOJIN_NO                   := 0;
    o_EBT_IES_JUKIJUSHO.JUSHO_REN                  := 0;
    o_EBT_IES_JUKIJUSHO.OAZA_CD                    := 0;
    o_EBT_IES_JUKIJUSHO.HONBAN                     := '';
    o_EBT_IES_JUKIJUSHO.EDABAN1                    := '';
    o_EBT_IES_JUKIJUSHO.EDABAN2                    := '';
    o_EBT_IES_JUKIJUSHO.EDABAN3                    := '';
    o_EBT_IES_JUKIJUSHO.KATAGAKI_CD                := 0;
    o_EBT_IES_JUKIJUSHO.GAIKU                      := '';
    o_EBT_IES_JUKIJUSHO.TOU                        := '';
    o_EBT_IES_JUKIJUSHO.GOU                        := '';
    o_EBT_IES_JUKIJUSHO.USER_CD                    := 0;
    o_EBT_IES_JUKIJUSHO.JICHI_CD                   := 0;
    o_EBT_IES_JUKIJUSHO.YUBIN_NO                   := '';
    o_EBT_IES_JUKIJUSHO.YUBIN_NOBC                 := '';
    o_EBT_IES_JUKIJUSHO.CHOMEI                     := '';
    o_EBT_IES_JUKIJUSHO.BANCHI                     := '';
    o_EBT_IES_JUKIJUSHO.KATAGAKI                   := '';
    o_EBT_IES_JUKIJUSHO.NUSHI_HITTOSYA             := '';
    o_EBT_IES_JUKIJUSHO.SYS_SAKUSEIBI              := 0;
    o_EBT_IES_JUKIJUSHO.SYS_KOSHINBI               := 0;
    o_EBT_IES_JUKIJUSHO.SYS_JIKAN                  := 0;
    o_EBT_IES_JUKIJUSHO.SYS_SHOKUINKOJIN_NO        := 0;
    o_EBT_IES_JUKIJUSHO.SYS_TANMATSU_NO            := '';
    o_EBT_IES_JUKIJUSHO.CHOMEI_KANA                := '';
    o_EBT_IES_JUKIJUSHO.BANCHI_KANA                := '';
    o_EBT_IES_JUKIJUSHO.KATAGAKI_KANA              := '';
    o_EBT_IES_JUKIJUSHO.KATAGAKI_HIDE_FLG          := 0;
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
    o_EBT_IES_JUKIJUSHO.KETAPRM                    := '';
    o_EBT_IES_JUKIJUSHO.KOKUMEI_CD                 := 0;
--2024/02/05 DIS.Liuyaxin Add end
END INIT_JIBWIES_JUKIJUSHO;
------------------------------------------------------------------------------
-- 住基住所中間（IES用）のインサート
------------------------------------------------------------------------------
FUNCTION FUNC_SET_JUKIJUSHO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE)  RETURN PLS_INTEGER IS
BEGIN
   RTN_CD := C_ISUCCESS;
   -- 住基住所中間（IES用）のインサート前に初期化
   INIT_JIBWIES_JUKIJUSHO;
   o_EBT_IES_JUKIJUSHO.ENTRY_ID        := NVL(W_ENTORYID,0);
   o_EBT_IES_JUKIJUSHO.KOJIN_NO        := NVL(R_TAISHO.KOJIN_NO,0);
  --事由＝４１(本籍変更)の場合
  IF W_UPDKUBUN = 2 THEN
    o_EBT_IES_JUKIJUSHO.JUSHO_REN              := C_HONJUSHORENBAN;
    o_EBT_IES_JUKIJUSHO.OAZA_CD                := NVL(R_TAISHO.AF_HON_OAZA_CD,0);
    o_EBT_IES_JUKIJUSHO.HONBAN                 := R_TAISHO.AF_HON_HONBAN;
    o_EBT_IES_JUKIJUSHO.EDABAN1                := R_TAISHO.AF_HON_EDABAN1;
    o_EBT_IES_JUKIJUSHO.EDABAN2                := R_TAISHO.AF_HON_EDABAN2;
    o_EBT_IES_JUKIJUSHO.EDABAN3                := R_TAISHO.AF_HON_EDABAN3;
    o_EBT_IES_JUKIJUSHO.KATAGAKI_CD            := NVL(R_TAISHO.AF_HON_KATAGAKI_CD,0);
    o_EBT_IES_JUKIJUSHO.GAIKU                  := R_TAISHO.AF_HON_GAIKU;
    o_EBT_IES_JUKIJUSHO.TOU                    := R_TAISHO.AF_HON_TOU;
    o_EBT_IES_JUKIJUSHO.GOU                    := R_TAISHO.AF_HON_GOU;
    o_EBT_IES_JUKIJUSHO.USER_CD                := NVL(R_TAISHO.AF_HON_CITY_CD,0);
    o_EBT_IES_JUKIJUSHO.JICHI_CD               := NVL(R_TAISHO.AF_HON_JICHI_CD,0);
    o_EBT_IES_JUKIJUSHO.YUBIN_NO               := R_TAISHO.AF_HON_YUBIN_NO;
    o_EBT_IES_JUKIJUSHO.YUBIN_NOBC             := R_TAISHO.AF_HON_YUBIN_NOBC;
--2024/02/05 DIS.Liuyaxin Update start 0.3.000.000:新WizLIFE２次開発
--    o_EBT_IES_JUKIJUSHO.CHOMEI                 := R_TAISHO.AF_HON_CHOMEI;
--    o_EBT_IES_JUKIJUSHO.BANCHI                 := R_TAISHO.AF_HON_BANCHI;
--    o_EBT_IES_JUKIJUSHO.KATAGAKI               := R_TAISHO.AF_HON_KATAGAKI;
    o_EBT_IES_JUKIJUSHO.CHOMEI                 := o_HON_GABTJUKIJUSHO.CHOMEI;
    o_EBT_IES_JUKIJUSHO.BANCHI                 := o_HON_GABTJUKIJUSHO.BANCHI;
    o_EBT_IES_JUKIJUSHO.KATAGAKI               := o_HON_GABTJUKIJUSHO.KATAGAKI;
--2024/02/05 DIS.Liuyaxin Update end
    o_EBT_IES_JUKIJUSHO.NUSHI_HITTOSYA         := o_HON_GABTJUKIJUSHO.NUSHI_HITTOSYA;
    o_EBT_IES_JUKIJUSHO.CHOMEI_KANA            := R_TAISHO.AF_HON_CHOMEI_KANA;
    o_EBT_IES_JUKIJUSHO.BANCHI_KANA            := R_TAISHO.AF_HON_BANCHI_KANA;
    o_EBT_IES_JUKIJUSHO.KATAGAKI_KANA          := R_TAISHO.AF_HON_KATAGAKI_KANA;
    o_EBT_IES_JUKIJUSHO.KATAGAKI_HIDE_FLG      := NVL(R_TAISHO.AF_HON_KATAGAKI_HIDE_FLG,0);
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
    o_EBT_IES_JUKIJUSHO.KETAPRM                := o_HON_GABTJUKIJUSHO.KETAPRM;
    o_EBT_IES_JUKIJUSHO.KOKUMEI_CD             := o_HON_GABTJUKIJUSHO.KOKUMEI_CD;
--2024/02/05 DIS.Liuyaxin Add end
  --事由＝４２(現住所変更)の場合
  ELSIF W_UPDKUBUN = 1 THEN
    o_EBT_IES_JUKIJUSHO.JUSHO_REN              := C_GENJUSHORENBAN;
    o_EBT_IES_JUKIJUSHO.OAZA_CD                := NVL(R_TAISHO.AF_GEN_OAZA_CD,0);
    o_EBT_IES_JUKIJUSHO.HONBAN                 := R_TAISHO.AF_GEN_HONBAN;
    o_EBT_IES_JUKIJUSHO.EDABAN1                := R_TAISHO.AF_GEN_EDABAN1;
    o_EBT_IES_JUKIJUSHO.EDABAN2                := R_TAISHO.AF_GEN_EDABAN2;
    o_EBT_IES_JUKIJUSHO.EDABAN3                := R_TAISHO.AF_GEN_EDABAN3;
    o_EBT_IES_JUKIJUSHO.KATAGAKI_CD            := NVL(R_TAISHO.AF_GEN_KATAGAKI_CD,0);
    o_EBT_IES_JUKIJUSHO.GAIKU                  := R_TAISHO.AF_GEN_GAIKU;
    o_EBT_IES_JUKIJUSHO.TOU                    := R_TAISHO.AF_GEN_TOU;
    o_EBT_IES_JUKIJUSHO.GOU                    := R_TAISHO.AF_GEN_GOU;
    o_EBT_IES_JUKIJUSHO.USER_CD                := NVL(R_TAISHO.AF_GEN_CITY_CD,0);
    o_EBT_IES_JUKIJUSHO.JICHI_CD               := NVL(R_TAISHO.AF_GEN_JICHI_CD,0);
    o_EBT_IES_JUKIJUSHO.YUBIN_NO               := R_TAISHO.AF_GEN_YUBIN_NO;
    o_EBT_IES_JUKIJUSHO.YUBIN_NOBC             := R_TAISHO.AF_GEN_YUBIN_NOBC;
--2024/02/05 DIS.Liuyaxin Update start 0.3.000.000:新WizLIFE２次開発
--    o_EBT_IES_JUKIJUSHO.CHOMEI                 := R_TAISHO.AF_GEN_CHOMEI;
--    o_EBT_IES_JUKIJUSHO.BANCHI                 := R_TAISHO.AF_GEN_BANCHI;
--    o_EBT_IES_JUKIJUSHO.KATAGAKI               := R_TAISHO.AF_GEN_KATAGAKI;
    o_EBT_IES_JUKIJUSHO.CHOMEI                 := o_GEN_GABTJUKIJUSHO.CHOMEI;
    o_EBT_IES_JUKIJUSHO.BANCHI                 := o_GEN_GABTJUKIJUSHO.BANCHI;
    o_EBT_IES_JUKIJUSHO.KATAGAKI               := o_GEN_GABTJUKIJUSHO.KATAGAKI;
--2024/02/05 DIS.Liuyaxin Update end
    o_EBT_IES_JUKIJUSHO.NUSHI_HITTOSYA         := o_GEN_GABTJUKIJUSHO.NUSHI_HITTOSYA;
    o_EBT_IES_JUKIJUSHO.CHOMEI_KANA            := R_TAISHO.AF_GEN_CHOMEI_KANA;
    o_EBT_IES_JUKIJUSHO.BANCHI_KANA            := R_TAISHO.AF_GEN_BANCHI_KANA;
    o_EBT_IES_JUKIJUSHO.KATAGAKI_KANA          := R_TAISHO.AF_GEN_KATAGAKI_KANA;
    o_EBT_IES_JUKIJUSHO.KATAGAKI_HIDE_FLG      := NVL(R_TAISHO.AF_GEN_KATAGAKI_HIDE_FLG,0);
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発
    o_EBT_IES_JUKIJUSHO.KETAPRM                := o_GEN_GABTJUKIJUSHO.KETAPRM;
    o_EBT_IES_JUKIJUSHO.KOKUMEI_CD             := o_GEN_GABTJUKIJUSHO.KOKUMEI_CD;
--2024/02/05 DIS.Liuyaxin Add end
  END IF;
    o_EBT_IES_JUKIJUSHO.SYS_SAKUSEIBI          := TO_NUMBER(W_SYSDATE);
    o_EBT_IES_JUKIJUSHO.SYS_KOSHINBI           := 0;
    o_EBT_IES_JUKIJUSHO.SYS_JIKAN              := TO_NUMBER(W_SYSTIME);
    o_EBT_IES_JUKIJUSHO.SYS_SHOKUINKOJIN_NO    := NVL(i_NSHOKUIN_NO,0);
    o_EBT_IES_JUKIJUSHO.SYS_TANMATSU_NO        := i_VTANMATSU_NO;
  BEGIN
      INSERT INTO JIBWIES_JUKIJUSHO VALUES o_EBT_IES_JUKIJUSHO;
    EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
  END;
  RETURN RTN_CD;
END FUNC_SET_JUKIJUSHO;
------------------------------------------------------------------------------
-- 住基情報中間（IES用）へデータを追加
------------------------------------------------------------------------------
FUNCTION FUNC_SET_IES_JUKIJOHO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE)
  RETURN PLS_INTEGER
IS
  NRIREKI_RENBAN    NUMBER;
  VKYUUJI_KANA      NVARCHAR2(20);
  VKYUUJI_KANJI     NVARCHAR2(20);
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発        
  NRIREKI_EDABAN    NUMBER;
  NSAISHIN_FLG      NUMBER;
  NKYUUJI_KANA_FLG  NUMBER;
--2024/02/05 DIS.Liuyaxin Add end
BEGIN
  --住基情報を取得する。
  SELECT AK.RIREKI_RENBAN
        ,JKJ.KYUUJI_KANA
        ,JKJ.KYUUJI_KANJI
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発        
        ,JKJ.RIREKI_EDABAN
        ,JKJ.SAISHIN_FLG
        ,JKJ.KYUUJI_KANA_FLG
--2024/02/05 DIS.Liuyaxin Add end
    INTO NRIREKI_RENBAN
        ,VKYUUJI_KANA
        ,VKYUUJI_KANJI
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発        
        ,NRIREKI_EDABAN
        ,NSAISHIN_FLG
        ,NKYUUJI_KANA_FLG
--2024/02/05 DIS.Liuyaxin Add end
    FROM JIBTJUKIKIHON AK
        ,JIBTJUKIJOHO   JKJ
   WHERE AK.KOJIN_NO = R_TAISHO.KOJIN_NO
     AND AK.KOJIN_NO = JKJ.KOJIN_NO(+)
--2024/02/22 DIS.Qianyinhua Add 0.3.000.000:新WizLIFE２次開発（最新フラグ＝１追加確認）
     AND JKJ.SAISHIN_FLG(+) = 1
     AND AK.RIREKI_RENBAN = JKJ.RIREKI_RENBAN(+);
   --住基情報(IES用)を作成する。
   o_EBT_IES_JUKIJOHO.ENTRY_ID            := NVL(W_ENTORYID, 0);
   o_EBT_IES_JUKIJOHO.KOJIN_NO            := NVL(R_TAISHO.KOJIN_NO, 0);
   o_EBT_IES_JUKIJOHO.RIREKI_RENBAN       := NRIREKI_RENBAN + 10;
--2024/02/05 DIS.Liuyaxin Add start 0.3.000.000:新WizLIFE２次開発  
   o_EBT_IES_JUKIJOHO.RIREKI_EDABAN       := NRIREKI_EDABAN;
   o_EBT_IES_JUKIJOHO.SAISHIN_FLG         := NSAISHIN_FLG;
--2024/02/05 DIS.Liuyaxin Add end
   o_EBT_IES_JUKIJOHO.KYUUJI_KANA         := VKYUUJI_KANA;
   o_EBT_IES_JUKIJOHO.KYUUJI_KANJI        := VKYUUJI_KANJI;
   o_EBT_IES_JUKIJOHO.SYS_SAKUSEIBI       := TO_NUMBER(W_SYSDATE);
   o_EBT_IES_JUKIJOHO.SYS_KOSHINBI        := 0;
   o_EBT_IES_JUKIJOHO.SYS_JIKAN           := TO_NUMBER(W_SYSTIME);
   o_EBT_IES_JUKIJOHO.SYS_SHOKUINKOJIN_NO := NVL(i_NSHOKUIN_NO, 0);
   o_EBT_IES_JUKIJOHO.SYS_TANMATSU_NO     := i_VTANMATSU_NO;
--2024/02/05 DIS.Liuyaxin Add 0.3.000.000:新WizLIFE２次開発 
   o_EBT_IES_JUKIJOHO.KYUUJI_KANA_FLG     := NKYUUJI_KANA_FLG;
   INSERT INTO JIBWIES_JUKIJOHO VALUES o_EBT_IES_JUKIJOHO;
   RETURN C_ISUCCESS;
EXCEPTION
  WHEN OTHERS THEN
    o_NSQL_CODE  := SQLCODE;
    o_VSQL_MSG   := SUBSTR(TO_CHAR(SQLERRM), 1, 255);
    RETURN C_INOT_SUCCESS;
END FUNC_SET_IES_JUKIJOHO;
------------------------------------------------------------------------------
-- 住所変更証明書管理のインサート前に初期化
------------------------------------------------------------------------------
PROCEDURE INIT_EBT_JUSHOHENKO
IS
BEGIN
    o_EBT_JUSHOHENKO.SANTEIDANTAI_CD            := 0;
    o_EBT_JUSHOHENKO.KOJIN_NO                   := 0;
    o_EBT_JUSHOHENKO.RENBAN                     := 0;
    o_EBT_JUSHOHENKO.SHIMEI                     := '';
    o_EBT_JUSHOHENKO.CHOMEI_BF                  := '';
    o_EBT_JUSHOHENKO.BANCHI_BF                  := '';
    o_EBT_JUSHOHENKO.KATAGAKI_BF                := '';
    o_EBT_JUSHOHENKO.CHOMEI_AF                  := '';
    o_EBT_JUSHOHENKO.BANCHI_AF                  := '';
    o_EBT_JUSHOHENKO.KATAGAKI_AF                := '';
    o_EBT_JUSHOHENKO.BIKO                       := '';
    o_EBT_JUSHOHENKO.IDO_BI                     := 0;
    o_EBT_JUSHOHENKO.SYS_SAKUSEIBI              := 0;
    o_EBT_JUSHOHENKO.SYS_KOSHINBI               := 0;
    o_EBT_JUSHOHENKO.SYS_JIKAN                  := 0;
    o_EBT_JUSHOHENKO.SYS_SHOKUINKOJIN_NO        := 0;
    o_EBT_JUSHOHENKO.SYS_TANMATSU_NO            := '';
    --2024/12/27 CTC Update start 0.3.000.000:IT_JIB_00847対応
    o_EBT_JUSHOHENKO.KUBUN                      := 0;
END INIT_EBT_JUSHOHENKO;
------------------------------------------------------------------------------
-- 住所変更証明書管理のインサート
------------------------------------------------------------------------------
FUNCTION FUNC_SET_JUSHOHENKO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE) RETURN PLS_INTEGER IS
  RENBAN     NUMBER(3,0);
  OAZA_KANJI VARCHAR2(30);
  o_SEARCH1  NUMBER(6,0);
BEGIN
    RTN_CD := C_ISUCCESS;
    --住所変更証明書管理のインサート前に初期化
    INIT_EBT_JUSHOHENKO;
    o_EBT_JUSHOHENKO.SANTEIDANTAI_CD   := 1;
    o_EBT_JUSHOHENKO.KOJIN_NO   := NVL(R_TAISHO.KOJIN_NO,0);
    --R_TAISHO.個人番号のMAX(RENBAN)+1
    BEGIN
        SELECT MAX(RENBAN) + 1 INTO RENBAN
        FROM JIBTJUSHOHENKO
        WHERE  KOJIN_NO = R_TAISHO.KOJIN_NO;
      EXCEPTION
        WHEN OTHERS THEN
        RENBAN := 1;
    END;
    o_EBT_JUSHOHENKO.RENBAN   := NVL(RENBAN,1);
    o_EBT_JUSHOHENKO.SHIMEI   := R_TAISHO.SHIMEI;
    IF W_UPDKUBUN = 2 THEN
        o_SEARCH1 := NVL(R_TAISHO.BF_HON_OAZA_CD,0);
    END IF;
    IF W_UPDKUBUN = 1 THEN
        o_SEARCH1 := NVL(R_TAISHO.BF_GEN_OAZA_CD,0);
    END IF;
    BEGIN
        SELECT OAZA_KANJI INTO OAZA_KANJI
          FROM GABTOAZA
         WHERE KYU_JICHITAI_KBN = 1
           AND OAZA_CD = o_SEARCH1;
      EXCEPTION
      WHEN OTHERS THEN
          OAZA_KANJI := '';
    END;
    o_EBT_JUSHOHENKO.CHOMEI_BF := OAZA_KANJI;
    IF W_UPDKUBUN = 2 THEN
        o_EBT_JUSHOHENKO.BANCHI_BF            := R_TAISHO.BF_HON_BANCHI;
        o_EBT_JUSHOHENKO.KATAGAKI_BF          := R_TAISHO.BF_HON_KATAGAKI;
        o_EBT_JUSHOHENKO.BANCHI_AF            := R_TAISHO.AF_HON_BANCHI;
        o_EBT_JUSHOHENKO.KATAGAKI_AF          := R_TAISHO.AF_HON_KATAGAKI;
        o_EBT_JUSHOHENKO.BIKO                 := i_VHON_BIKO;
        --2024/12/27 CTC Update start 0.3.000.000:IT_JIB_00847対応
        o_EBT_JUSHOHENKO.KUBUN                := W_UPDKUBUN;

--事由＝４２(現住所変更)の場合
    ELSIF W_UPDKUBUN = 1 THEN
        o_EBT_JUSHOHENKO.BANCHI_BF            := R_TAISHO.BF_GEN_BANCHI;
        o_EBT_JUSHOHENKO.KATAGAKI_BF          := R_TAISHO.BF_GEN_KATAGAKI;
        o_EBT_JUSHOHENKO.BANCHI_AF            := R_TAISHO.AF_GEN_BANCHI;
        o_EBT_JUSHOHENKO.KATAGAKI_AF          := R_TAISHO.AF_GEN_KATAGAKI;
        o_EBT_JUSHOHENKO.BIKO                 := i_VGEN_BIKO;
        --2024/12/27 CTC Update start 0.3.000.000:IT_JIB_00847対応
        o_EBT_JUSHOHENKO.KUBUN                := W_UPDKUBUN;
    END IF;
--GABTOAZAよりOAZA_KANJIを取得して設定
    IF W_UPDKUBUN = 2 THEN  
        o_SEARCH1 := NVL(R_TAISHO.AF_HON_OAZA_CD,0);
    END IF;
    IF W_UPDKUBUN = 1 THEN
        o_SEARCH1 := NVL(R_TAISHO.AF_GEN_OAZA_CD,0);
    END IF;
    BEGIN
        SELECT OAZA_KANJI INTO OAZA_KANJI
          FROM GABTOAZA
         WHERE KYU_JICHITAI_KBN = 1
           AND OAZA_CD = o_SEARCH1;
    EXCEPTION
        WHEN OTHERS THEN
        OAZA_KANJI := '';
    END;
    o_EBT_JUSHOHENKO.CHOMEI_AF            := OAZA_KANJI;
    o_EBT_JUSHOHENKO.IDO_BI               := NVL(W_NIDOBI,0);
    o_EBT_JUSHOHENKO.SYS_SAKUSEIBI        := TO_NUMBER(W_SYSDATE);
    o_EBT_JUSHOHENKO.SYS_KOSHINBI         := 0;
    o_EBT_JUSHOHENKO.SYS_JIKAN            := TO_NUMBER(W_SYSTIME);
    o_EBT_JUSHOHENKO.SYS_SHOKUINKOJIN_NO  := NVL(i_NSHOKUIN_NO,0);
    o_EBT_JUSHOHENKO.SYS_TANMATSU_NO      := i_VTANMATSU_NO;
    BEGIN
      INSERT INTO JIBTJUSHOHENKO VALUES o_EBT_JUSHOHENKO;
    EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
    END;
    RETURN RTN_CD;
END FUNC_SET_JUSHOHENKO;
------------------------------------------------------------------------------
-- 現住所対象者チェック
------------------------------------------------------------------------------
FUNCTION FUNC_CHECK_GENJYUSHO_TAISHO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE)  RETURN PLS_INTEGER IS

BEGIN
    RTN_CD := C_ISUCCESS;
    FLAG   := FALSE;
  BEGIN
     --現住所情報を取得
    BEGIN
        SELECT A.*
          INTO o_GEN_GABTJUKIJUSHO
        FROM JIBTJUKIJUSHO A, JIBTJUKIIDO B
        WHERE A.KOJIN_NO  =  B.KOJIN_NO
          AND A.KOJIN_NO  =  R_TAISHO.KOJIN_NO
          AND A.JUSHO_REN =  B.GENJUSHO_REN;  ----現住所連番
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
          FLAG := TRUE;
    END;
    --a)非現存チェックを行う
    IF o_GABTJUKIIDO.GENZON_KBN > 0 THEN
        --引数.テストフラグ＝1の場合
        IF i_TEST_FLG = C_TEST THEN
            --住居表示変更対象者TBL.現住所テストフラグ＝11(住基未更新(非現存))
            UPDATE JIBTJUSHOHENKO_TAISHO
        SET GEN_TEST_FLG   = C_HIGENZON
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        ELSE
            --住居表示変更対象者TBL.現住所対象フラグ＝11(住基未更新(非現存))
             UPDATE JIBTJUSHOHENKO_TAISHO
               SET GEN_TAISHO_FLG   = C_HIGENZON
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        END IF;
    ELSIF
        /*--b)項目不一致チェックを行う*/
       /* R_TAISHO.変更前現住所町名≠現住所情報の町名（[別紙④]を参照）
　　　　　若しくは　R_TAISHO.変更前現住所番地≠現住所情報の番地（[別紙④]を参照）
　　　　　若しくは　R_TAISHO.変更前現住所方書≠現住所情報の方書（[別紙④]を参照）
　　　　　若しくは　R_TAISHO.氏名　　≠JIBTJUKIIDO.氏名漢字
　　　　　若しくは　R_TAISHO.続柄名　≠JIBTJUKIIDO.続柄名
　　　　　若しくは  R_TAISHO.世帯番号≠JIBTJUKIIDO.世帯番号
          若しくは　R_TAISHO.世帯主名≠JIBTJUKIIDO.世帯主名
　　　　　若しくは  R_TAISHO.異動日　≠JIBTJUKIIDO.異動日
　　　　　若しくは　R_TAISHO.異動事由≠JIBTJUKIIDO.異動事由
          若しくは　R_TAISHO.現存区分≠JIBTJUKIIDO.現存区分の場合、*/
        FLAG = TRUE
           OR R_TAISHO.BF_GEN_CHOMEI != o_GEN_GABTJUKIJUSHO.CHOMEI
           OR R_TAISHO.BF_GEN_BANCHI != o_GEN_GABTJUKIJUSHO.BANCHI
           OR R_TAISHO.BF_GEN_KATAGAKI != o_GEN_GABTJUKIJUSHO.KATAGAKI
           OR R_TAISHO.SHIMEI != o_GABTJUKIIDO.SHIMEI_KANJI
           OR R_TAISHO.ZOKUGARA_MEI != o_GABTJUKIIDO.ZOKUGARA_MEI
           OR R_TAISHO.SETAI_NO != o_GABTJUKIIDO.SETAI_NO
           OR R_TAISHO.NUSHI_SHIMEI != o_GABTJUKIIDO.NUSHI_SHIMEI_KANJI
           OR R_TAISHO.IDO_BI != o_GABTJUKIIDO.IDO_BI
           OR R_TAISHO.IDO_JIYU != o_GABTJUKIIDO.IDO_JIYU
           OR R_TAISHO.GENZON_KBN != o_GABTJUKIIDO.GENZON_KBN THEN
  --引数.テストフラグ＝1の場合
  IF i_TEST_FLG = C_TEST THEN
      --住居表示変更対象者TBL.現住所テストフラグ＝12(住基未更新(不一致))
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET GEN_TEST_FLG   = C_HUYIKI
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
  ELSE
      --住居表示変更対象者TBL.現住所対象フラグ＝12(住基未更新(不一致))
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET GEN_TAISHO_FLG   = C_HUYIKI
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
  END IF;
    ELSE
      /*　c)a)とb)以外の場合、*/
  --引数.テストフラグ＝1の場合
  IF i_TEST_FLG = C_TEST THEN
      --住居表示変更対象者TBL.現住所テストフラグ＝10(住基更新済)
      UPDATE JIBTJUSHOHENKO_TAISHO
         SET GEN_TEST_FLG   = C_KOSINZUMI
            WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        ELSE
            RTN_CD := C_ISUCCESS_EXEC;
        END IF;
    END IF;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_CHECK_GENJYUSHO_TAISHO;
------------------------------------------------------------------------------
-- 本籍住所対象者チェック
------------------------------------------------------------------------------
FUNCTION FUNC_CHECK_HONJYUSHO_TAISHO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE)  RETURN PLS_INTEGER IS
BEGIN
    RTN_CD := C_ISUCCESS;
    FLAG   := FALSE;
  BEGIN
     --本籍住所情報を取得
    BEGIN
        SELECT A.*
          INTO o_HON_GABTJUKIJUSHO
        FROM JIBTJUKIJUSHO A, JIBTJUKIIDO B
        WHERE A.KOJIN_NO  =  B.KOJIN_NO
          AND A.KOJIN_NO  =  R_TAISHO.KOJIN_NO
          AND A.JUSHO_REN =  B.HONSEKI_REN;  ----本籍連番
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
          FLAG := TRUE;
    END;
    --a)非現存チェックを行う
    IF o_GABTJUKIIDO.GENZON_KBN > 0 THEN
        --引数.テストフラグ＝1の場合
        IF i_TEST_FLG = C_TEST THEN
            --住居表示変更対象者TBL.本籍テストフラグ＝11(住基未更新(非現存))
            UPDATE JIBTJUSHOHENKO_TAISHO
        SET HON_TEST_FLG   = C_HIGENZON
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        ELSE
            --住居表示変更対象者TBL.本籍対象フラグ  ＝11(住基未更新(非現存))
             UPDATE JIBTJUSHOHENKO_TAISHO
               SET HON_TAISHO_FLG   = C_HIGENZON
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        END IF;
    ELSIF
        /*--b)項目不一致チェックを行う*/
       /* R_TAISHO.変更前本籍地町名≠本籍情報の町名（[別紙⑤]を参照）
　　　　　若しくは　R_TAISHO.変更前本籍地番地≠本籍情報の番地（[別紙⑤]を参照）
　　　　　若しくは　R_TAISHO.変更前本籍地方書≠本籍情報の方書（[別紙⑤]を参照）
　　　　　若しくは　R_TAISHO.氏名　　≠JIBTJUKIIDO.氏名漢字
　　　　　若しくは　R_TAISHO.続柄名　≠JIBTJUKIIDO.続柄名
　　　　　若しくは  R_TAISHO.世帯番号≠JIBTJUKIIDO.世帯番号
          若しくは　R_TAISHO.世帯主名≠JIBTJUKIIDO.世帯主名
　　　　　若しくは  R_TAISHO.異動日　≠JIBTJUKIIDO.異動日
　　　　　若しくは　R_TAISHO.異動事由≠JIBTJUKIIDO.異動事由
          若しくは　R_TAISHO.現存区分≠JIBTJUKIIDO.現存区分の場合、*/
        FLAG = TRUE
           OR R_TAISHO.BF_HON_CHOMEI != o_HON_GABTJUKIJUSHO.CHOMEI
           OR R_TAISHO.BF_HON_BANCHI != o_HON_GABTJUKIJUSHO.BANCHI
           OR R_TAISHO.BF_HON_KATAGAKI != o_HON_GABTJUKIJUSHO.KATAGAKI
           OR R_TAISHO.SHIMEI != o_GABTJUKIIDO.SHIMEI_KANJI
           OR R_TAISHO.ZOKUGARA_MEI != o_GABTJUKIIDO.ZOKUGARA_MEI
           OR R_TAISHO.SETAI_NO != o_GABTJUKIIDO.SETAI_NO
           OR R_TAISHO.NUSHI_SHIMEI != o_GABTJUKIIDO.NUSHI_SHIMEI_KANJI
           OR NOT ((R_TAISHO.IDO_BI = o_GABTJUKIIDO.IDO_BI AND R_TAISHO.IDO_JIYU = o_GABTJUKIIDO.IDO_JIYU)
                OR (o_GABTJUKIIDO.IDO_BI = NVL(W_NIDOBI,0) AND o_GABTJUKIIDO.IDO_JIYU = C_GENJUSHO))
           OR R_TAISHO.GENZON_KBN != o_GABTJUKIIDO.GENZON_KBN THEN
  --引数.テストフラグ＝1の場合
  IF i_TEST_FLG = C_TEST THEN
      --住居表示変更対象者TBL.本籍テストフラグ＝12(住基未更新(不一致))
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET HON_TEST_FLG   = C_HUYIKI
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
  ELSE
      --住居表示変更対象者TBL.本籍対象フラグ＝12(住基未更新(不一致))
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET HON_TAISHO_FLG   = C_HUYIKI
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
  END IF;
    ELSE
      /*　c)a)とb)以外の場合、*/
  --引数.テストフラグ＝1の場合
  IF i_TEST_FLG = C_TEST THEN
      --住居表示変更対象者TBL.本籍テストフラグ＝10(住基更新済)
      UPDATE JIBTJUSHOHENKO_TAISHO
         SET HON_TEST_FLG   = C_KOSINZUMI
            WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        ELSE
            RTN_CD := C_ISUCCESS_EXEC;
        END IF;
    END IF;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_CHECK_HONJYUSHO_TAISHO;
------------------------------------------------------------------------------
-- １．宛名基本と住基異動テーブルからデータを取得。([別紙②と③]を参照)
------------------------------------------------------------------------------
FUNCTION FUNC_GET_DATA(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE) RETURN PLS_INTEGER IS
BEGIN
  RTN_CD := C_ISUCCESS;
  BEGIN
    --宛名基本テーブルからデータを取得
    BEGIN
        SELECT *
            INTO o_GABTATENAKIHON
        FROM JIBTJUKIKIHON
        WHERE  KOJIN_NO  = R_TAISHO.KOJIN_NO;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
          o_NSQL_CODE  := SQLCODE;
          o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
          RTN_CD := C_INOT_SUCCESS;
          GOTO SECTION;
    END;
    --住基異動テーブルからデータを取得
    BEGIN
        SELECT *
            INTO o_GABTJUKIIDO
        FROM JIBTJUKIIDO
        WHERE  KOJIN_NO   = R_TAISHO.KOJIN_NO;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
          o_NSQL_CODE  := SQLCODE;
          o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
          RTN_CD := C_INOT_SUCCESS;
          GOTO SECTION;
    END;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;

  <<SECTION>>
  BEGIN
    --入力した住居表示変更対象者TBLの住基更新処理日項目を下記のとおり更新する。
    --引数.テストフラグ＝1の場合
    IF i_TEST_FLG = C_TEST THEN
        --住居表示変更対象者TBL.住基更新テスト日,住基更新テスト時間を更新する
        UPDATE JIBTJUSHOHENKO_TAISHO
          SET TEST_DATE   = W_SYSDATE,
              TEST_TIME   = W_SYSTIME
            WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        IF RTN_CD <> C_ISUCCESS THEN
            IF W_UPDKUBUN = 1 THEN
                --・住居表示変更対象者TBL.現住所更新テストフラグ＝13(住基未更新（その他）)
                UPDATE JIBTJUSHOHENKO_TAISHO
                  SET GEN_TEST_FLG = C_SONOTA
                    WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
            ELSE
                --・住居表示変更対象者TBL.本籍地更新テストフラグ＝13(住基未更新（その他）)
                UPDATE JIBTJUSHOHENKO_TAISHO
                  SET HON_TEST_FLG = C_SONOTA
                    WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
            END IF;
        END IF;
    ELSE
        --住居表示変更対象者TBL.住基更新日,住基更新時間を更新する
        UPDATE JIBTJUSHOHENKO_TAISHO
          SET UPDATE_DATE   = W_SYSDATE,
              UPDATE_TIME   = W_SYSTIME
            WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
        IF RTN_CD <> C_ISUCCESS THEN
--           IF W_JIYU = C_GENJUSHO THEN
            IF W_UPDKUBUN = 1 THEN    
                --・住居表示変更対象者TBL.現住所対象フラグ＝13(住基未更新（その他）)
                UPDATE JIBTJUSHOHENKO_TAISHO
                  SET GEN_TAISHO_FLG = C_SONOTA
                    WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
            ELSE
                --・住居表示変更対象者TBL.本籍地対象フラグ＝13(住基未更新（その他）)
                UPDATE JIBTJUSHOHENKO_TAISHO
                  SET HON_TAISHO_FLG = C_SONOTA
                    WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
            END IF;
        END IF;
    END IF;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_GET_DATA;
------------------------------------------------------------------------------
-- ２．現住所を変更
------------------------------------------------------------------------------
FUNCTION FUNC_UPDATE_GENJYUSHO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE) RETURN PLS_INTEGER IS

BEGIN
  BEGIN
    RTN_CD := C_ISUCCESS;
    --①対象者チェック
    I_RTN := FUNC_CHECK_GENJYUSHO_TAISHO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS_EXEC THEN
        RETURN I_RTN;
    END IF;

     IF w_V_GEN_KOJIN_NO IS NULL THEN
      w_V_GEN_KOJIN_NO := R_TAISHO.KOJIN_NO;
     ELSE
      w_V_GEN_KOJIN_NO := w_V_GEN_KOJIN_NO || ',' || R_TAISHO.KOJIN_NO;
     END IF;
    /*--③IES用中間テーブルにデータを格納*/
    --宛名基本中間（IES用）へデータを追加。([DB更新説明書２]を参照)
    I_RTN := FUNC_SET_ATENAKIHON(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;
    --住基情報中間（IES用）へデータを追加
    I_RTN := FUNC_SET_IES_JUKIJOHO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;
    --住基異動中間（IES用）へデータを追加。([DB更新説明書３]を参照)
    I_RTN := FUNC_SET_JUKIIDO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;
    --住基住所中間（IES用）へデータを追加。([別紙⑤]と[DB更新説明書４]を参照)
    I_RTN := FUNC_SET_JUKIJUSHO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;


    -- 世帯内データ退避
    MRENKEIDATA(I_CNT).NRIREKI_RENBAN  :=  o_EBT_IES_ATENAKIHON.RIREKI_RENBAN;  -- 世帯内連携データ退避レコード.履歴連番
    MRENKEIDATA(I_CNT).NSETAI_NO       :=  o_EBT_IES_ATENAKIHON.SETAI_NO;       -- 世帯内連携データ退避レコード.世帯番号
    MRENKEIDATA(I_CNT).IIDO_JIYU       :=  W_JIYU;                              -- 世帯内連携データ退避レコード.異動事由
                                                                                   
    RETURN RTN_CD;
    --⑧エラー処理（上記③～⑤のいずれか異常の場合実行）
    <<SECTION>>
    --・現住所対象フラグを更新(住居表示変更対象者TBL.現住所対象フラグ＝13(住基未更新（その他）))
    UPDATE JIBTJUSHOHENKO_TAISHO
      SET GEN_TAISHO_FLG = C_SONOTA
        WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
    --・IES用中間テーブルを削除
    --宛名基本中間（IES用）
    DELETE JIBWIES_JUKIKIHON
      WHERE ENTRY_ID = W_ENTORYID;
    --住基異動中間（IES用）
    DELETE JIBWIES_JUKIIDO
      WHERE ENTRY_ID = W_ENTORYID;
    --住基住所中間（IES用
    DELETE JIBWIES_JUKIJUSHO
      WHERE ENTRY_ID = W_ENTORYID;
    RTN_CD := C_INOT_SUCCESS;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_UPDATE_GENJYUSHO;
------------------------------------------------------------------------------
-- ３．本籍住所を変更
------------------------------------------------------------------------------
FUNCTION FUNC_UPDATE_HONJYUSHO(R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE) RETURN PLS_INTEGER IS
BEGIN
  BEGIN
    RTN_CD := C_ISUCCESS;
    --①対象者チェック
    I_RTN := FUNC_CHECK_HONJYUSHO_TAISHO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS_EXEC THEN
        RETURN I_RTN;
    END IF;

      IF w_V_HON_KOJIN_NO IS NULL THEN
      w_V_HON_KOJIN_NO := R_TAISHO.KOJIN_NO;
      ELSE
        w_V_HON_KOJIN_NO := w_V_HON_KOJIN_NO || ',' || R_TAISHO.KOJIN_NO;
      END IF;
    --宛名基本中間（IES用）へデータを追加。([DB更新説明書２]を参照)
    I_RTN := FUNC_SET_ATENAKIHON(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;
    --住基情報中間（IES用）へデータを追加
    I_RTN := FUNC_SET_IES_JUKIJOHO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;
    --住基異動中間（IES用）へデータを追加。([DB更新説明書３]を参照)
    I_RTN := FUNC_SET_JUKIIDO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;
    --住基住所中間（IES用）へデータを追加。([別紙⑤]と[DB更新説明書４]を参照)
    I_RTN := FUNC_SET_JUKIJUSHO(R_TAISHO);
    IF I_RTN <> C_ISUCCESS THEN
      GOTO SECTION;
    END IF;

    -- 世帯内データ退避
    MRENKEIDATA(I_CNT).NRIREKI_RENBAN  :=  o_EBT_IES_ATENAKIHON.RIREKI_RENBAN;  -- 世帯内連携データ退避レコード.履歴連番
    MRENKEIDATA(I_CNT).NSETAI_NO       :=  o_EBT_IES_ATENAKIHON.SETAI_NO;       -- 世帯内連携データ退避レコード.世帯番号
    MRENKEIDATA(I_CNT).IIDO_JIYU       :=  W_JIYU;                              -- 世帯内連携データ退避レコード.異動事由
                                                                                   
    RETURN RTN_CD;
    --⑧エラー処理（上記③～⑤のいずれか異常の場合実行）
    <<SECTION>>
    --・本籍対象フラグを更新(住居表示変更対象者TBL.本籍対象フラグ＝13(住基未更新（その他）))
    UPDATE JIBTJUSHOHENKO_TAISHO
      SET HON_TAISHO_FLG = C_SONOTA
        WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
    --・IES用中間テーブルを削除
    --宛名基本中間（IES用）
    DELETE JIBWIES_JUKIKIHON
      WHERE ENTRY_ID = W_ENTORYID;
    --住基異動中間（IES用）
    DELETE JIBWIES_JUKIIDO
      WHERE ENTRY_ID = W_ENTORYID;
    --住基住所中間（IES用)
    DELETE JIBWIES_JUKIJUSHO
      WHERE ENTRY_ID = W_ENTORYID;
    RTN_CD := C_INOT_SUCCESS;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_UPDATE_HONJYUSHO;
FUNCTION FUNC_GET_W_ENTORYID RETURN PLS_INTEGER IS
BEGIN
  BEGIN
    W_ENTORYID := 0;
    RTN_CD := C_ISUCCESS;
    --②エントリーIDの取得
    BEGIN
      SELECT NEXTID
        INTO W_ENTORYID
      -- 2023/04/06 ZCZL.GUORUIHUA 0.2.000.001 廃棄テーブルの対応 UPDATE START
      --FROM UAT_NEXTIDKANRI
      --WHERE GYOMUCODE='EB'  
      FROM KKFTNEXTIDKANRI
      WHERE GYOMUCODE='JIB'
      -- 2023/04/06 ZCZL.GUORUIHUA 0.2.000.001 廃棄テーブルの対応 UPDATE END
        AND KUBUN=1;
    EXCEPTION
      WHEN OTHERS THEN
        W_ENTORYID := 1;
    END;
    RETURN RTN_CD;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_GET_W_ENTORYID;
------------------------------------------------------------------------------
-- ES用中間テーブルのデータよりマスタを更新_現住所
------------------------------------------------------------------------------
FUNCTION FUNC_JIBSOIEUPD_GEN RETURN PLS_INTEGER IS
BEGIN
  BEGIN
    RTN_CD := C_ISUCCESS;
    --④IES用中間テーブルのデータよりマスタを更新。
    JIBSOIEUPD(TO_NUMBER(W_ENTORYID),
                    i_VTANMATSU_NO,
                    NVL(999 || o_GABTJUKIIDO.SETAI_NO,0),
                    TO_NUMBER(W_SYSDATE),
                    W_JIYU,
                    C_ZENBU,
                    0,
                    1,         
                    o_VKOJIN_NO,
                    o_RIREKI_RENBAN,
                    o_IDO_JIYU,    
                    o_VSEATI_NO,
                    o_ISHORIBI_KEY,
                    o_ISHORI_JIKAN_KEY,
                    o_N_SQL_CODE,
                    o_V_SQL_MSG);
    IF o_N_SQL_CODE <> C_ISUCCESS THEN
      o_NSQL_CODE  := o_N_SQL_CODE;
      o_VSQL_MSG  := o_V_SQL_MSG;
      GOTO SECTION;
    END IF;

    --⑥ID管理テーブルを更新。       ([DB更新説明書１]を参照）
    -- 2023/04/06 ZCZL.GUORUIHUA 0.2.000.001 廃棄テーブルの対応 UPDATE START
    --UPDATE UAT_NEXTIDKANRI
    --  SET NEXTID = NEXTID + 1
    --    WHERE GYOMUCODE = 'EB'
    --      AND KUBUN = 1;
    UPDATE KKFTNEXTIDKANRI
      SET NEXTID = NEXTID + 1
        WHERE GYOMUCODE = 'JIB'
          AND KUBUN = 1;
    -- 2023/04/06 ZCZL.GUORUIHUA 0.2.000.001 廃棄テーブルの対応 UPDATE END
    --現住所変更
    --⑦現住所対象フラグを更新(住居表示変更対象者TBL.現住所対象フラグ＝10(住基更新済))
    IF LENGTH(w_V_GEN_KOJIN_NO) > 0 THEN
      VSQL := NULL;
      VSQL := ' UPDATE JIBTJUSHOHENKO_TAISHO ';
      VSQL := VSQL || ' SET GEN_TAISHO_FLG = ' || C_KOSINZUMI;
      VSQL := VSQL || ' WHERE KOJIN_NO IN ( ' || w_V_GEN_KOJIN_NO || ')';
      EXECUTE IMMEDIATE VSQL;
    END IF;

    RETURN RTN_CD;

    --⑧エラー処理
    <<SECTION>>
    --・本籍対象フラグを更新(住居表示変更対象者TBL.本籍対象フラグ＝13(住基未更新（その他）))
    --現住所変更
    IF LENGTH(w_V_GEN_KOJIN_NO) > 0 THEN
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET GEN_TAISHO_FLG = C_KOSINZUMI
        WHERE KOJIN_NO IN (w_V_GEN_KOJIN_NO);
    END IF;
    --・IES用中間テーブルを削除
    --宛名基本中間（IES用）
    DELETE JIBWIES_JUKIKIHON
      WHERE ENTRY_ID = W_ENTORYID;
    --住基異動中間（IES用）
    DELETE JIBWIES_JUKIIDO
      WHERE ENTRY_ID = W_ENTORYID;
    --住基住所中間（IES用)
    DELETE JIBWIES_JUKIJUSHO
      WHERE ENTRY_ID = W_ENTORYID;
    RTN_CD := C_INOT_SUCCESS;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_JIBSOIEUPD_GEN;

------------------------------------------------------------------------------
-- ES用中間テーブルのデータよりマスタを更新(本籍)
------------------------------------------------------------------------------
FUNCTION FUNC_JIBSOIEUPD_HON RETURN PLS_INTEGER IS
BEGIN
  BEGIN
    RTN_CD := C_ISUCCESS;
    --④IES用中間テーブルのデータよりマスタを更新。
    JIBSOIEUPD(TO_NUMBER(W_ENTORYID),
                    i_VTANMATSU_NO,
                    NVL(999 || o_GABTJUKIIDO.SETAI_NO,0),
                    TO_NUMBER(W_SYSDATE),
                    W_JIYU,
                    C_YITIBU,
                    0,
                    1,         
                    o_VKOJIN_NO,
                    o_RIREKI_RENBAN,
                    o_IDO_JIYU,    
                    o_VSEATI_NO,
                    o_ISHORIBI_KEY,
                    o_ISHORI_JIKAN_KEY,
                    o_N_SQL_CODE,
                    o_V_SQL_MSG);
    IF o_N_SQL_CODE <> C_ISUCCESS THEN
      o_NSQL_CODE  := o_N_SQL_CODE;
      o_VSQL_MSG  := o_V_SQL_MSG;
      GOTO SECTION;
    END IF;

    --⑥ID管理テーブルを更新。       ([DB更新説明書１]を参照）
    -- 2023/04/06 ZCZL.GUORUIHUA 0.2.000.001 廃棄テーブルの対応 UPDATE START
    --UPDATE UAT_NEXTIDKANRI
    --  SET NEXTID = NEXTID + 1
    --    WHERE GYOMUCODE = 'EB'
    --      AND KUBUN = 1;
    UPDATE KKFTNEXTIDKANRI
      SET NEXTID = NEXTID + 1
        WHERE GYOMUCODE = 'JIB'
          AND KUBUN = 1;
    -- 2023/04/06 ZCZL.GUORUIHUA 0.2.000.001 廃棄テーブルの対応 UPDATE END
    --本籍変更
    --⑦本籍対象フラグを更新を更新(住居表示変更対象者TBL.本籍対象フラグ＝10(住基更新済))
    IF LENGTH(w_V_HON_KOJIN_NO) > 0 THEN
      VSQL := NULL;
      VSQL := ' UPDATE JIBTJUSHOHENKO_TAISHO ';
      VSQL := VSQL || ' SET HON_TAISHO_FLG = ' || C_KOSINZUMI;
      VSQL := VSQL || ' WHERE KOJIN_NO IN ( ' || w_V_HON_KOJIN_NO || ')';
      EXECUTE IMMEDIATE VSQL;
    END IF;

    RETURN RTN_CD;

    --⑧エラー処理
    <<SECTION>>
    --・本籍対象フラグを更新(住居表示変更対象者TBL.本籍対象フラグ＝13(住基未更新（その他）))
    --本籍変更
    IF LENGTH(w_V_HON_KOJIN_NO) > 0 THEN
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET HON_TAISHO_FLG = C_SONOTA
          WHERE KOJIN_NO IN (w_V_HON_KOJIN_NO);
    END IF;
   
    --・IES用中間テーブルを削除
    --宛名基本中間（IES用）
    DELETE JIBWIES_JUKIKIHON
      WHERE ENTRY_ID = W_ENTORYID;
    --住基異動中間（IES用）
    DELETE JIBWIES_JUKIIDO
      WHERE ENTRY_ID = W_ENTORYID;
    --住基住所中間（IES用)
    DELETE JIBWIES_JUKIJUSHO
      WHERE ENTRY_ID = W_ENTORYID;
    RTN_CD := C_INOT_SUCCESS;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_JIBSOIEUPD_HON;

------------------------------------------------------------------------------
-- ES用中間テーブルのデータよりマスタを更新
------------------------------------------------------------------------------
FUNCTION FUNC_EBPPRENKEIKOSHIN(W_GHKBN IN NVARCHAR2) RETURN PLS_INTEGER IS
  R_TAISHO JIBTJUSHOHENKO_TAISHO%ROWTYPE;
BEGIN
  BEGIN
    RTN_CD := C_ISUCCESS;

    FOR ISETAI_LOOP IN 1..NVL(MRENKEIDATA.COUNT, 0) LOOP

      R_TAISHO := M_TAISHO(ISETAI_LOOP);
      --FXSS戸籍連携
--2023/06/28 ZCZL.WANGM ADD Start 0.2.000.002:住記系追加作業
--      IF NKOSEKIJKN = 3 THEN
        /*
        EBPPKOSEKINEWXEROXTEXT(R_TAISHO.KOJIN_NO,
                               MRENKEIDATA(ISETAI_LOOP).NRIREKI_RENBAN,
                               MRENKEIDATA(ISETAI_LOOP).NSETAI_NO,
                               MRENKEIDATA(ISETAI_LOOP).IIDO_JIYU,
                               W_NIDOBI,
                               W_NTODOKE_BI,
                               TO_NUMBER(W_SYSDATE),
                               I_RTN);
        */
--      END IF;
--2023/06/28 ZCZL.WANGM ADD End
      --国民年金異動報告データ
      NKBSOJIDO(R_TAISHO.KOJIN_NO,
                   MRENKEIDATA(ISETAI_LOOP).NRIREKI_RENBAN,
                   MRENKEIDATA(ISETAI_LOOP).NSETAI_NO,
                   MRENKEIDATA(ISETAI_LOOP).IIDO_JIYU,
                   W_NIDOBI,
                   W_NTODOKE_BI,
                   TO_NUMBER(W_SYSDATE),
                   i_VTANMATSU_NO);

      --⑤住所変更証明書管理(JIBTJUSHOHENKO)を更新。([DB更新説明書６]を参照)
      I_RTN := FUNC_SET_JUSHOHENKO(R_TAISHO);
      IF I_RTN <> C_ISUCCESS THEN
        GOTO SECTION;
      END IF;

    END LOOP;

    RETURN RTN_CD;

    --⑧エラー処理（上記⑤異常の場合実行）
    <<SECTION>>
    IF W_GHKBN = C_GEN THEN
      --・現住所対象フラグを更新(住居表示変更対象者TBL.現住所対象フラグ＝13(住基未更新（その他）))
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET GEN_TAISHO_FLG = C_SONOTA
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
    ELSE
      --・本籍対象フラグを更新(住居表示変更対象者TBL.本籍対象フラグ＝13(住基未更新（その他）))
      UPDATE JIBTJUSHOHENKO_TAISHO
        SET HON_TAISHO_FLG = C_SONOTA
          WHERE KOJIN_NO = R_TAISHO.KOJIN_NO;
    END IF;
    --・IES用中間テーブルを削除
    --宛名基本中間（IES用）
    DELETE JIBWIES_JUKIKIHON
      WHERE ENTRY_ID = W_ENTORYID;
    --住基異動中間（IES用）
    DELETE JIBWIES_JUKIIDO
      WHERE ENTRY_ID = W_ENTORYID;
    --住基住所中間（IES用
    DELETE JIBWIES_JUKIJUSHO
      WHERE ENTRY_ID = W_ENTORYID;
    RTN_CD := C_INOT_SUCCESS;
  EXCEPTION
    WHEN OTHERS THEN
      o_NSQL_CODE  := SQLCODE;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
      RTN_CD := C_INOT_SUCCESS;
  END;
  RETURN RTN_CD;
END FUNC_EBPPRENKEIKOSHIN;

------------------------------------------------------------------
--  メイン処理
------------------------------------------------------------------
BEGIN
    --初期処理
    o_NSQL_CODE := C_ISUCCESS;
    W_SYSDATE := TO_CHAR(SYSDATE,'YYYYMMDD');
    W_SYSTIME := TO_CHAR(SYSDATE,'HH24MISS');
    wio_WYMD  := i_NIDOBI;
    wio_SYMD  := 0;
    IF KKAPK0020.FDAYEDIT(wio_WYMD,wio_SYMD,wo_ED_GYYMMDD1,wo_ED_GYYMMDD2,wo_ED_GYYMMDD3,
                           wo_KJ_GENGO,wo_KG_GENGO,wo_WYY,wo_SYYYY,wo_WGYYMM,wo_MM,wo_DD,wo_WYMD,wo_SYMD) THEN
        W_NIDOBI := wio_SYMD;
    ELSE
        GOTO SECTION;
    END IF;
    wio_WYMD  := i_NTODOKE_BI;
    wio_SYMD  := 0;
    IF KKAPK0020.FDAYEDIT(wio_WYMD,wio_SYMD,wo_ED_GYYMMDD1,wo_ED_GYYMMDD2,wo_ED_GYYMMDD3,
                           wo_KJ_GENGO,wo_KG_GENGO,wo_WYY,wo_SYYYY,wo_WGYYMM,wo_MM,wo_DD,wo_WYMD,wo_SYMD) THEN
        W_NTODOKE_BI := wio_SYMD;
    ELSE
        GOTO SECTION;
    END IF;
  BEGIN
    --制御コンスタントの入力
    I_RTN := FUNC_INPUT_CTL_CONSTANT;
    IF I_RTN <> C_ISUCCESS THEN
        GOTO SECTION;
    END IF;
--2023/06/28 ZCZL.WANGM ADD Start 0.2.000.002:住記系追加作業
    --システム条件取得
    NKOSEKIJKN := 0;
    I_RTN := KKAPK0030.FCTGetR('JIB','SYSTEM_JOKEN','0002','3',o_tITEM);
    IF I_RTN = 0 THEN
      NKOSEKIJKN := o_tITEM(1);
    ELSE
      NKOSEKIJKN := 0;
    END IF;
--2023/06/28 ZCZL.WANGM ADD End
    --前回テスト情報のクリア
    I_RTN := FUNC_CLEAR_TAISHO_TEST;
    IF I_RTN <> C_ISUCCESS THEN
        GOTO SECTION;
    END IF;
    --住居表示変更対象者の現住所と本籍住所の変更に伴いマスター更新
    w_V_SETAINO := 0; 
    w_V_GEN_KOJIN_NO := NULL;
    w_V_HON_KOJIN_NO := NULL;
    I_CNT := 0;          -- 世帯内カウントクリア                       
    M_TAISHO.DELETE;     -- 世帯内退避レコードテーブルクリア           
    MRENKEIDATA.DELETE;  -- 世帯内連携データ退避レコードテーブルクリア 
    --イメージエントリID取得
    I_RTN := FUNC_GET_W_ENTORYID;
    IF I_RTN <> C_ISUCCESS THEN
        GOTO SECTION;
    END IF;

    --現住所変更
    FOR R_TAISHO IN CJUSHOHENKOTAISHO LOOP
        --世帯変更
        IF (w_V_SETAINO <> 0) AND (w_V_SETAINO <> R_TAISHO.SETAI_NO) THEN
           --処理対象が存在する場合
           IF LENGTH(w_V_GEN_KOJIN_NO) > 0 THEN
             I_RTN := FUNC_JIBSOIEUPD_GEN;
             IF I_RTN <> C_ISUCCESS THEN
                 GOTO SECTION;
             END IF;
           END IF;

           --処理対象が存在する場合
           IF LENGTH(w_V_GEN_KOJIN_NO) > 0 THEN
             W_GHKBN := C_GEN;  -- 現住所／本籍区分
             I_RTN := FUNC_EBPPRENKEIKOSHIN(W_GHKBN);
             IF I_RTN <> C_ISUCCESS THEN
                 GOTO SECTION;
             END IF;
           END IF;

           --次の世帯単位のイメージエントリIDを取得する
           I_RTN := FUNC_GET_W_ENTORYID;
           IF I_RTN <> C_ISUCCESS THEN
               GOTO SECTION;
           END IF;
           w_V_GEN_KOJIN_NO := NULL;
           I_CNT := 0;          -- 世帯内カウントクリア                       
           M_TAISHO.DELETE;     -- 世帯内退避レコードテーブルクリア           
           MRENKEIDATA.DELETE;  -- 世帯内連携データ退避レコードテーブルクリア 
        END IF;
        w_V_SETAINO := R_TAISHO.SETAI_NO;

        -- R_TAISHO.現住所対象フラグ が1の場合のみ、現住所を変更
        IF R_TAISHO.GEN_TAISHO_FLG = 1 THEN
            W_UPDKUBUN := 1;
            --事由＝４２（現住所変更）を下記で使用。
            W_JIYU := C_GENJUSHO;
            --宛名基本と住基異動テーブルからデータを取得
            I_RTN := FUNC_GET_DATA(R_TAISHO);
            IF I_RTN <> C_ISUCCESS THEN
                GOTO SECTION;
            END IF;
            I_CNT := I_CNT + 1;            -- 世帯内カウント ＋１              
            M_TAISHO(I_CNT)  := R_TAISHO;  -- 世帯内データ退避                 
            --現住所を変更
            I_RTN := FUNC_UPDATE_GENJYUSHO(R_TAISHO);
            IF I_RTN <> C_ISUCCESS THEN
                GOTO SECTION;
            END IF;
        END IF;
    END LOOP;
    --世帯変更
    IF w_V_SETAINO <> 0 THEN
         IF LENGTH(w_V_GEN_KOJIN_NO) > 0 THEN
         --処理対象が存在する場合
           I_RTN := FUNC_JIBSOIEUPD_GEN;
           IF I_RTN <> C_ISUCCESS THEN
             GOTO SECTION;
           END IF;
         END IF;
         --処理対象が存在する場合
         IF LENGTH(w_V_GEN_KOJIN_NO) > 0 THEN
           W_GHKBN := C_GEN;  -- 現住所／本籍区分
           I_RTN := FUNC_EBPPRENKEIKOSHIN(W_GHKBN);
           IF I_RTN <> C_ISUCCESS THEN
               GOTO SECTION;
           END IF;
         END IF;
    END IF;

    w_V_SETAINO := 0; 
    w_V_HON_KOJIN_NO := NULL;
    I_CNT := 0;          -- 世帯内カウントクリア                        
    M_TAISHO.DELETE;     -- 世帯内退避レコードテーブルクリア            
    MRENKEIDATA.DELETE;  -- 世帯内連携データ退避レコードテーブルクリア  
    --イメージエントリID取得
    I_RTN := FUNC_GET_W_ENTORYID;
    IF I_RTN <> C_ISUCCESS THEN
        GOTO SECTION;
    END IF;

    --1秒をずらす
    DBMS_LOCK.SLEEP(1);

    --本籍変更
    FOR R_TAISHO IN CJUSHOHENKOTAISHO LOOP
        --世帯変更
        IF (w_V_SETAINO <> 0) AND (w_V_SETAINO <> R_TAISHO.SETAI_NO) THEN
           --処理対象が存在する場合
           IF LENGTH(w_V_HON_KOJIN_NO) > 0 THEN
             I_RTN := FUNC_JIBSOIEUPD_HON;
             IF I_RTN <> C_ISUCCESS THEN
                 GOTO SECTION;
             END IF;
           END IF;

           --処理対象が存在する場合
           IF LENGTH(w_V_HON_KOJIN_NO) > 0 THEN
             W_GHKBN := C_HON;  -- 現住所／本籍区分
             I_RTN := FUNC_EBPPRENKEIKOSHIN(W_GHKBN);
             IF I_RTN <> C_ISUCCESS THEN
                 GOTO SECTION;
             END IF;
           END IF;

           --次の世帯単位のイメージエントリIDを取得する
           I_RTN := FUNC_GET_W_ENTORYID;
           IF I_RTN <> C_ISUCCESS THEN
               GOTO SECTION;
           END IF;
           w_V_HON_KOJIN_NO := NULL;
           I_CNT := 0;          -- 世帯内カウントクリア                        
           M_TAISHO.DELETE;     -- 世帯内退避レコードテーブルクリア            
           MRENKEIDATA.DELETE;  -- 世帯内連携データ退避レコードテーブルクリア  
        END IF;
        w_V_SETAINO := R_TAISHO.SETAI_NO;

        -- R_TAISHO.本籍対象フラグ が1の場合のみ、本籍住所を変更
        IF R_TAISHO.HON_TAISHO_FLG = 1 THEN
            W_UPDKUBUN := 2;
            --事由＝４１（本籍住所変更）を下記で使用。
            W_JIYU := C_HONJUSHO;
            --宛名基本と住基異動テーブルからデータを取得
            I_RTN := FUNC_GET_DATA(R_TAISHO);
            IF I_RTN <> C_ISUCCESS THEN
                GOTO SECTION;
            END IF;
            I_CNT := I_CNT + 1;            -- 世帯内カウント ＋１              
            M_TAISHO(I_CNT)  := R_TAISHO;  -- 世帯内データ退避                
            --本籍住所を変更
            I_RTN := FUNC_UPDATE_HONJYUSHO(R_TAISHO);
            IF I_RTN <> C_ISUCCESS THEN
                GOTO SECTION;
            END IF;
        END IF;
    END LOOP;

    --世帯変更
    IF w_V_SETAINO <> 0 THEN
         IF LENGTH(w_V_HON_KOJIN_NO) > 0 THEN
         --処理対象が存在する場合
           I_RTN := FUNC_JIBSOIEUPD_HON;
           IF I_RTN <> C_ISUCCESS THEN
             GOTO SECTION;
           END IF;
         END IF;
         --処理対象が存在する場合
         IF LENGTH(w_V_HON_KOJIN_NO) > 0 THEN
           W_GHKBN := C_HON;  -- 現住所／本籍区分
           I_RTN := FUNC_EBPPRENKEIKOSHIN(W_GHKBN);
           IF I_RTN <> C_ISUCCESS THEN
               GOTO SECTION;
           END IF;
         END IF;
    END IF;
  EXCEPTION
    WHEN OTHERS THEN
      IF SQLCODE = 0 THEN
        o_NSQL_CODE  := C_INOT_SUCCESS;
      ELSE
        o_NSQL_CODE := SQLCODE;
      END IF;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
  END;
  RETURN;
  <<SECTION>>
  IF o_NSQL_CODE = C_ISUCCESS THEN
      IF SQLCODE = 0 THEN
        o_NSQL_CODE  := C_INOT_SUCCESS;
      ELSE
        o_NSQL_CODE := SQLCODE;
      END IF;
      o_VSQL_MSG  := SUBSTR(TO_CHAR(SQLERRM),1,255);
  END IF;
END JIBSOJHJIBUPD;
/
