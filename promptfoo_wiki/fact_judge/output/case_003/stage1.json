{
  "evalId": "eval-VIt-2026-02-03T03:20:55",
  "results": {
    "version": 3,
    "timestamp": "2026-02-03T03:20:55.684Z",
    "prompts": [
      {
        "id": "83d534d174cc6287eeef5d11729d9e09ebe30deb2c37f2ea662fc7cde3461aef",
        "raw": "You are a FACT EXTRACTION ENGINE.\n\nYou are given:\n- SOURCE CODE (Java or SQL)\n- GENERATED WIKI (Markdown)\n\n--- SOURCE CODE ---\n{{source_code}}\n\n--- GENERATED WIKI ---\n{{wiki_md}}\n\nCOVERAGE ITEM DEFINITION (VERY IMPORTANT):\n\nA \"coverage item\" MUST correspond to a concrete structural element in the source code.\n\nAllowed coverage items include ONLY:\n- Class definitions\n- Method or function definitions\n- Public fields or properties\n- SQL tables, views, or columns\n- Explicit control-flow behaviors (e.g. transactions, conditional branches) ONLY IF they are directly implemented in code\n\nDo NOT treat:\n- Explanations\n- Design intent\n- Usage suggestions\n- High-level concepts\n- Implicit behavior\n\nas coverage items.\n\nCRITICAL RULES:\n- Extract ONLY objective, verifiable facts\n- DO NOT evaluate quality\n- DO NOT assign scores\n- DO NOT summarize\n- DO NOT judge usefulness\n- DO NOT say good/bad/correct/incorrect\n- ONLY list concrete missing, mismatched, or hallucinated items\n\nCOUNTING RULE:\n\nEach coverage item MUST be countable and refer to a specific location in the source code.\nIf an item cannot be pointed to a concrete code location, it MUST NOT be counted.\n\nREQUIRED OUTPUT (VALID JSON ONLY):\n\n{\n  \"coverage\": {\n    \"total_items\": <integer>,\n    \"covered_items\": <integer>,\n    \"missing\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what is missing>\"\n      }\n    ]\n  },\n  \"correctness\": {\n    \"wrong_count\": <integer>,\n    \"mismatches\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what does not match the source>\"\n      }\n    ]\n  },\n  \"hallucination\": [\n    {\n      \"position\": <integer>,\n      \"content\": \"<invented object or behavior>\"\n    }\n  ],\n  \"usefulness\": {\n    \"missing_explanations\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<important concept not explained>\"\n      }\n    ]\n  }\n}\n",
        "label": "You are a FACT EXTRACTION ENGINE.\n\nYou are given:\n- SOURCE CODE (Java or SQL)\n- GENERATED WIKI (Markdown)\n\n--- SOURCE CODE ---\n{{source_code}}\n\n--- GENERATED WIKI ---\n{{wiki_md}}\n\nCOVERAGE ITEM DEFINITION (VERY IMPORTANT):\n\nA \"coverage item\" MUST correspond to a concrete structural element in the source code.\n\nAllowed coverage items include ONLY:\n- Class definitions\n- Method or function definitions\n- Public fields or properties\n- SQL tables, views, or columns\n- Explicit control-flow behaviors (e.g. transactions, conditional branches) ONLY IF they are directly implemented in code\n\nDo NOT treat:\n- Explanations\n- Design intent\n- Usage suggestions\n- High-level concepts\n- Implicit behavior\n\nas coverage items.\n\nCRITICAL RULES:\n- Extract ONLY objective, verifiable facts\n- DO NOT evaluate quality\n- DO NOT assign scores\n- DO NOT summarize\n- DO NOT judge usefulness\n- DO NOT say good/bad/correct/incorrect\n- ONLY list concrete missing, mismatched, or hallucinated items\n\nCOUNTING RULE:\n\nEach coverage item MUST be countable and refer to a specific location in the source code.\nIf an item cannot be pointed to a concrete code location, it MUST NOT be counted.\n\nREQUIRED OUTPUT (VALID JSON ONLY):\n\n{\n  \"coverage\": {\n    \"total_items\": <integer>,\n    \"covered_items\": <integer>,\n    \"missing\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what is missing>\"\n      }\n    ]\n  },\n  \"correctness\": {\n    \"wrong_count\": <integer>,\n    \"mismatches\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what does not match the source>\"\n      }\n    ]\n  },\n  \"hallucination\": [\n    {\n      \"position\": <integer>,\n      \"content\": \"<invented object or behavior>\"\n    }\n  ],\n  \"usefulness\": {\n    \"missing_explanations\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<important concept not explained>\"\n      }\n    ]\n  }\n}\n",
        "provider": "ollama:gpt-oss:120b",
        "metrics": {
          "score": 1,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 0,
          "totalLatencyMs": 579819,
          "tokenUsage": {
            "prompt": 40960,
            "completion": 12547,
            "cached": 0,
            "total": 53507,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 0,
              "prompt": 0,
              "completion": 0,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      }
    ],
    "results": [
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "contains-json"
              }
            }
          ]
        },
        "id": "4f45a032-b094-494a-819a-8c0bd7fe09e8",
        "latencyMs": 579819,
        "namedScores": {},
        "prompt": {
          "raw": "You are a FACT EXTRACTION ENGINE.\n\nYou are given:\n- SOURCE CODE (Java or SQL)\n- GENERATED WIKI (Markdown)\n\n--- SOURCE CODE ---\nCREATE OR REPLACE PROCEDURE JIBSOIEUPDB(\r\n--1.0.105.002-05.00-03.00\r\n  i_IENTRY_ID         IN  PLS_INTEGER,\r\n  i_NTANMATSU_NO      IN  VARCHAR2,\r\n  i_NSHOKUIN          IN  NVARCHAR2,\r\n  i_SHORIBI           IN  NUMBER,\r\n  i_IDO_JIYU          IN  NUMBER,\r\n  i_ZENBUICHIBU       IN  NUMBER,\r\n  i_FUKI_FLG          IN  NUMBER,\r\n  i_KEIBI_FLG         IN  NUMBER,\r\n  o_VKOJIN_NO         OUT VARCHAR2,\r\n  o_RIREKI_RENBAN     OUT VARCHAR2,\r\n  o_IDO_JIYU          OUT VARCHAR2,\r\n  o_VSEATI_NO         OUT VARCHAR2,\r\n  o_ISHORIBI_KEY      OUT PLS_INTEGER,\r\n  o_ISHORI_JIKAN_KEY  OUT PLS_INTEGER,\r\n  o_N_SQL_CODE        OUT NUMBER,\r\n  o_V_SQL_MSG         OUT VARCHAR2\r\n)\r\nIS\r\n--------------------------------------------------------\r\n--  業務名        JIB(住民記録)\r\n--  PG 名         JIBSOIEUPDB\r\n--  名称          イメージエントリデータ更新(仮更新用)\r\n--  処理概要      イメージエントリ中間データより住基のマスタを更新\r\n--  作成者        ZCZL.XUNWENYAN\r\n--  作成日        2022/07/28\r\n--  Version       0.2.000.000\r\n--------------------------------------------------------\r\n--  修正概要      戸籍連携はマイグレ対象外なのでコメントアウトする\r\n--  作成者        H.Furui\r\n--  作成日        2022/08/02\r\n--  Version       0.2.000.000\r\n--------------------------------------------------------\r\n--  修正概要      : GABSKLNKDTPDの呼び出しをコメントアウトする。\r\n--  バージョン    : 0.0.000.000\r\n--  修正者／修正日: JIP H.Furui   2022/08/15\r\n--------------------------------------------------------\r\n--  修正概要      : 住記系追加作業\r\n--  バージョン    : 0.2.000.001\r\n--  修正者／修正日: ZCZL.WANGM   2023/06/27\r\n--------------------------------------------------------\r\n--  修正概要      : 住基ネット1次開発\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: DIS.XIYAN   2023/11/20\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE２次開発\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: DIS.LIUQIMENG   2024/01/25\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE２次開発（最新フラグ＝１追加確認）\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: DIS.Qianyinhua   2024/02/22\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE２次開発（異動事由コードの一括対応）\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: DIS.Qianyinhua   2024/02/25\r\n--------------------------------------------------------\r\n--  修正概要      : 受入検証指摘対応\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: DIS.LIUQIMENG   2024/03/26\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE２次開発（ph4対応）\r\n--  バージョン    : 0.3.030.000\r\n--  修正者／修正日: DIS.Wangrucheng   2024/04/03\r\n--------------------------------------------------------\r\n--  修正概要      : 受入検証指摘対応\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: DIS.LIUQIMENG   2024/05/08\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00054故障対応\r\n--  バージョン      : 0.2.000.002\r\n--  修正者／修正日: ZCZL.wanghj   2024/05/22\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00115対応\r\n--  バージョン      : 0.3.000.000\r\n--  修正者／修正日: DIS.chenming   2024/08/02\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00279対応\r\n--  バージョン      : 0.3.000.000\r\n--  修正者／修正日: DIS.huangyaoyu   2024/08/13\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00228対応\r\n--  バージョン      : 0.3.040.000\r\n--  修正者／修正日: DIS.liuqimeng   2024/08/15\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00231対応\r\n--  バージョン      : 0.3.040.000\r\n--  修正者／修正日: DIS.liuqimeng   2024/08/15\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00229対応\r\n--  バージョン      : 0.3.040.000\r\n--  修正者／修正日: DIS.liuqimeng   2024/10/21\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00454対応\r\n--  バージョン      : 0.3.040.000\r\n--  修正者／修正日: DIS.Gaohaobo 2024/10/22\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE２次開発_IT_JIB_00550の対応\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: DIS.Zhaohuanhuan 2024/10/28\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_00809対応\r\n--  バージョン    : 0.3.040.000\r\n--  修正者／修正日: JIP.Yoshida   2024/12/20\r\n--------------------------------------------------------\r\n--  修正概要      : IT_JIB_01005対応\r\n--  バージョン    : 0.3.000.000\r\n--  修正者／修正日: CTC   2025/02/24\r\n--------------------------------------------------------\r\n--  修正概要      : 保守QA #14884対応\r\n--  バージョン    : 1.0.003.000\r\n--  修正者／修正日: DIS.LIJING   2025/05/09\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE2次開発_QA16307対応\r\n--  バージョン    : 1.0.005.000\r\n--  修正者／修正日: CTC.LIU   2025/05/23\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE2次開発_QA13677対応\r\n--  バージョン    : 1.0.009.000\r\n--  修正者／修正日: CTC.LIU   2025/06/24\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE2次開発_QA13759対応\r\n--  バージョン    : 1.0.009.002\r\n--  修正者／修正日: CTC.LI   2025/06/19\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA17509\r\n--  バージョン    : 1.0.010.004\r\n--  修正者／修正日: CTC.zhang 2025/07/02\r\n--------------------------------------------------------\r\n--  修正概要      : QA17936対応\r\n--  バージョン    : 1.0.010.005\r\n--  修正者／修正日: JIP   2025/07/07\r\n--------------------------------------------------------\r\n--  修正概要      : QA17556対応\r\n--  バージョン    : 1.0.010.006\r\n--  修正者／修正日: CTC.zhang 2025/07/14\r\n--------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA20504\r\n--  バージョン    : 1.0.016.002\r\n--  修正者／修正日: CTC.liu 2025/09/05\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA20711\r\n--  バージョン    : 1.0.017.001\r\n--  修正者／修正日: CTC.liu 2025/09/11\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA21118\r\n--  バージョン    : 1.0.017.002\r\n--  修正者／修正日: CTC.liu 2025/09/12\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA21654,21666\r\n--  バージョン    : 1.0.021.001\r\n--  修正者／修正日: CTC.liu 2025/10/07\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA21647\r\n--  バージョン    : 1.0.022.002\r\n--  修正者／修正日: CTC.liu 2025/10/14\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA22490\r\n--  バージョン    : 1.0.025.002\r\n--  修正者／修正日: CTC.liu 2025/10/29\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA22785\r\n--  バージョン    : 1.0.026.000\r\n--  修正者／修正日: CTC.liu 2025/11/05\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA23150\r\n--  バージョン    : 1.0.026.003\r\n--  修正者／修正日: CTC.liu 2025/11/13\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA22566\r\n--  バージョン    : 1.0.027.000\r\n--  修正者／修正日: CTC.liu 2025/11/13\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA25517\r\n--  バージョン    : 1.0.105.000\r\n--  修正者／修正日: CTC.zhang 2026/1/7\r\n------------------------------------------------------------\r\n--  修正概要      : 新WizLIFE保守対応 QA24458\r\n--  バージョン    : 1.0.105.002\r\n--  修正者／修正日: CTC.liu 2026/1/7\r\n------------------------------------------------------------\r\n--  変数宣言\r\n------------------------------------------------------------------------------\r\n  -- 配列\r\n  TYPE MT_JUKIJUSHO IS TABLE OF JIBWBUPD_JUKIJUSHO%ROWTYPE INDEX BY BINARY_INTEGER;\r\n  M_JUSHO     MT_JUKIJUSHO;                         -- ワーク住基住所ＴＢＬ配列\r\n  R_BUPD_ATENA JIBWBUPD_JUKIKIHON%ROWTYPE;           -- ワーク宛名基本ＴＢＬ変数\r\n  R_IDO       JIBTJUKIIDO%ROWTYPE;                  -- 住基異動ＴＢＬ変数\r\n  R_ATENA     JIBTJUKIKIHON%ROWTYPE;               -- 宛名基本ＴＢＬ変数\r\n  R_JUSHO     JIBTJUKIJUSHO%ROWTYPE;                -- 宛名基本ＴＢＬ変数\r\n  R_TSUSHORIREKI      JIBTTSUSHORIREKI%ROWTYPE;     -- 通称履歴ＴＢＬ変数\r\n  R_BUPD_JUKIIDO   JIBWBUPD_JUKIIDO%ROWTYPE;          -- 住基異動中間（BUPD用）ＴＢＬ変数\r\n  T_KOJIN_NO  JIBWBUPD_JUKIKIHON.KOJIN_NO%TYPE;     -- ワーク宛名基本ＴＢＬ個人番号変数\r\n  T_JUMIN_CD  JIBWBUPD_JUKIKIHON.JUMINHYO_CD%TYPE;  -- ワーク宛名基本ＴＢＬ住民票コード変数\r\n  T_SETAI_NO  JIBWBUPD_JUKIKIHON.SETAI_NO%TYPE;     -- ワーク宛名基本ＴＢＬ世帯番号変数\r\n  T_RENBAN    JIBWBUPD_JUKIJUSHO.JUSHO_REN%TYPE;     -- ワーク住基住所ＴＢＬ住所連番変数\r\n  T_JINKAKU_KBN               JIBTJUKIIDO.JINKAKU_KBN%TYPE;  --処理対象人格区分\r\n  T_GENZON_KBN                JIBTJUKIIDO.GENZON_KBN%TYPE;   --処理対象現存区分\r\n  T_NUSHI_KBN                 JIBTJUKIIDO.NUSHI_KBN%TYPE;    --処理対象世帯主区分\r\n  T_OAZA_CD                   JIBTJUKIKIHON.OAZA_CD%TYPE;   --処理対象大字コード\r\n  T_GYOSEIKU_CD               JIBTJUKIIDO.GYOSEIKU_CD%TYPE;  --処理対象行政区コード\r\n  T_CHIKU_CD                  JIBTJUKIIDO.CHIKU_CD%TYPE;     --処理対象地区コード\r\n  T_NUSHI_JINKAKU_KBN         JIBTJUKIIDO.JINKAKU_KBN%TYPE;  --処理対象世帯主人格区分\r\n  T_NUSHI_JINKAKU_KBN1        JIBTJUKIIDO.JINKAKU_KBN%TYPE;  --処理対象世帯主人格区分\r\n  T_NUSHI_JINKAKU_KBN2        JIBTJUKIIDO.JINKAKU_KBN%TYPE;  --処理対象世帯主人格区分\r\n  NKADO_BI5                   NUMBER;\r\n  NKADO_BI6                   NUMBER;\r\n  NJOKEN2                     NUMBER;\r\n  WK_JUSHO_CHG                NUMBER;\r\n  VACHOMEI                    NVARCHAR2(1000) := NULL;\r\n  VABANCHI                    NVARCHAR2(1000) := NULL;\r\n  VAKATAGAKI                  NVARCHAR2(1000) := NULL;\r\n  VBCHOMEI                    NVARCHAR2(1000) := NULL;\r\n  VBBANCHI                    NVARCHAR2(1000) := NULL;\r\n  VBKATAGAKI                  NVARCHAR2(1000) := NULL;\r\n  T_JIYU_KBN  GABTIDOJIYU.IDO_JIYU_KBN%TYPE;              -- 異動事由ＴＢＬ異動事由区分変数\r\n  T_JIYU_KBN2 GABTIDOJIYU.IDO_JIYU_KBN%TYPE;              -- 異動事由ＴＢＬ異動事由区分変数\r\n  T_KANA1     GABTSHIMEIKENSAKU.KENSAKU_SHIMEI_KANA%TYPE; -- 氏名検索ＴＢＬ検索用氏名かな変数\r\n  T_KANA2     GABTSHIMEIKENSAKU.KENSAKU_SHIMEI_KANA%TYPE; -- 氏名検索ＴＢＬ検索用氏名かな変数\r\n  T_KANJI1    GABTSHIMEIKENSAKU.KENSAKU_MEI_KANJI%TYPE;   -- 氏名検索ＴＢＬ検索用氏名漢字変数\r\n  T_KANJI2    GABTSHIMEIKENSAKU.KENSAKU_MEI_KANJI%TYPE;   -- 氏名検索ＴＢＬ検索用氏名漢字変数\r\n  T_KANJI3    GABTSHIMEIKENSAKU.KENSAKU_MEI_KANJI%TYPE;   -- 氏名検索ＴＢＬ検索用氏名漢字変数\r\n  T_IDO_KBN   JIBTIDORUIKEI.IDO_KBN%TYPE;                 -- 異動累計ＴＢＬ異動区分変数\r\n  T_MAX_KOJIN_NO    JIBTJUKIKIHON.KOJIN_NO%TYPE;         -- 宛名基本ＴＢＬ個人番号変数\r\n  T_MAX_JUMINHYO_CD JIBTJUKIKIHON.JUMINHYO_CD%TYPE;      -- 宛名基本ＴＢＬ住民票コード変数\r\n  T_MAX_SETAI_NO    JIBTJUKIKIHON.SETAI_NO%TYPE;         -- 宛名基本ＴＢＬ世帯番号変数\r\n  T_RIREKI_RENBAN   JIBWBUPD_JUKIKIHON.RIREKI_RENBAN%TYPE;-- 宛名基本ＴＢＬ履歴連番変数\r\n  RTNCD   PLS_INTEGER := 0;             -- カウント\r\n  I_CNT   PLS_INTEGER := 0;             -- カウント\r\n  I_CNT1  PLS_INTEGER := 0;             -- カウンター\r\n  I_CNT2  PLS_INTEGER := 0;\r\n  I_POS   PLS_INTEGER := 0;\r\n  I_POS_K   PLS_INTEGER := 0;\r\n  A_CNT   PLS_INTEGER := 0;             -- カウント（宛名基本）\r\n  I_SYSDATE PLS_INTEGER := TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD'));\r\n  I_SYSTIME PLS_INTEGER := TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS'));\r\n  I_SYSDATE2 PLS_INTEGER := TO_NUMBER(TO_CHAR(SYSDATE - 1 / 86400 ,'YYYYMMDD'));  --帰化（減）、国籍取得（減）、国籍喪失（減）更新用日付\r\n  I_SYSTIME2 PLS_INTEGER := TO_NUMBER(TO_CHAR(SYSDATE - 1 / 86400 ,'HH24MISS'));  --帰化（減）、国籍取得（減）、国籍喪失（減）更新用時間\r\n  N_KYUUSER_CD  KKATGAPPEIJOHO.KYUUSER_CD%TYPE;\r\n  -- パイプ区切り個人番号格納\r\n  V_KOJIN_NO    NVARCHAR2(1000) ;\r\n  -- 異動元先世帯番号格納変数\r\n  I_IDOMOTO     NUMBER;\r\n  I_IDOSAKI     NUMBER;\r\n  I_JIYU_FLG    PLS_INTEGER := 0;\r\n  B_SHORI_FLG   BOOLEAN := TRUE;\r\n  I_HAITA_SETAI1 NUMBER;\r\n  I_HAITA_SETAI2 NUMBER;\r\n  T_BIKO_BUN_KEY         JIBTJUKIKIHON.SETAI_NO%TYPE       := NULL; --備考文作成中の世帯番号\r\n  T_BIKO_FIRST_CHOMEI    JIBTJUKIJUSHO.CHOMEI%TYPE          := NULL; --先頭者　町名\r\n  T_BIKO_FIRST_BANCHI    JIBTJUKIJUSHO.BANCHI%TYPE          := NULL; --先頭者　番地\r\n  T_BIKO_FIRST_KATAGAKI  JIBTJUKIJUSHO.KATAGAKI%TYPE        := NULL; --先頭者　方書\r\n  T_BIKO_FIRST_HITTOSHA  JIBTJUKIJUSHO.NUSHI_HITTOSYA%TYPE  := NULL; --先頭者　筆頭者\r\n  T_BIKO_HANTEI_CHOMEI   JIBTJUKIJUSHO.CHOMEI%TYPE          := NULL; --判定用　町名\r\n  T_BIKO_HANTEI_BANCHI   JIBTJUKIJUSHO.BANCHI%TYPE          := NULL; --判定用　番地\r\n  T_BIKO_HANTEI_KATAGAKI JIBTJUKIJUSHO.KATAGAKI%TYPE        := NULL; --判定用　方書\r\n  T_BIKO_HANTEI_HITTOSHA JIBTJUKIJUSHO.NUSHI_HITTOSYA%TYPE  := NULL; --判定用　筆頭者\r\n  T_BIKO_BUN             NVARCHAR2(360)        := NULL; --異動累計備考文\r\n  T_TARGET_SETAI_NO      JIBTJUKIKIHON.SETAI_NO%TYPE       := NULL; --異動対象者の世帯番号（仮番号あり）\r\n  I_IDO_COUNTER          NUMBER                             := 0;    --異動対象者のカウンタ\r\n\r\n/*氏名変換ＴＢＬへの追加用 */\r\n  T_YOMI_KANA_SEI       GABTSHIMEIHENKAN.YOMI_KANA%TYPE;         -- 氏名変換ＴＢＬ用姓読みかな\r\n  T_YOMI_KANA_MEI       GABTSHIMEIHENKAN.YOMI_KANA%TYPE;         -- 氏名変換ＴＢＬ用名読みかな\r\n  T_HENKANYO_KANJI_SEI  GABTSHIMEIHENKAN.HENKANYO_KANJI%TYPE;    -- 氏名変換ＴＢＬ用姓変換用漢字\r\n  T_HENKANYO_KANJI_MEI  GABTSHIMEIHENKAN.HENKANYO_KANJI%TYPE;    -- 氏名変換ＴＢＬ用名変換用漢字\r\n  ITASHARENKEI          PLS_INTEGER;                             -- 他社連携条件\r\n  NRTN                  NUMBER := 0;                             -- リターンコード\r\n  VKOJIN_NO_IDO         NVARCHAR2(2000) ;                         -- 異動対象個人番号リスト\r\n  T_KANA1_K     GABTSHIMEIKENSAKU.KENSAKU_SHIMEI_KANA%TYPE; -- 氏名検索ＴＢＬ検索用氏名かな変数（旧氏名）\r\n  T_KANA2_K     GABTSHIMEIKENSAKU.KENSAKU_SHIMEI_KANA%TYPE; -- 氏名検索ＴＢＬ検索用氏名かな変数（旧氏名）\r\n  T_KANJI1_K    GABTSHIMEIKENSAKU.KENSAKU_MEI_KANJI%TYPE;   -- 氏名検索ＴＢＬ検索用氏名漢字変数（旧氏名）\r\n  T_KANJI2_K    GABTSHIMEIKENSAKU.KENSAKU_MEI_KANJI%TYPE;   -- 氏名検索ＴＢＬ検索用氏名漢字変数（旧氏名）\r\n  T_KANJI3_K    GABTSHIMEIKENSAKU.KENSAKU_MEI_KANJI%TYPE;   -- 氏名検索ＴＢＬ検索用氏名漢字変数（旧氏名）\r\n  NJOKEN              NUMBER(1);\r\n  NJOKEN111           NUMBER;\r\n--リターンコード\r\n  N_RETN    NUMBER;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--  VSQL                VARCHAR2(4000);\r\n  VSQL                VARCHAR2(6000);\r\n  VKUBUN              NVARCHAR2(10);\r\n   WK_JINKAKU_KBN    PLS_INTEGER;\r\n  --JIBSORUIUPDのCALL用変数\r\n  N_IDO_ZEN_JINKAKU_KBN    NUMBER;              --異動前_人格区分\r\n  N_IDO_ZEN_GENZON_KBN     NUMBER;              --異動前_現存区分\r\n  N_IDO_ZEN_NUSHI_KBN      NUMBER;              --異動前_世帯主区分\r\n  N_IDO_ZEN_OAZA_CD        NUMBER;              --異動前_大字\r\n  N_IDO_ZEN_GYOSEIKU_CD    NUMBER;              --異動前_行政区コード\r\n  N_IDO_ZEN_CHIKU_CD       NUMBER;              --異動前_地区コード\r\n  N_IZENBU_ICHIBU_KBN      NUMBER;              --異動前_地区コード\r\n\r\n  --宛名基本、住基異動の更新用変数\r\n  N_IDO_JIYU               NUMBER;              --異動事由コード\r\n  N_JUMIN_NAKUNARU_JIYU    NUMBER;              --住民でなくなる事由コード\r\n  N_SHORI_KBN_KEY          NUMBER;              --処理区分キー\r\n  V_BIKO                   NVARCHAR2(256);      --備考\r\n  V_IDO_TODOKE_KBN_MEI     NVARCHAR2(256);      --異動届出区分名称\r\n  -- 日付変換サブルーチン用変数(KKAPK0020.FDAYEDIT)\r\n  BRTN               BOOLEAN;                   -- 関数用変数\r\n  io_WAREKIHIZUKE    PLS_INTEGER := NULL;\r\n  io_SEIREKIHIZUKE   PLS_INTEGER := NULL;\r\n  o_EDIT_GYYMMDD1    NVARCHAR2(16);\r\n  o_EDIT_GYYMMDD2    NVARCHAR2(16);\r\n  o_EDIT_GYYMMDD3    NVARCHAR2(16);\r\n  o_KJ_GENGO         NVARCHAR2(16);\r\n  o_KG_GENGO         NVARCHAR2(16);\r\n  o_WAREKI_YY        PLS_INTEGER;\r\n  o_SEIREKI_YYYY     PLS_INTEGER;\r\n  o_WAREKI_GYYMM     PLS_INTEGER;\r\n  o_MM               PLS_INTEGER;\r\n  o_DD               PLS_INTEGER;\r\n  o_WAREKIHIZUKE     PLS_INTEGER;\r\n  o_SEIREKIHIZUKE    PLS_INTEGER;\r\n--  WK_KOJIN_NO        PLS_INTEGER;\r\n  WK_KOJIN_NO        NUMBER;\r\n  WK_FFLG            PLS_INTEGER;\r\n  WK_IDO_JIYU        PLS_INTEGER;\r\n  J_IDOMOTO          NUMBER;\r\n  J_KOJIN_NO         NVARCHAR2(1000);\r\n  WK_RIREKI_RENBAN   PLS_INTEGER;\r\n  NJOKEN4            NUMBER;\r\n  o_RETURNCD         NUMBER;\r\n  NBIKOJKN           NUMBER;\r\n  NSHORI_NO          NUMBER;\r\n  NKADO_BI7          NUMBER;\r\n  RTN_CD             NUMBER;\r\n  o_tITEM                 A_CONS_PRM;\r\n  --変数を追加\r\n  NYOBIDASHI_KBN     NUMBER              := 1;            --変数_呼び出し区分\r\n--  NSEDAINO           NUMBER              := NULL;         --変数_世帯番号\r\n  NSETAINO           NUMBER              := NULL;         --変数_世帯番号\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--  VIDOJIYU           VARCHAR2(2)         := NULL;         --変数_異動者異動事由\r\n  VIDOJIYU           VARCHAR2(3)         := NULL;         --変数_異動者異動事由\r\n  VIDOUKOJINNO       VARCHAR2(2000)       := NULL;         --変数_異動者宛名番号群\r\n  IINDEX             PLS_INTEGER         := 0;            --配列用index\r\n  --配列を追加\r\n  TYPE MTSETAINO_TBL IS TABLE OF NUMBER INDEX BY BINARY_INTEGER;\r\n  MNSETAINO          MTSETAINO_TBL;         --配列_世帯番号[i]\r\n  TYPE MTIDOUKOJINNO_TBL IS TABLE OF VARCHAR2(2000) INDEX BY BINARY_INTEGER;\r\n  MVIDOUKOJINNO      MTIDOUKOJINNO_TBL;     --配列_異動者宛名番号群[i]\r\n  MVIDOJIYU          MTIDOUKOJINNO_TBL;     --配列_異動事由[i]\r\n  REBT_JUKIJOHO      JIBTJUKIJOHO%ROWTYPE;\r\n  R_BUPD_JUKIJOHO    JIBWBUPD_JUKIJOHO%ROWTYPE;\r\n  NIDO_KBN           NUMBER(1,0);          --異動区分\r\n  VKEY_JOHO          NVARCHAR2(30);        --キー情報\r\n--2023/06/27 ZCZL.WANGM ADD Start 0.2.000.001:住記系追加作業\r\n  NREPORTCODE2       NUMBER;\r\n  NSHORIKEKKA        NUMBER;\r\n--2023/06/27 ZCZL.WANGM ADD End\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n  VCHOSHACODE        KKNTWS.CHOSHACODE%TYPE;  -- 設置場所\r\n--2024/04/03 DIS.Wangrucheng Add start 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n  RJIBTJUKIRIREKI_INS     JIBTJUKIRIREKI%ROWTYPE;\r\n  NRIREKI_EDABAN          NUMBER;\r\n  NRIREKI_RENBAN          NUMBER;\r\n--2024/04/03 DIS.Wangrucheng Add end\r\n--2024/10/21 DIS.liuqimeng Add Start 0.3.000.000:IT_JIB_00229対応\r\n  VRYUIJIKO_1 NVARCHAR2(100);--留意事項_1\r\n  VRYUIJIKO_2 NVARCHAR2(100);--留意事項_2\r\n  VRYUIJIKO_3 NVARCHAR2(100);--留意事項_3\r\n--2024/10/21 DIS.liuqimeng Add end\r\n--2024/10/22 DIS.Gaohaobo Add 0.3.040.000:IT_JIB_00454対応\r\n  VNEXTVAL  NUMBER; -- 一回届出番号シーケンス\r\n--2025/05/09 DIS.LIJING Add start 1.0.003.000:保守QA #14884対応\r\n  NCOUNT    NUMBER;\r\n--2025/09/12 CTC.liu update start 1.0.017.002:新WizLIFE保守対応 QA21118\r\n  TUSHORENBAN   NUMBER;\r\n--2025/10/14 CTC.liu add start 1.0.022.002:新WizLIFE保守対応 QA21647\r\n  KAISEI_IDO_JIYU   NUMBER;\r\n  KAISEI_IDO_TODOKE_BI   NUMBER;\r\n  KAISEI_KAISEI_REN   NUMBER;\r\n  KAISEI_RIREKI_RENBAN   NUMBER;\r\n--2026/1/7 CTC.zhang add start 1.0.105.000:新WizLIFE保守対応 QA25517\r\n  RIREKI_RIREKI_RENBAN   NUMBER;\r\n--2025/10/29 CTC.liu add start 1.0.025.002:新WizLIFE保守対応 QA22490\r\n  GAB_RIREKI_RENBAN   NUMBER :=0;\r\n--2025/10/14 CTC.liu add end\r\n  CURSOR CUR_JIBTJUKIBIKO IS\r\n  SELECT *\r\n    FROM JIBTJUKIBIKO\r\n   WHERE RIREKI_RENBAN = (SELECT MAX(RIREKI_RENBAN)\r\n                            FROM JIBTJUKIBIKO)\r\n     AND SAISHIN_FLG = 1;\r\n\r\n  --2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00645対応\r\n--2025/07/14 CTC.zhang update start 1.0.010.006:新WizLIFE保守対応 QA17556\r\n--  CURSOR CUR_JIBWBUPD_BIKO IS\r\n  CURSOR CUR_JIBWBUPD_BIKO(i_IKOJIN_NO NUMBER) IS\r\n--2025/07/14 CTC.zhang update end\r\n  --SELECT *\r\n   -- FROM JIBWBUPD_BIKO\r\n   --WHERE ENTRY_ID = i_IENTRY_ID;\r\n   SELECT BIKO.*,JIYU.IDO_JIYU\r\n     FROM JIBWBUPD_BIKO BIKO\r\n   LEFT JOIN JIBWBUPD_JUKIIDO JIYU\r\n     on BIKO.KOJIN_NO = JIYU.KOJIN_NO and BIKO.ENTRY_ID = JIYU.ENTRY_ID\r\n--2025/07/14 CTC.zhang update start 1.0.010.006:新WizLIFE保守対応 QA17556\r\n--   WHERE BIKO.ENTRY_ID =  i_IENTRY_ID;\r\n   WHERE BIKO.ENTRY_ID =  i_IENTRY_ID\r\n   AND   BIKO.KOJIN_NO =  i_IKOJIN_NO;\r\n--2025/07/14 CTC.zhang update end\r\n--2024/12/6 CTC Update end\r\n--2024/01/25 DIS.liuqimeng Add end\r\n  -- ワーク住基異動カーソル宣言\r\n  CURSOR CUR_IDO (P_ENTRY_ID PLS_INTEGER) IS\r\n    SELECT JI.*,NVL(KK.KYU_KOJIN_NO,0) KYU_KOJIN_NO\r\n      FROM JIBWBUPD_JUKIIDO JI,JIBWBUPD_KYUKOJINNO KK\r\n     WHERE JI.ENTRY_ID = KK.ENTRY_ID(+)\r\n       AND JI.KOJIN_NO = KK.KOJIN_NO(+)\r\n       AND JI.ENTRY_ID = P_ENTRY_ID\r\n     ORDER BY SETAI_NO,KISAI_JUNI;\r\n  -- ワーク住基住所カーソル宣言\r\n  CURSOR C_JUSHO (P_ENTRY_ID PLS_INTEGER,P_KOJIN_NO NUMBER,P_FFLAG PLS_INTEGER) IS\r\n     SELECT ENTRY_ID,\r\n            KOJIN_NO,\r\n            JUSHO_REN,\r\n            OAZA_CD,\r\n            HONBAN,\r\n            EDABAN1,\r\n            EDABAN2,\r\n            EDABAN3,\r\n            KATAGAKI_CD,\r\n            GAIKU,\r\n            TOU,\r\n            GOU,\r\n            USER_CD,\r\n            JICHI_CD,\r\n            YUBIN_NO,\r\n            YUBIN_NOBC,\r\n--2024/08/13 DIS.huangyaoyu Update start 0.3.000.000:IT_JIB_00279対応\r\n--            BANCHI,\r\n--            CHOMEI,\r\n            CHOMEI,\r\n            BANCHI,\r\n--2024/08/13 DIS.huangyaoyu Update end\r\n            KATAGAKI,\r\n            NUSHI_HITTOSYA,\r\n            SYS_SAKUSEIBI,\r\n            SYS_KOSHINBI,\r\n            SYS_JIKAN,\r\n            SYS_SHOKUINKOJIN_NO,\r\n            SYS_TANMATSU_NO,\r\n            CHOMEI_KANA,\r\n            BANCHI_KANA,\r\n            KATAGAKI_KANA,\r\n            KATAGAKI_HIDE_FLG\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n           ,KETAPRM\r\n           ,KOKUMEI_CD\r\n--2024/01/25 DIS.liuqimeng Add end\r\n       FROM JIBWBUPD_JUKIJUSHO\r\n      WHERE ENTRY_ID = P_ENTRY_ID\r\n        AND KOJIN_NO = P_KOJIN_NO\r\n--2026/01/06 CTC.liu add start 1.0.105.002:新WizLIFE保守対応 QA24458\r\n--記載順位変更対象者のみ対象条件するため、追加\r\n        AND KATAGAKI_HIDE_FLG <> 3\r\n      UNION\r\n     SELECT P_ENTRY_ID,\r\n            KOJIN_NO,\r\n            JUSHO_REN,\r\n            OAZA_CD,\r\n            HONBAN,\r\n            EDABAN1,\r\n            EDABAN2,\r\n            EDABAN3,\r\n            KATAGAKI_CD,\r\n            GAIKU,\r\n            TOU,\r\n            GOU,\r\n            USER_CD,\r\n            JICHI_CD,\r\n            YUBIN_NO,\r\n            YUBIN_NOBC,\r\n--2024/08/13 DIS.huangyaoyu Update start 0.3.000.000:IT_JIB_00279対応\r\n--            BANCHI,\r\n--            CHOMEI,\r\n            CHOMEI,\r\n            BANCHI,\r\n--2024/08/13 DIS.huangyaoyu Update end\r\n            KATAGAKI,\r\n            NUSHI_HITTOSYA,\r\n            SYS_SAKUSEIBI,\r\n            SYS_KOSHINBI,\r\n            SYS_JIKAN,\r\n            SYS_SHOKUINKOJIN_NO,\r\n            SYS_TANMATSU_NO,\r\n            CHOMEI_KANA,\r\n            BANCHI_KANA,\r\n            KATAGAKI_KANA,\r\n            KATAGAKI_HIDE_FLG\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n           ,KETAPRM\r\n           ,KOKUMEI_CD\r\n--2024/01/25 DIS.liuqimeng Add end\r\n       FROM JIBTJUKIJUSHO B\r\n      WHERE (KOJIN_NO,JUSHO_REN) IN (SELECT KOJIN_NO,\r\n                                            GENJUSHO_REN\r\n                                       FROM JIBWBUPD_JUKIIDO\r\n                                      WHERE KOJIN_NO = P_KOJIN_NO\r\n                                      UNION\r\n                                     SELECT KOJIN_NO,\r\n                                            ZENJUSHO_REN\r\n                                       FROM JIBWBUPD_JUKIIDO\r\n                                      WHERE KOJIN_NO = P_KOJIN_NO\r\n                                      UNION\r\n                                     SELECT KOJIN_NO,\r\n                                            TENNYUMAE_REN\r\n                                       FROM JIBWBUPD_JUKIIDO\r\n                                      WHERE KOJIN_NO = P_KOJIN_NO\r\n                                      UNION\r\n                                     SELECT KOJIN_NO,\r\n                                            TENNYU_MITODOKE_REN\r\n                                       FROM JIBWBUPD_JUKIIDO\r\n                                      WHERE KOJIN_NO = P_KOJIN_NO\r\n                                      UNION\r\n                                     SELECT KOJIN_NO,\r\n                                            HONSEKI_REN\r\n                                       FROM JIBWBUPD_JUKIIDO\r\n                                      WHERE KOJIN_NO = P_KOJIN_NO\r\n                                    --2025/02/19 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                                      UNION\r\n                                     SELECT KOJIN_NO,\r\n                                            SAISYUTOROKUJUSHO_REN\r\n                                       FROM JIBWBUPD_JUKIIDO\r\n                                      WHERE KOJIN_NO = P_KOJIN_NO\r\n                                      )\r\n        AND P_FFLAG = 1;\r\n  -- 転出証明データ取得カーソル\r\n  CURSOR C_TENSHUTSUKOJIN(P_JUMIN_CD NUMBER) IS\r\n    SELECT TENSHUTUCHI_JICHI_CD,\r\n           SAKUSEI_NENGAPPI,\r\n           SAKUSEI_RENBAN\r\n      FROM JIBTJNTENSHUTSUKOJIN\r\n     WHERE LPAD(TRIM(JUMINHYO_CD),11,'0') = LPAD(TO_NCHAR(P_JUMIN_CD),11,'0');\r\n\r\n  CURSOR C_TENSHUTSUKOJIN2(P_JICHI_CD NUMBER, P_NENGAPPI NUMBER, P_RENBAN NUMBER) IS\r\n    SELECT SHORIZUMI_FLAG FROM JIBTJNTENSHUTSUKOJIN\r\n     WHERE TENSHUTUCHI_JICHI_CD = P_JICHI_CD AND\r\n           SAKUSEI_NENGAPPI     = P_NENGAPPI AND\r\n           SAKUSEI_RENBAN       = P_RENBAN;\r\n\r\n  CURSOR C_HOMUSHO(P_SETAI_NO NVARCHAR2,\r\n                   P_SYSDATE NUMBER,\r\n                   P_SYSTIME  NUMBER) IS\r\n    SELECT KOJIN_NO,\r\n           JINKAKU_KBN,\r\n           IDO_JIYU,\r\n           SYS_SHOKUINKOJIN_NO,\r\n           SYS_TANMATSU_NO\r\n      FROM JIBTJUKIIDO\r\n     WHERE SETAI_NO IN (P_SETAI_NO) AND\r\n           SHORIBI_KEY = P_SYSDATE AND\r\n           SHORI_JIKAN_KEY = P_SYSTIME;\r\n\r\n  CURSOR CUR_SHITEIJIYUIDO (P_ENTRY_ID PLS_INTEGER) IS\r\n    SELECT JI.*,\r\n           AK.KOJIN_NO                   ATENA_KOJIN_NO,\r\n           AK.RIREKI_RENBAN              ATENA_RIREKI_RENBAN,\r\n           AK.TEKIYO_BI                  ATENA_TEKIYO_BI,\r\n           AK.TOROKU_GYOMU               ATENA_TOROKU_GYOMU,\r\n           AK.JUMINHYO_CD                ATENA_JUMINHYO_CD,\r\n           AK.SETAI_NO                   ATENA_SETAI_NO,\r\n           AK.GENZON_KBN                 ATENA_GENZON_KBN,\r\n           AK.JINKAKU_KBN                ATENA_JINKAKU_KBN,\r\n           AK.KOKUSEKI_CD                ATENA_KOKUSEKI_CD,\r\n           AK.SHISHO_CD                  ATENA_SHISHO_CD,\r\n           AK.CHIKU_CD                   ATENA_CHIKU_CD,\r\n           AK.GYOSEIKU_CD                ATENA_GYOSEIKU_CD,\r\n           AK.HAN_CD                     ATENA_HAN_CD,\r\n           AK.SHOGAKU_CD                 ATENA_SHOGAKU_CD,\r\n           AK.CHUGAKU_CD                 ATENA_CHUGAKU_CD,\r\n           AK.TOHYOKU_CD                 ATENA_TOHYOKU_CD,\r\n           AK.SANTEIDANTAI_CD            ATENA_SANTEIDANTAI_CD,\r\n           AK.SEINENGAPI                 ATENA_SEINENGAPI,\r\n           AK.WAREKI_SEINENGAPI          ATENA_WAREKI_SEINENGAPI,\r\n           AK.HYOJI_SEINENGAPI           ATENA_HYOJI_SEINENGAPI,\r\n           AK.SEIBETSU                   ATENA_SEIBETSU,\r\n           AK.USER_CD                    ATENA_USER_CD,\r\n           AK.OAZA_CD                    ATENA_OAZA_CD,\r\n           AK.HONBAN                     ATENA_HONBAN,\r\n           AK.EDABAN1                    ATENA_EDABAN1,\r\n           AK.EDABAN2                    ATENA_EDABAN2,\r\n           AK.EDABAN3                    ATENA_EDABAN3,\r\n           AK.KATAGAKI_CD                ATENA_KATAGAKI_CD,\r\n           AK.GAIKU                      ATENA_GAIKU,\r\n           AK.TOU                        ATENA_TOU,\r\n           AK.GOU                        ATENA_GOU,\r\n           AK.JICHI_CD                   ATENA_JICHI_CD,\r\n           AK.SHIMEI_KANA                ATENA_SHIMEI_KANA,\r\n           AK.SHIMEI_KANJI               ATENA_SHIMEI_KANJI,\r\n           AK.YUBIN_NO                   ATENA_YUBIN_NO,\r\n           AK.YUBIN_NOBC                 ATENA_YUBIN_NOBC,\r\n           AK.CHOMEI                     ATENA_CHOMEI,\r\n           AK.BANCHI                     ATENA_BANCHI,\r\n           AK.KATAGAKI                   ATENA_KATAGAKI,\r\n           AK.DAIHYO_KATAGAKI            ATENA_DAIHYO_KATAGAKI,\r\n           AK.DAIHYO_SHIMEI              ATENA_DAIHYO_SHIMEI,\r\n           AK.TEL_NO                     ATENA_TEL_NO,\r\n           AK.TEL_KBN                    ATENA_TEL_KBN,\r\n           AK.FAX_NO                     ATENA_FAX_NO,\r\n           AK.MAIL_ADS                   ATENA_MAIL_ADS,\r\n           AK.YUHEN_KBN                  ATENA_YUHEN_KBN,\r\n           AK.TOROKU_JIYU                ATENA_TOROKU_JIYU,\r\n           AK.JUFUKU_KOJIN_NO            ATENA_JUFUKU_KOJIN_NO,\r\n           AK.HONMYO_KANA                ATENA_HONMYO_KANA,\r\n           AK.HONMYO_KANJI               ATENA_HONMYO_KANJI,\r\n           AK.SYS_SAKUSEIBI              ATENA_SYS_SAKUSEIBI,\r\n           AK.SYS_KOSHINBI               ATENA_SYS_KOSHINBI,\r\n           AK.SYS_JIKAN                  ATENA_SYS_JIKAN,\r\n           AK.SYS_SHOKUINKOJIN_NO        ATENA_SYS_SHOKUINKOJIN_NO,\r\n           AK.SYS_TANMATSU_NO            ATENA_SYS_TANMATSU_NO,\r\n           AK.CHOMEI_KANA                ATENA_CHOMEI_KANA,\r\n           AK.BANCHI_KANA                ATENA_BANCHI_KANA,\r\n           AK.KATAGAKI_KANA              ATENA_KATAGAKI_KANA,\r\n           AK.KATAGAKI_HIDE_FLG          ATENA_KATAGAKI_HIDE_FLG,\r\n           AK.GAIJI_FLG                  ATENA_GAIJI_FLG,\r\n           AK.HOJINSOSHIKI_CD            ATENA_HOJINSOSHIKI_CD,\r\n           AK.JE_KOKUHOSHISANWARI_KBN    ATENA_JE_KOKUHOSHISANWARI_KBN,\r\n           AK.JE_JINTEKIGENMEN_KBN       ATENA_JE_JINTEKIGENMEN_KBN,\r\n           AK.JE_SHOYUSHAKEISHONIN_KBN   ATENA_JE_SHOYUSHAKEISHONIN_KBN,\r\n           AK.JE_LINK_KOJIN_NO           ATENA_JE_LINK_KOJIN_NO,\r\n           AK.JE_NAYOSE_NO               ATENA_JE_NAYOSE_NO,\r\n           AK.YOBI1_CD                   ATENA_YOBI1_CD,\r\n           AK.YOBI2_CD                   ATENA_YOBI2_CD,\r\n           AK.YOBI3_CD                   ATENA_YOBI3_CD,\r\n           AK.YOBI4_CD                   ATENA_YOBI4_CD,\r\n           AK.YOBI5_CD                   ATENA_YOBI5_CD,\r\n           AK.YOBI1_CH                   ATENA_YOBI1_CH,\r\n           AK.YOBI2_CH                   ATENA_YOBI2_CH,\r\n           AK.YOBI3_CH                   ATENA_YOBI3_CH,\r\n           AK.YOBI4_CH                   ATENA_YOBI4_CH,\r\n           AK.YOBI5_CH                   ATENA_YOBI5_CH\r\n\r\n          ,AK.TOUGOU_NO                  ATENA_TOUGOU_NO\r\n          ,AK.SEIDO_HOJIN_NO             ATENA_SEIDO_HOJIN_NO\r\n          ,AK.SEIDO_KOJIN_NO             ATENA_SEIDO_KOJIN_NO\r\n          ,AK.ZOKUGARACD1                ATENA_ZOKUGARA_CD1\r\n          ,AK.ZOKUGARACD2                ATENA_ZOKUGARA_CD2\r\n          ,AK.ZOKUGARACD3                ATENA_ZOKUGARA_CD3\r\n          ,AK.ZOKUGARACD4                ATENA_ZOKUGARA_CD4\r\n          ,AK.ZOKUGARAKBN                ATENA_ZOKUGARA_KBN\r\n          ,AK.ZOKUGARAMEI                ATENA_ZOKUGARA_MEI\r\n          ,AK.JITSUZOKUGARAMEI           ATENA_JITSU_ZOKUGARA_MEI\r\n          ,JH.KYUUJI_KANA\r\n          ,JH.KYUUJI_KANJI\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n          ,AK.RIREKI_EDABAN              ATENA_RIREKI_EDABAN     --履歴枝番\r\n          ,AK.SAISHIN_FLG                ATENA_SAISHIN_FLG       --最新フラグ(0:最新でない 1:最新)\r\n          ,AK.TORIKESHI_FLG              ATENA_TORIKESHI_FLG       --取消フラグ(0:取消でない 1:取消)\r\n          ,AK.JOHYOYODATA_FLG            ATENA_JOHYOYODATA_FLG   --除票用データフラグ(0:住記データ 1:除票用データ)\r\n          ,AK.KETAPRM                    ATENA_KETAPRM           --住所_桁取パラメータ（基本データリスト用項目）\r\n          ,AK.KOKUMEI_CD                 ATENA_KOKUMEI_CD        --住所_国名コード（住登外者宛名番号管理の基本データリスト用項目）\r\n          ,JH.KYUUJI_KANA_FLG            JH_KYUUJI_KANA_FLG                            --旧氏カナフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n      FROM JIBTJUKIIDO JI,JIBTJUKIKIHON AK\r\n          ,JIBTJUKIJOHO JH\r\n     WHERE JI.KOJIN_NO = AK.KOJIN_NO\r\n       AND JI.KOJIN_NO IN (SELECT IJI.KOJIN_NO\r\n                             FROM JIBWBUPD_JUKIIDO IJI,\r\n                                  JIBWBUPD_KYUKOJINNO IKK\r\n                            WHERE IJI.ENTRY_ID = IKK.ENTRY_ID(+)\r\n                              AND IJI.KOJIN_NO = IKK.KOJIN_NO(+)\r\n                              AND IJI.ENTRY_ID = P_ENTRY_ID\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--                              AND IJI.IDO_JIYU IN (15,16,28))\r\n--2025/6/24 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n                              --AND IJI.IDO_JIYU IN (150,160,280))\r\n                              AND IJI.IDO_JIYU IN (150,160,280,191))\r\n       AND AK.KOJIN_NO = JH.KOJIN_NO(+)\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--       AND AK.RIREKI_RENBAN = JH.RIREKI_RENBAN(+);\r\n       AND AK.RIREKI_RENBAN = JH.RIREKI_RENBAN(+)\r\n       AND AK.RIREKI_EDABAN = JH.RIREKI_EDABAN(+);\r\n--2024/01/25 DIS.liuqimeng Update end\r\n  -- 通称履歴(BUPD用)カーソル宣言\r\n  CURSOR C_BUPD_TSUSHORIREKI (P_ENTRY_ID PLS_INTEGER,P_KOJIN_NO NUMBER,P_RIREKI_RENBAN NUMBER) IS\r\n    SELECT * FROM JIBWBUPD_TSUSHORIREKI\r\n     WHERE ENTRY_ID = P_ENTRY_ID\r\n       AND KOJIN_NO = P_KOJIN_NO\r\n       AND RIREKI_RENBAN = P_RIREKI_RENBAN;\r\n\r\n  -- 通称履歴カーソル宣言\r\n  CURSOR C_TSUSHORIREKI (P_KOJIN_NO NUMBER,P_RIREKI_RENBAN NUMBER) IS\r\n    SELECT * FROM JIBTTSUSHORIREKI\r\n     WHERE KOJIN_NO = P_KOJIN_NO\r\n--2025/09/12 CTC.liu update start 1.0.017.002:新WizLIFE保守対応 QA21118\r\n       --AND RIREKI_RENBAN = P_RIREKI_RENBAN;\r\n      AND RIREKI_RENBAN = P_RIREKI_RENBAN\r\n      AND RIREKI_EDABAN = (SELECT MAX(RIREKI_EDABAN)\r\n                            FROM JIBTTSUSHORIREKI\r\n                            WHERE  KOJIN_NO = P_KOJIN_NO\r\n                            AND    RIREKI_RENBAN = P_RIREKI_RENBAN);\r\n--2025/09/12 CTC.liu update end\r\n\r\n  ---------------------------------------------------------------\r\n  -- システム条件取得\r\n  ---------------------------------------------------------------\r\n  PROCEDURE PROC_GET_SYSTEMJOKEN\r\n  IS\r\n  BEGIN\r\n    NRTN := KKAPK0030.FCTGetR('JIB','SYSTEM_JOKEN','0002','2',o_tITEM);\r\n    IF NRTN <> 0 THEN\r\n      ITASHARENKEI := 0;\r\n    ELSE\r\n      ITASHARENKEI := o_tITEM(1);\r\n    END IF;\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n      ITASHARENKEI := 0;\r\n  END PROC_GET_SYSTEMJOKEN;\r\n\r\n  PROCEDURE PROC_GET_SYSTEMJOKEN2\r\n  IS\r\n  BEGIN\r\n    NRTN := KKAPK0030.FCTGetR('JIB','SYSTEM_JOKEN','0001','71',o_tITEM);\r\n    IF NRTN <> 0 THEN\r\n      NJOKEN := 0;\r\n    ELSE\r\n      NJOKEN := o_tITEM(1);\r\n    END IF;\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n      NJOKEN := 0;\r\n  END PROC_GET_SYSTEMJOKEN2;\r\n\r\n  PROCEDURE PROC_GET_SYSTEMJOKEN3\r\n  IS\r\n  BEGIN\r\n       BEGIN\r\n            SELECT KADO_BI\r\n            INTO NKADO_BI6\r\n            FROM JIBTKADOBI_KANRI\r\n           WHERE RENBAN = 6;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n            NKADO_BI6 := 0;\r\n        END;\r\n\r\n       BEGIN\r\n            SELECT KADO_BI\r\n            INTO NKADO_BI5\r\n            FROM JIBTKADOBI_KANRI\r\n           WHERE RENBAN = 5;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n            NKADO_BI5 := 0;\r\n        END;\r\n\r\n       BEGIN\r\n            SELECT KADO_BI\r\n            INTO NKADO_BI7\r\n            FROM JIBTKADOBI_KANRI\r\n           WHERE RENBAN = 7;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n            NKADO_BI7 := 99999999;\r\n        END;\r\n\r\n       BEGIN\r\n            NRTN := KKAPK0030.FCTGetR('JIB','SYSTEM_JOKEN','0001','104',o_tITEM);\r\n            IF NRTN <> 0 THEN\r\n              NJOKEN2 := 1;\r\n            ELSE\r\n              NJOKEN2 := o_tITEM(1);\r\n            END IF;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n               NJOKEN2 := 1;\r\n        END;\r\n  END PROC_GET_SYSTEMJOKEN3;\r\n---------------------------------------------------------------\r\n-- システム条件取得(1,111)\r\n---------------------------------------------------------------\r\n  PROCEDURE PROC_GET_SYSTEMJOKEN111\r\n  IS\r\n  BEGIN\r\n    NRTN := KKAPK0030.FCTGetR('JIB','SYSTEM_JOKEN','0001','111',o_tITEM);\r\n    IF NRTN <> 0 THEN\r\n      NJOKEN111 := 0;\r\n    ELSE\r\n      NJOKEN111 := o_tITEM(1);\r\n    END IF;\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n      NJOKEN111 := 0;\r\n  END PROC_GET_SYSTEMJOKEN111;\r\n---------------------------------------------------------------\r\n-- システム条件取得(2,3)\r\n---------------------------------------------------------------\r\n  PROCEDURE PROC_GET_SYSTEMJOKEN4\r\n  IS\r\n  BEGIN\r\n    NRTN := KKAPK0030.FCTGetR('JIB','SYSTEM_JOKEN','0002','3',o_tITEM);\r\n    IF NRTN <> 0 THEN\r\n      NJOKEN4 := 0;\r\n    ELSE\r\n      NJOKEN4 := o_tITEM(1);\r\n    END IF;\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n      NJOKEN4 := 0;\r\n  END PROC_GET_SYSTEMJOKEN4;\r\n----------------------------------------------------------\r\n--日付の転換関数\r\n----------------------------------------------------------\r\n  FUNCTION FUNCDAYEDIT(NSEIREKI IN NUMBER) RETURN NVARCHAR2\r\n  IS\r\n\r\n    VEDIT_DAY          NVARCHAR2(12)     := '';--戻り値\r\n\r\n  BEGIN\r\n    io_WAREKIHIZUKE  := NULL;\r\n    io_SEIREKIHIZUKE := NSEIREKI;\r\n    IF NSEIREKI IS NOT NULL AND\r\n      NSEIREKI > 0 THEN\r\n      BRTN := KKAPK0020.FDAYEDIT(io_WAREKIHIZUKE,\r\n                              io_SEIREKIHIZUKE,\r\n                              o_EDIT_GYYMMDD1,\r\n                              o_EDIT_GYYMMDD2,\r\n                              o_EDIT_GYYMMDD3,\r\n                              o_KJ_GENGO,\r\n                              o_KG_GENGO,\r\n                              o_WAREKI_YY,\r\n                              o_SEIREKI_YYYY,\r\n                              o_WAREKI_GYYMM,\r\n                              o_MM,\r\n                              o_DD,\r\n                              o_WAREKIHIZUKE,\r\n                              o_SEIREKIHIZUKE);\r\n      IF BRTN THEN\r\n        VEDIT_DAY := o_EDIT_GYYMMDD3;\r\n      END IF;\r\n    END IF;\r\n  RETURN(VEDIT_DAY);\r\n  END FUNCDAYEDIT;\r\n  -- 発行注意を旧世帯から新しい世帯にコピーする\r\n  PROCEDURE PROC_COPY_HAKKOCHUI(NSETAI_FROM IN NUMBER, NSETAI_TO IN NUMBER)\r\n  IS\r\n    R_HAKKOCHUI   JIBTHAKKOCHUI%ROWTYPE;\r\n  BEGIN\r\n    -- 旧世帯の発行注意文を取得\r\n    SELECT *\r\n      INTO R_HAKKOCHUI\r\n      FROM JIBTHAKKOCHUI\r\n     WHERE SETAI_NO = NSETAI_FROM;\r\n\r\n    -- 新世帯の世帯番号で発行注意文を作成\r\n    INSERT\r\n      INTO JIBTHAKKOCHUI\r\n           (SETAI_NO,\r\n            HAKKO_CHUI_BUN,\r\n            SYS_SAKUSEIBI,\r\n            SYS_KOSHINBI,\r\n            SYS_JIKAN,\r\n            SYS_SHOKUINKOJIN_NO,\r\n            SYS_TANMATSU_NO)\r\n    VALUES (NSETAI_TO,\r\n            R_HAKKOCHUI.HAKKO_CHUI_BUN,\r\n            i_SHORIBI,\r\n            0,\r\n            I_SYSTIME,\r\n            i_NSHOKUIN,\r\n            i_NTANMATSU_NO);\r\n\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n      NULL;\r\n  END PROC_COPY_HAKKOCHUI;\r\n\r\nBEGIN\r\n  -- システム条件取得\r\n  PROC_GET_SYSTEMJOKEN;\r\n  PROC_GET_SYSTEMJOKEN2;\r\n\r\n  PROC_GET_SYSTEMJOKEN3;\r\n  PROC_GET_SYSTEMJOKEN111;\r\n  PROC_GET_SYSTEMJOKEN4;\r\n--2024/10/22 DIS.Gaohaobo Add 0.3.040.000:IT_JIB_00454対応\r\n  SELECT JIBSOTODOKEDE_SEQ.NEXTVAL INTO VNEXTVAL FROM DUAL;\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n  --設置場所取得\r\n  BEGIN\r\n    SELECT CHOSHACODE\r\n      INTO VCHOSHACODE\r\n      FROM KKNTWS\r\n     WHERE WSNUM = i_NTANMATSU_NO;\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n      VCHOSHACODE := NULL;\r\n  END;\r\n--2024/01/25 DIS.liuqimeng Add end\r\n--2023/06/27 ZCZL.WANGM ADD Start 0.2.000.001:住記系追加作業\r\n  --入力票コード−異動事由を取得\r\n  BEGIN\r\n    SELECT REPORTCODE2\r\n      INTO NREPORTCODE2\r\n      FROM KKFTENTRYLIST\r\n     WHERE GYOMUCODE = 'JIB'\r\n       AND ENTRYID = i_IENTRY_ID;\r\n\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n    NREPORTCODE2 := 0;\r\n  END;\r\n--2023/06/27 ZCZL.WANGM ADD End\r\n  --------------------------------------------------------------\r\n  -- 異動対象者の世帯番号を取得する\r\n  -------------------------------------------------------------\r\n\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--  IF i_IDO_JIYU = 24 AND NKADO_BI5 <= I_SYSDATE THEN\r\n--    WK_IDO_JIYU := 28;\r\n  IF i_IDO_JIYU = 240 AND NKADO_BI5 <= I_SYSDATE THEN\r\n    WK_IDO_JIYU := 280;\r\n--2024/01/25 DIS.liuqimeng Update end\r\n  ELSE\r\n    WK_IDO_JIYU := i_IDO_JIYU;\r\n  END IF;\r\n  SELECT DISTINCT SETAI_NO\r\n    INTO T_TARGET_SETAI_NO\r\n    FROM JIBWBUPD_JUKIIDO\r\n    WHERE IDO_JIYU = WK_IDO_JIYU\r\n     AND ENTRY_ID = i_IENTRY_ID;\r\n    BEGIN\r\n         SELECT JINKAKU_KBN\r\n           INTO T_NUSHI_JINKAKU_KBN1\r\n           FROM JIBTJUKIIDO\r\n          WHERE SETAI_NO = T_TARGET_SETAI_NO\r\n            AND NUSHI_KBN = 1\r\n            AND GENZON_KBN = 0;\r\n    EXCEPTION\r\n         WHEN OTHERS THEN\r\n              T_NUSHI_JINKAKU_KBN1 := 9;\r\n    END;\r\n     BEGIN\r\n         SELECT JINKAKU_KBN\r\n           INTO T_NUSHI_JINKAKU_KBN2\r\n           FROM JIBTJUKIIDO\r\n          WHERE SETAI_NO = (SELECT DISTINCT SETAI_NO\r\n                              FROM JIBWBUPD_JUKIIDO\r\n                             WHERE SETAI_NO <> T_TARGET_SETAI_NO\r\n                               AND ENTRY_ID = i_IENTRY_ID)\r\n            AND NUSHI_KBN = 1\r\n            AND GENZON_KBN = 0;\r\n    EXCEPTION\r\n         WHEN OTHERS THEN\r\n              T_NUSHI_JINKAKU_KBN2 := 9;\r\n    END;\r\n\r\n\r\n  -- 帰化等の情報を取得するカーソル\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--  IF i_IDO_JIYU IN (15,16,24) AND NKADO_BI5 <= I_SYSDATE THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n  --IF i_IDO_JIYU IN (150,160,240) AND NKADO_BI5 <= I_SYSDATE THEN\r\n  IF i_IDO_JIYU IN (150,160,240,191) AND NKADO_BI5 <= I_SYSDATE THEN\r\n    J_IDOMOTO := 0;\r\n    J_KOJIN_NO := NULL;\r\n    NBIKOJKN := 0;\r\n    BEGIN\r\n      NRTN := KKAPK0030.FCTGetR('JIB','SYSTEM_JOKEN','0001','9009',o_tITEM);\r\n      IF NRTN <> 0 THEN\r\n        NBIKOJKN := 0;\r\n      ELSE\r\n        NBIKOJKN := o_tITEM(1);\r\n      END IF;\r\n    EXCEPTION\r\n      WHEN OTHERS THEN\r\n        NBIKOJKN := 0;\r\n    END;\r\n    FOR CR_SHITEIJIYUIDO IN CUR_SHITEIJIYUIDO(i_IENTRY_ID) LOOP\r\n      --更新前の内容を住記異動累積ワークテーブル（JIBWIDORUISEKI）に書込む\r\n      INSERT INTO JIBWIDORUISEKI VALUES\r\n        ( 'B',\r\n          CR_SHITEIJIYUIDO.ATENA_KOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n          CR_SHITEIJIYUIDO.ATENA_RIREKI_EDABAN,    --履歴枝番\r\n          CR_SHITEIJIYUIDO.ATENA_SAISHIN_FLG,      --最新フラグ\r\n          CR_SHITEIJIYUIDO.ATENA_TORIKESHI_FLG,    --取消フラグ\r\n          CR_SHITEIJIYUIDO.ATENA_JOHYOYODATA_FLG,  --除票用データフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n          CR_SHITEIJIYUIDO.ATENA_TEKIYO_BI,\r\n          CR_SHITEIJIYUIDO.ATENA_TOROKU_GYOMU,\r\n          CR_SHITEIJIYUIDO.ATENA_SETAI_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_GENZON_KBN,\r\n          CR_SHITEIJIYUIDO.JUN_SETAI_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JINKAKU_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_KOKUSEKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHISHO_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHIKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_GYOSEIKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_HAN_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHOGAKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHUGAKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_TOHYOKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SANTEIDANTAI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_WAREKI_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_HYOJI_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_SEIBETSU,\r\n          CR_SHITEIJIYUIDO.ATENA_USER_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_OAZA_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_HONBAN,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN1,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN2,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN3,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_GAIKU,\r\n          CR_SHITEIJIYUIDO.ATENA_TOU,\r\n          CR_SHITEIJIYUIDO.ATENA_GOU,\r\n          CR_SHITEIJIYUIDO.ATENA_JICHI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.ATENA_YUBIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_YUBIN_NOBC,\r\n          CR_SHITEIJIYUIDO.ATENA_CHOMEI,\r\n          CR_SHITEIJIYUIDO.ATENA_BANCHI,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI,\r\n          CR_SHITEIJIYUIDO.ATENA_DAIHYO_KATAGAKI,\r\n          CR_SHITEIJIYUIDO.ATENA_DAIHYO_SHIMEI,\r\n          CR_SHITEIJIYUIDO.ATENA_TEL_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_TEL_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_FAX_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_MAIL_ADS,\r\n          CR_SHITEIJIYUIDO.ATENA_YUHEN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_TOROKU_JIYU,\r\n          CR_SHITEIJIYUIDO.JUMINHYO_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD1,\r\n          CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD2,\r\n          CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD3,\r\n          CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD4,\r\n          CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_MEI,\r\n          CR_SHITEIJIYUIDO.ATENA_JITSU_ZOKUGARA_MEI,\r\n          CR_SHITEIJIYUIDO.KISAI_JUNI,\r\n          CR_SHITEIJIYUIDO.IDO_BI,\r\n          CR_SHITEIJIYUIDO.IDO_JIYU,\r\n          CR_SHITEIJIYUIDO.IDO_TODOKE_BI,\r\n          CR_SHITEIJIYUIDO.IDO_TODOKE_KBN,\r\n          CR_SHITEIJIYUIDO.JUTEI_BI,\r\n          CR_SHITEIJIYUIDO.JUTEI_JIYU,\r\n          CR_SHITEIJIYUIDO.JUTEI_TODOKEDE_BI,\r\n          CR_SHITEIJIYUIDO.JUTEI_TODOKEDE_KBN,\r\n          CR_SHITEIJIYUIDO.GENJUSHO_REN,\r\n          CR_SHITEIJIYUIDO.ZENJUSHO_REN,\r\n          CR_SHITEIJIYUIDO.TENNYUMAE_REN,\r\n          CR_SHITEIJIYUIDO.TENNYU_MITODOKE_REN,\r\n          CR_SHITEIJIYUIDO.HONSEKI_REN,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_BI,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_TODOKEDE_BI,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_TODOKEDE_KBN,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_REN,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_BI,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_TSUCHI_BI,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN,\r\n          CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_REN,\r\n          CR_SHITEIJIYUIDO.JUMIN_NARU,\r\n          CR_SHITEIJIYUIDO.JUMIN_NARU_JIYU,\r\n          CR_SHITEIJIYUIDO.JUMIN_NARU_TODOKEDE_BI,\r\n          CR_SHITEIJIYUIDO.JUMIN_NARU_TODOKEDE_KBN,\r\n          CR_SHITEIJIYUIDO.JUMIN_NAKUNARU,\r\n          CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_JIYU,\r\n          CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_TODOKEDE_BI,\r\n          CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_TODOKEDE_KBN,\r\n          CR_SHITEIJIYUIDO.SHIBOBI_FUSHO_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_HONMYO_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_HONMYO_KANJI,\r\n          CR_SHITEIJIYUIDO.NUSHI_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.NUSHI_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.BIKO,\r\n          CR_SHITEIJIYUIDO.KAISEI_BI,\r\n          CR_SHITEIJIYUIDO.KAISEI_REN,\r\n          CR_SHITEIJIYUIDO.KYU_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.KYU_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.SHORIBI_KEY,\r\n          CR_SHITEIJIYUIDO.SHORI_JIKAN_KEY,\r\n          CR_SHITEIJIYUIDO.SHORI_KBN_KEY,\r\n          CR_SHITEIJIYUIDO.ZENBU_ICHIBU_KEY,\r\n          CR_SHITEIJIYUIDO.SHOKUINKOJIN_NO_KEY,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_SAKUSEIBI,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_KOSHINBI,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_JIKAN,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_SHOKUINKOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_TANMATSU_NO,\r\n          CR_SHITEIJIYUIDO.GOMI_CD,\r\n          CR_SHITEIJIYUIDO.SINYO_CD,\r\n          CR_SHITEIJIYUIDO.KOIKIKOFU_STOP_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHOMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_BANCHI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_HIDE_FLG,\r\n          CR_SHITEIJIYUIDO.ATENA_GAIJI_FLG,\r\n          CR_SHITEIJIYUIDO.ATENA_HOJINSOSHIKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_KOKUHOSHISANWARI_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_JINTEKIGENMEN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_SHOYUSHAKEISHONIN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_LINK_KOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_NAYOSE_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI1_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI2_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI3_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI4_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI5_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI1_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI2_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI3_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI4_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI5_CH,\r\n          I_SYSDATE2,\r\n          I_SYSTIME2,\r\n          i_NTANMATSU_NO,\r\n          CR_SHITEIJIYUIDO.ALP_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ALP_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.GAI_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.GAI_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.TSUSHOMEI_KANA,\r\n          CR_SHITEIJIYUIDO.TSUSHOMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.HEIKIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.HEIKIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.GAIKOKU_JUMIN_NARU,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_NO_SHUBETSU,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_CARD_NO,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_SHIKAKU_CD,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_SHURYO_BI,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_KIKAN_NEN,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_KIKAN_TSUKI,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_KIKAN_HI,\r\n          CR_SHITEIJIYUIDO.CARD_MANRYO_BI,\r\n          CR_SHITEIJIYUIDO.KBN_30_45,\r\n          CR_SHITEIJIYUIDO.KYOJYUCHI_UMU,\r\n          CR_SHITEIJIYUIDO.SEINENGAPI_FUSHO_KBN,\r\n          CR_SHITEIJIYUIDO.RYOKEN_BANGO,\r\n          CR_SHITEIJIYUIDO.RYOKEN_HAKKO_BI,\r\n          CR_SHITEIJIYUIDO.JORIKU_KYOKA_BI,\r\n          CR_SHITEIJIYUIDO.JUMIN_NUSHI_SHIMEI,\r\n          CR_SHITEIJIYUIDO.NUSHI_KBN\r\n\r\n         ,CR_SHITEIJIYUIDO.ATENA_TOUGOU_NO\r\n         ,CR_SHITEIJIYUIDO.SEIDO_KOJIN_NO\r\n         ,CR_SHITEIJIYUIDO.ATENA_SEIDO_HOJIN_NO\r\n         ,CR_SHITEIJIYUIDO.KYUUJI_KANA\r\n         ,CR_SHITEIJIYUIDO.KYUUJI_KANJI\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n         ,CR_SHITEIJIYUIDO.ATENA_KETAPRM                                 --住所_桁取パラメータ（基本データリスト用項目）\r\n         ,CR_SHITEIJIYUIDO.ATENA_KOKUMEI_CD                              --住所_国名コード（住登外者宛名番号管理の基本データリスト用項目）\r\n         ,VCHOSHACODE                                                     --入力場所\r\n         ,CR_SHITEIJIYUIDO.SHIMEI_KANA_FLG                            --氏名カナフラグ\r\n         ,CR_SHITEIJIYUIDO.TSUSHO_KANA_FLG                            --通称カナフラグ\r\n         ,CR_SHITEIJIYUIDO.JH_KYUUJI_KANA_FLG                            --旧氏カナフラグ\r\n         ,CR_SHITEIJIYUIDO.JIJITSUJONOSETAINUSHI_KANA                 --事実上の世帯主カナ\r\n         ,CR_SHITEIJIYUIDO.JIJITSUJONOSETAINUSHI_KANJI                --事実上の世帯主漢字\r\n         ,CR_SHITEIJIYUIDO.SAISYUTOROKUJUSHO_REN                      --最終登録住所地連番\r\n         ,CR_SHITEIJIYUIDO.SAISEIKISAI_DATE                           --再製記載年月日\r\n         ,CR_SHITEIJIYUIDO.SAISEIKISAIDATE_FUSHO_FLG                  --再製記載年月日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.SAISEIKISAIDATE_FUSHO_HYOKI                --再製記載年月日不詳表記\r\n         ,CR_SHITEIJIYUIDO.SAISEISHOJODATE                            --再製消除年月日\r\n         ,CR_SHITEIJIYUIDO.SAISEISHOJODATE_FUSHO_FLG                  --再製消除年月日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.SAISEISHOJODATE_FUSHO_HYOKI                --再製消除年月日不詳表記\r\n         ,CR_SHITEIJIYUIDO.KBN_30_46_47                               --法第30条46又は47区分\r\n         ,CR_SHITEIJIYUIDO.SEINENGAPI_FUSHO_HYOKI                     --生年月日不詳表記\r\n         ,CR_SHITEIJIYUIDO.IDO_BI_FUSHO_FLG                           --異動日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.IDO_BI_FUSHO_HYOKI                         --異動日不詳表記\r\n         ,CR_SHITEIJIYUIDO.JUTEI_BI_FUSHO_FLG                         --住定日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.JUTEI_BI_FUSHO_HYOKI                       --住定日不詳表記\r\n         ,CR_SHITEIJIYUIDO.JUMIN_NARU_FUSHO_FLG                       --住民となる日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.JUMIN_NARU_FUSHO_HYOKI                     --住民となる日不詳表記\r\n         ,CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_FUSHO_FLG                   --住民でなくなる日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_FUSHO_HYOKI                 --住民でなくなる日不詳表記\r\n         ,CR_SHITEIJIYUIDO.KAISEI_BI_FUSHO_FLG                        --改製日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.KAISEI_BI_FUSHO_HYOKI                      --改製日不詳表記\r\n         ,CR_SHITEIJIYUIDO.GAIKOKU_JUMIN_NARU_FUSHO_FLG               --外国人の住民となる日不詳フラグ\r\n         ,CR_SHITEIJIYUIDO.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI             --外国人の住民となる日不詳表記\r\n         ,CR_SHITEIJIYUIDO.SEIBETSU_FUSHO_KBN                         --性別不詳区分\r\n         ,CR_SHITEIJIYUIDO.IDO_JIYU_SHOSAI                            --異動事由詳細\r\n         ,CR_SHITEIJIYUIDO.IDOKOMOKU_1                                --異動項目_1\r\n         ,CR_SHITEIJIYUIDO.RYUIJIKO_1                                 --留意事項_1\r\n         ,CR_SHITEIJIYUIDO.IDOKOMOKU_2                                --異動項目_2\r\n         ,CR_SHITEIJIYUIDO.RYUIJIKO_2                                 --留意事項_2\r\n         ,CR_SHITEIJIYUIDO.IDOKOMOKU_3                                --異動項目_3\r\n         ,CR_SHITEIJIYUIDO.RYUIJIKO_3                                 --留意事項_3\r\n         ,CR_SHITEIJIYUIDO.RIREKI_SENTAKUFUKA_FLG                     --履歴選択不可フラグ\r\n         ,CR_SHITEIJIYUIDO.TODOKEDE_NO                                --届出番号\r\n         ,CR_SHITEIJIYUIDO.TORIKESHI_TODOKEDE_NO                      --取消届出番号\r\n--2024/01/25 DIS.liuqimeng Add end\r\n\r\n        );\r\n        ----更新前の内容を宛名異動累積ワークテーブル（GABWRUISEKIKIHON）に書込む\r\n        INSERT INTO GABWRUISEKIKIHON VALUES\r\n        ( 'B',\r\n          CR_SHITEIJIYUIDO.ATENA_KOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_RIREKI_RENBAN,\r\n          CR_SHITEIJIYUIDO.ATENA_TEKIYO_BI,\r\n          CR_SHITEIJIYUIDO.ATENA_TOROKU_GYOMU,\r\n          CR_SHITEIJIYUIDO.ATENA_JUMINHYO_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SETAI_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_GENZON_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JINKAKU_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_KOKUSEKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHISHO_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHIKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_GYOSEIKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_HAN_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHOGAKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHUGAKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_TOHYOKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SANTEIDANTAI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_WAREKI_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_HYOJI_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_SEIBETSU,\r\n          CR_SHITEIJIYUIDO.ATENA_USER_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_OAZA_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_HONBAN,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN1,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN2,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN3,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_GAIKU,\r\n          CR_SHITEIJIYUIDO.ATENA_TOU,\r\n          CR_SHITEIJIYUIDO.ATENA_GOU,\r\n          CR_SHITEIJIYUIDO.ATENA_JICHI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.ATENA_HONMYO_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_HONMYO_KANJI,\r\n          CR_SHITEIJIYUIDO.ATENA_YUBIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_YUBIN_NOBC,\r\n          CR_SHITEIJIYUIDO.ATENA_CHOMEI,\r\n          CR_SHITEIJIYUIDO.ATENA_BANCHI,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI,\r\n          CR_SHITEIJIYUIDO.ATENA_DAIHYO_KATAGAKI,\r\n          CR_SHITEIJIYUIDO.ATENA_DAIHYO_SHIMEI,\r\n          CR_SHITEIJIYUIDO.ATENA_TEL_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_TEL_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_FAX_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_MAIL_ADS,\r\n          CR_SHITEIJIYUIDO.ATENA_YUHEN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_TOROKU_JIYU,\r\n          CR_SHITEIJIYUIDO.ATENA_JUFUKU_KOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_SAKUSEIBI,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_KOSHINBI,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_JIKAN,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_SHOKUINKOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_TANMATSU_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_CHOMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_BANCHI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_HIDE_FLG,\r\n          CR_SHITEIJIYUIDO.ATENA_GAIJI_FLG,\r\n          CR_SHITEIJIYUIDO.ATENA_HOJINSOSHIKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_KOKUHOSHISANWARI_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_JINTEKIGENMEN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_SHOYUSHAKEISHONIN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_LINK_KOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_NAYOSE_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI1_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI2_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI3_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI4_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI5_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI1_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI2_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI3_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI4_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI5_CH,\r\n          I_SYSDATE2,\r\n          I_SYSTIME2,\r\n          i_NTANMATSU_NO\r\n\r\n         ,CR_SHITEIJIYUIDO.ATENA_TOUGOU_NO\r\n         ,CR_SHITEIJIYUIDO.ATENA_SEIDO_KOJIN_NO\r\n         ,CR_SHITEIJIYUIDO.ATENA_SEIDO_HOJIN_NO\r\n         ,CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD1\r\n         ,CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD2\r\n         ,CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD3\r\n         ,CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD4\r\n         ,CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_KBN\r\n         ,CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_MEI\r\n         ,CR_SHITEIJIYUIDO.ATENA_JITSU_ZOKUGARA_MEI\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n         ,0    --異動事由\r\n         ,0    --異動届出日\r\n         ,NULL --アルファベット氏名漢字\r\n         ,NULL --外国人氏名漢字\r\n         ,NULL --旧氏名カナ\r\n         ,NULL --旧氏名漢字\r\n         ,NULL --通称名カナ\r\n         ,NULL --通称名漢字\r\n         ,0    --通称カナ確認状況\r\n         ,0    --生年月日不詳区分\r\n         ,NULL --生年月日不詳表記\r\n         ,0    --住登外死亡年月日\r\n         ,0    --在留番号種別\r\n         ,NULL --在留カード番号\r\n         ,0    --在留資格コード\r\n         ,0    --在留期間終了年月日\r\n         ,0    --在留期間年\r\n         ,0    --在留期間月\r\n         ,0    --在留期間日\r\n         ,0    --統合宛名フラグ\r\n         ,0    --他業務参照不可フラグ\r\n         ,0    --独自施策システム等ID\r\n         ,0    --業務ID\r\n         ,0    --本支店区分\r\n         ,0    --前後区分\r\n         ,0    --法人番号公表の同意\r\n         ,0    --法人種別\r\n         ,0    --閉鎖等年月日\r\n         ,NULL --法人担当部署\r\n         ,NULL --代表者カナ\r\n         ,NULL --世帯主氏名漢字\r\n         ,0    --国名コード\r\n         ,NULL --桁パラメータ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n--2024/03/26 DIS.liuqimeng Add start 0.3.000.000:受入検証指摘対応\r\n         ,0    --法人管理番号\r\n         ,0    --設立年月日\r\n         ,0    --閉鎖等事由\r\n         ,NULL    --屋号\r\n--2024/03/26 DIS.liuqimeng Add end\r\n\r\n        );\r\n        ----異動累計用に更新前の内容を取得する\r\n        N_IDO_ZEN_JINKAKU_KBN := CR_SHITEIJIYUIDO.JINKAKU_KBN;     --異動前人格区分\r\n        N_IDO_ZEN_GENZON_KBN := CR_SHITEIJIYUIDO.GENZON_KBN;       --異動前現存区分\r\n        N_IDO_ZEN_NUSHI_KBN := CR_SHITEIJIYUIDO.NUSHI_KBN;         --異動前世帯主区分\r\n        N_IDO_ZEN_OAZA_CD := CR_SHITEIJIYUIDO.ATENA_OAZA_CD;       --異動前大字コード\r\n        N_IDO_ZEN_GYOSEIKU_CD := CR_SHITEIJIYUIDO.GYOSEIKU_CD;     --異動前行政区コード\r\n        N_IDO_ZEN_CHIKU_CD := CR_SHITEIJIYUIDO.CHIKU_CD;           --異動前地区コード\r\n        ----カーソルの内容を宛名履歴に書込む\r\n        INSERT INTO JIBTJUKIRIREKI VALUES\r\n        ( CR_SHITEIJIYUIDO.ATENA_KOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n          CR_SHITEIJIYUIDO.ATENA_RIREKI_EDABAN,    --履歴枝番\r\n          CR_SHITEIJIYUIDO.ATENA_SAISHIN_FLG,      --最新フラグ\r\n          CR_SHITEIJIYUIDO.ATENA_TORIKESHI_FLG,    --取消フラグ\r\n          CR_SHITEIJIYUIDO.ATENA_JOHYOYODATA_FLG,  --除票用データフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n          CR_SHITEIJIYUIDO.ATENA_TEKIYO_BI,\r\n          CR_SHITEIJIYUIDO.ATENA_TOROKU_GYOMU,\r\n          CR_SHITEIJIYUIDO.ATENA_SETAI_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_GENZON_KBN,\r\n          NVL(CR_SHITEIJIYUIDO.JUN_SETAI_KBN, 0),\r\n          CR_SHITEIJIYUIDO.ATENA_JINKAKU_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_KOKUSEKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHISHO_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHIKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_GYOSEIKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_HAN_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHOGAKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHUGAKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_TOHYOKU_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SANTEIDANTAI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_WAREKI_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_HYOJI_SEINENGAPI,\r\n          CR_SHITEIJIYUIDO.ATENA_SEIBETSU,\r\n          CR_SHITEIJIYUIDO.ATENA_USER_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_OAZA_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_HONBAN,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN1,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN2,\r\n          CR_SHITEIJIYUIDO.ATENA_EDABAN3,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_GAIKU,\r\n          CR_SHITEIJIYUIDO.ATENA_TOU,\r\n          CR_SHITEIJIYUIDO.ATENA_GOU,\r\n          CR_SHITEIJIYUIDO.ATENA_JICHI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.ATENA_YUBIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_YUBIN_NOBC,\r\n          CR_SHITEIJIYUIDO.ATENA_CHOMEI,\r\n          CR_SHITEIJIYUIDO.ATENA_BANCHI,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI,\r\n          CR_SHITEIJIYUIDO.ATENA_DAIHYO_KATAGAKI,\r\n          CR_SHITEIJIYUIDO.ATENA_DAIHYO_SHIMEI,\r\n          CR_SHITEIJIYUIDO.ATENA_TEL_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_TEL_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_FAX_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_MAIL_ADS,\r\n          CR_SHITEIJIYUIDO.ATENA_YUHEN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_TOROKU_JIYU,\r\n          NVL(CR_SHITEIJIYUIDO.JUMINHYO_CD, 0),\r\n          NVL(CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD1, 0),\r\n          NVL(CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD2, 0),\r\n          NVL(CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD3, 0),\r\n          NVL(CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_CD4, 0),\r\n          NVL(CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_KBN, 0),\r\n          CR_SHITEIJIYUIDO.ATENA_ZOKUGARA_MEI,\r\n          CR_SHITEIJIYUIDO.ATENA_JITSU_ZOKUGARA_MEI,\r\n          NVL(CR_SHITEIJIYUIDO.KISAI_JUNI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.IDO_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.IDO_JIYU, 0),\r\n          NVL(CR_SHITEIJIYUIDO.IDO_TODOKE_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.IDO_TODOKE_KBN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUTEI_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUTEI_JIYU, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUTEI_TODOKEDE_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUTEI_TODOKEDE_KBN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.GENJUSHO_REN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.ZENJUSHO_REN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENNYUMAE_REN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENNYU_MITODOKE_REN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.HONSEKI_REN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_TODOKEDE_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_TODOKEDE_KBN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_YOTEI_REN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_TSUCHI_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.TENSHUTSU_KAKUTEI_REN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NARU, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NARU_JIYU, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NARU_TODOKEDE_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NARU_TODOKEDE_KBN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NAKUNARU, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_JIYU, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_TODOKEDE_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_TODOKEDE_KBN, 0),\r\n          NVL(CR_SHITEIJIYUIDO.SHIBOBI_FUSHO_KBN, 0),\r\n          CR_SHITEIJIYUIDO.ATENA_HONMYO_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_HONMYO_KANJI,\r\n          CR_SHITEIJIYUIDO.NUSHI_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.NUSHI_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.BIKO,\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--          NVL(CR_SHITEIJIYUIDO.KAISEI_BI, 0),\r\n--          NVL(CR_SHITEIJIYUIDO.KAISEI_REN, 0),\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n          --CASE\r\n            --  WHEN CR_SHITEIJIYUIDO.IDO_JIYU IN (191,291) THEN i_SHORIBI\r\n             -- ELSE NVL(CR_SHITEIJIYUIDO.KAISEI_BI, 0)\r\n         -- END,\r\n          --CASE\r\n             -- WHEN CR_SHITEIJIYUIDO.IDO_JIYU IN (191,291) THEN CR_SHITEIJIYUIDO.KAISEI_REN + 1\r\n             -- ELSE NVL(CR_SHITEIJIYUIDO.KAISEI_REN, 0)\r\n          --END,\r\n          NVL(CR_SHITEIJIYUIDO.KAISEI_BI, 0),\r\n          NVL(CR_SHITEIJIYUIDO.KAISEI_REN, 0),\r\n--2025/5/14 CTC.liu update end\r\n--2024/01/25 DIS.liuqimeng Update end\r\n          CR_SHITEIJIYUIDO.KYU_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.KYU_SHIMEI_KANJI,\r\n          NVL(CR_SHITEIJIYUIDO.SHORIBI_KEY, 0),\r\n          NVL(CR_SHITEIJIYUIDO.SHORI_JIKAN_KEY, 0),\r\n          NVL(CR_SHITEIJIYUIDO.SHORI_KBN_KEY, 0),\r\n          NVL(CR_SHITEIJIYUIDO.ZENBU_ICHIBU_KEY, 0),\r\n          NVL(CR_SHITEIJIYUIDO.SHOKUINKOJIN_NO_KEY, 0),\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_SAKUSEIBI,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_KOSHINBI,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_JIKAN,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_SHOKUINKOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_SYS_TANMATSU_NO,\r\n          CR_SHITEIJIYUIDO.GOMI_CD,\r\n          CR_SHITEIJIYUIDO.SINYO_CD,\r\n          CR_SHITEIJIYUIDO.KOIKIKOFU_STOP_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_CHOMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_BANCHI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_KANA,\r\n          CR_SHITEIJIYUIDO.ATENA_KATAGAKI_HIDE_FLG,\r\n          CR_SHITEIJIYUIDO.ATENA_GAIJI_FLG,\r\n          CR_SHITEIJIYUIDO.ATENA_HOJINSOSHIKI_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_KOKUHOSHISANWARI_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_JINTEKIGENMEN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_SHOYUSHAKEISHONIN_KBN,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_LINK_KOJIN_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_JE_NAYOSE_NO,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI1_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI2_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI3_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI4_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI5_CD,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI1_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI2_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI3_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI4_CH,\r\n          CR_SHITEIJIYUIDO.ATENA_YOBI5_CH,\r\n          CR_SHITEIJIYUIDO.ALP_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.ALP_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.GAI_SHIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.GAI_SHIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.TSUSHOMEI_KANA,\r\n          CR_SHITEIJIYUIDO.TSUSHOMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.HEIKIMEI_KANA,\r\n          CR_SHITEIJIYUIDO.HEIKIMEI_KANJI,\r\n          CR_SHITEIJIYUIDO.GAIKOKU_JUMIN_NARU,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_NO_SHUBETSU,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_CARD_NO,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_SHIKAKU_CD,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_SHURYO_BI,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_KIKAN_NEN,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_KIKAN_TSUKI,\r\n          CR_SHITEIJIYUIDO.ZAIRYU_KIKAN_HI,\r\n          CR_SHITEIJIYUIDO.CARD_MANRYO_BI,\r\n          CR_SHITEIJIYUIDO.KBN_30_45,\r\n          CR_SHITEIJIYUIDO.KYOJYUCHI_UMU,\r\n          CR_SHITEIJIYUIDO.SEINENGAPI_FUSHO_KBN,\r\n          CR_SHITEIJIYUIDO.RYOKEN_BANGO,\r\n          CR_SHITEIJIYUIDO.RYOKEN_HAKKO_BI,\r\n          CR_SHITEIJIYUIDO.JORIKU_KYOKA_BI,\r\n          CR_SHITEIJIYUIDO.JUMIN_NUSHI_SHIMEI\r\n\r\n         ,CR_SHITEIJIYUIDO.ATENA_TOUGOU_NO\r\n         ,CR_SHITEIJIYUIDO.SEIDO_KOJIN_NO\r\n         ,CR_SHITEIJIYUIDO.ATENA_SEIDO_HOJIN_NO\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n          ,CR_SHITEIJIYUIDO.ATENA_KETAPRM                                 --住所_桁取パラメータ（基本データリスト用項目）\r\n          ,CR_SHITEIJIYUIDO.ATENA_KOKUMEI_CD                              --住所_国名コード（住登外者宛名番号管理の基本データリスト用項目）\r\n          ,VCHOSHACODE                                                     --入力場所\r\n          ,CR_SHITEIJIYUIDO.SHIMEI_KANA_FLG                            --氏名カナフラグ\r\n          ,CR_SHITEIJIYUIDO.TSUSHO_KANA_FLG                            --通称カナフラグ\r\n          ,CR_SHITEIJIYUIDO.JIJITSUJONOSETAINUSHI_KANA                 --事実上の世帯主カナ\r\n          ,CR_SHITEIJIYUIDO.JIJITSUJONOSETAINUSHI_KANJI                --事実上の世帯主漢字\r\n          ,CR_SHITEIJIYUIDO.SAISYUTOROKUJUSHO_REN                      --最終登録住所地連番\r\n          ,CR_SHITEIJIYUIDO.SAISEIKISAI_DATE                           --再製記載年月日\r\n          ,CR_SHITEIJIYUIDO.SAISEIKISAIDATE_FUSHO_FLG                  --再製記載年月日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.SAISEIKISAIDATE_FUSHO_HYOKI                --再製記載年月日不詳表記\r\n          ,CR_SHITEIJIYUIDO.SAISEISHOJODATE                            --再製消除年月日\r\n          ,CR_SHITEIJIYUIDO.SAISEISHOJODATE_FUSHO_FLG                  --再製消除年月日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.SAISEISHOJODATE_FUSHO_HYOKI                --再製消除年月日不詳表記\r\n          ,CR_SHITEIJIYUIDO.KBN_30_46_47                               --法第30条46又は47区分\r\n          ,CR_SHITEIJIYUIDO.SEINENGAPI_FUSHO_HYOKI                     --生年月日不詳表記\r\n          ,CR_SHITEIJIYUIDO.IDO_BI_FUSHO_FLG                           --異動日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.IDO_BI_FUSHO_HYOKI                         --異動日不詳表記\r\n          ,CR_SHITEIJIYUIDO.JUTEI_BI_FUSHO_FLG                         --住定日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.JUTEI_BI_FUSHO_HYOKI                       --住定日不詳表記\r\n          ,CR_SHITEIJIYUIDO.JUMIN_NARU_FUSHO_FLG                       --住民となる日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.JUMIN_NARU_FUSHO_HYOKI                     --住民となる日不詳表記\r\n          ,CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_FUSHO_FLG                   --住民でなくなる日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.JUMIN_NAKUNARU_FUSHO_HYOKI                 --住民でなくなる日不詳表記\r\n          ,CR_SHITEIJIYUIDO.KAISEI_BI_FUSHO_FLG                        --改製日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.KAISEI_BI_FUSHO_HYOKI                      --改製日不詳表記\r\n          ,CR_SHITEIJIYUIDO.GAIKOKU_JUMIN_NARU_FUSHO_FLG               --外国人の住民となる日不詳フラグ\r\n          ,CR_SHITEIJIYUIDO.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI             --外国人の住民となる日不詳表記\r\n          ,CR_SHITEIJIYUIDO.SEIBETSU_FUSHO_KBN                         --性別不詳区分\r\n          ,CR_SHITEIJIYUIDO.IDO_JIYU_SHOSAI                            --異動事由詳細\r\n          ,CR_SHITEIJIYUIDO.IDOKOMOKU_1                                --異動項目_1\r\n          ,CR_SHITEIJIYUIDO.RYUIJIKO_1                                 --留意事項_1\r\n          ,CR_SHITEIJIYUIDO.IDOKOMOKU_2                                --異動項目_2\r\n          ,CR_SHITEIJIYUIDO.RYUIJIKO_2                                 --留意事項_2\r\n          ,CR_SHITEIJIYUIDO.IDOKOMOKU_3                                --異動項目_3\r\n          ,CR_SHITEIJIYUIDO.RYUIJIKO_3                                 --留意事項_3\r\n          ,CR_SHITEIJIYUIDO.RIREKI_SENTAKUFUKA_FLG                     --履歴選択不可フラグ\r\n          ,CR_SHITEIJIYUIDO.TODOKEDE_NO                                --届出番号\r\n          ,CR_SHITEIJIYUIDO.TORIKESHI_TODOKEDE_NO                      --取消届出番号\r\n--2024/01/25 DIS.liuqimeng Add end\r\n\r\n        );\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--        SELECT RIREKI_RENBAN,TEKIYO_BI\r\n--          INTO R_BUPD_ATENA.RIREKI_RENBAN,R_BUPD_ATENA.TEKIYO_BI\r\n        SELECT RIREKI_RENBAN,TEKIYO_BI,RIREKI_EDABAN,SAISHIN_FLG\r\n          INTO R_BUPD_ATENA.RIREKI_RENBAN,R_BUPD_ATENA.TEKIYO_BI,R_BUPD_ATENA.RIREKI_EDABAN,R_BUPD_ATENA.SAISHIN_FLG\r\n--2024/01/25 DIS.liuqimeng Update end\r\n          FROM JIBWBUPD_JUKIKIHON\r\n         WHERE ENTRY_ID = i_IENTRY_ID\r\n           AND KOJIN_NO = CR_SHITEIJIYUIDO.KOJIN_NO;\r\n        --宛名基本を更新する\r\n        UPDATE JIBTJUKIKIHON\r\n           SET RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN,\r\n               TEKIYO_BI = R_BUPD_ATENA.TEKIYO_BI,\r\n               GENZON_KBN = 1,\r\n               SYS_SAKUSEIBI = i_SHORIBI,\r\n               SYS_KOSHINBI = 0,\r\n               SYS_JIKAN = I_SYSTIME2,\r\n               SYS_SHOKUINKOJIN_NO = i_NSHOKUIN,\r\n               SYS_TANMATSU_NO = i_NTANMATSU_NO\r\n         WHERE KOJIN_NO = CR_SHITEIJIYUIDO.KOJIN_NO;\r\n        REBT_JUKIJOHO.KOJIN_NO := CR_SHITEIJIYUIDO.KOJIN_NO;  --宛名番号\r\n        REBT_JUKIJOHO.RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN;  --履歴連番\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n        REBT_JUKIJOHO.RIREKI_EDABAN   := R_BUPD_ATENA.RIREKI_EDABAN;         --履歴枝番\r\n        REBT_JUKIJOHO.SAISHIN_FLG     := R_BUPD_ATENA.SAISHIN_FLG;           --最新フラグ(0:最新でない 1:最新)\r\n        REBT_JUKIJOHO.KYUUJI_KANA_FLG := CR_SHITEIJIYUIDO.JH_KYUUJI_KANA_FLG;--旧氏カナフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n        REBT_JUKIJOHO.KYUUJI_KANA := CR_SHITEIJIYUIDO.KYUUJI_KANA;   --旧氏かな\r\n        REBT_JUKIJOHO.KYUUJI_KANJI := CR_SHITEIJIYUIDO.KYUUJI_KANJI;   --旧氏漢字\r\n        REBT_JUKIJOHO.SYS_SAKUSEIBI := i_SHORIBI;   --作成日\r\n        REBT_JUKIJOHO.SYS_KOSHINBI := 0;            --更新日\r\n        REBT_JUKIJOHO.SYS_JIKAN := I_SYSTIME2;      --更新時間\r\n        REBT_JUKIJOHO.SYS_SHOKUINKOJIN_NO := i_NSHOKUIN;    --更新職員宛名番号\r\n        REBT_JUKIJOHO.SYS_TANMATSU_NO := i_NTANMATSU_NO;    --更新端末番号\r\n        --住基情報に登録する\r\n        INSERT INTO JIBTJUKIJOHO VALUES REBT_JUKIJOHO;\r\n        SELECT IDO_BI,\r\n               IDO_JIYU,\r\n               IDO_TODOKE_BI,\r\n               IDO_TODOKE_KBN,\r\n               SHORI_KBN_KEY,\r\n               ZENBU_ICHIBU_KEY\r\n          INTO R_BUPD_JUKIIDO.IDO_BI,\r\n               R_BUPD_JUKIIDO.IDO_JIYU,\r\n               R_BUPD_JUKIIDO.IDO_TODOKE_BI,\r\n               R_BUPD_JUKIIDO.IDO_TODOKE_KBN,\r\n               R_BUPD_JUKIIDO.SHORI_KBN_KEY,\r\n               R_BUPD_JUKIIDO.ZENBU_ICHIBU_KEY\r\n          FROM JIBWBUPD_JUKIIDO\r\n         WHERE ENTRY_ID = i_IENTRY_ID\r\n           AND KOJIN_NO = CR_SHITEIJIYUIDO.KOJIN_NO;\r\n        --住基異動を更新する。\r\n        IF R_BUPD_JUKIIDO.IDO_TODOKE_KBN = 1 THEN\r\n          V_IDO_TODOKE_KBN_MEI := '届出';\r\n        ELSIF R_BUPD_JUKIIDO.IDO_TODOKE_KBN = 2 THEN\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--          V_IDO_TODOKE_KBN_MEI := '通知';\r\n          V_IDO_TODOKE_KBN_MEI := '職権';\r\n        ELSIF R_BUPD_JUKIIDO.IDO_TODOKE_KBN = 3 THEN\r\n          V_IDO_TODOKE_KBN_MEI := '申出';\r\n        ELSIF R_BUPD_JUKIIDO.IDO_TODOKE_KBN = 4 THEN\r\n          V_IDO_TODOKE_KBN_MEI := '請求';\r\n        ELSE\r\n          NULL;\r\n--2024/01/25 DIS.liuqimeng Update end\r\n        END IF;\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--        IF R_BUPD_JUKIIDO.IDO_JIYU = 15 THEN\r\n--          N_IDO_JIYU := 26;\r\n--          N_JUMIN_NAKUNARU_JIYU := 26;\r\n--          N_SHORI_KBN_KEY := 26;\r\n        IF R_BUPD_JUKIIDO.IDO_JIYU = 150 THEN\r\n          N_IDO_JIYU := 260;\r\n          N_JUMIN_NAKUNARU_JIYU := 260;\r\n          N_SHORI_KBN_KEY := 260;\r\n--2024/01/25 DIS.liuqimeng Update end\r\n          IF NBIKOJKN = 1 THEN\r\n            V_BIKO := KKAPK0010.FMULTIBYTEHENKAN(FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '帰化　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) || V_IDO_TODOKE_KBN_MEI || 'により消除',1);\r\n          ELSE\r\n            V_BIKO := FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '帰化　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) || V_IDO_TODOKE_KBN_MEI || 'により消除';\r\n          END IF;\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--        ELSIF R_BUPD_JUKIIDO.IDO_JIYU = 16 THEN\r\n--          N_IDO_JIYU := 27;\r\n--          N_JUMIN_NAKUNARU_JIYU := 27;\r\n--          N_SHORI_KBN_KEY := 27;\r\n        ELSIF R_BUPD_JUKIIDO.IDO_JIYU = 160 THEN\r\n          N_IDO_JIYU := 270;\r\n          N_JUMIN_NAKUNARU_JIYU := 270;\r\n          N_SHORI_KBN_KEY := 270;\r\n--2024/01/25 DIS.liuqimeng Update end\r\n          IF NBIKOJKN = 1 THEN\r\n            V_BIKO := KKAPK0010.FMULTIBYTEHENKAN(FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '国籍取得　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) || V_IDO_TODOKE_KBN_MEI || 'により消除',1);\r\n          ELSE\r\n            V_BIKO := FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '国籍取得　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) || V_IDO_TODOKE_KBN_MEI || 'により消除';\r\n          END IF;\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--       ELSIF R_BUPD_JUKIIDO.IDO_JIYU = 28 THEN\r\n--          N_IDO_JIYU := 24;\r\n--          N_JUMIN_NAKUNARU_JIYU := 24;\r\n--          N_SHORI_KBN_KEY := 24;\r\n       ELSIF R_BUPD_JUKIIDO.IDO_JIYU = 280 THEN\r\n          N_IDO_JIYU := 240;\r\n          N_JUMIN_NAKUNARU_JIYU := 240;\r\n          N_SHORI_KBN_KEY := 240;\r\n--2024/01/25 DIS.liuqimeng Update end\r\n\r\n          IF NBIKOJKN = 1 THEN\r\n            V_BIKO := KKAPK0010.FMULTIBYTEHENKAN(FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '国籍喪失　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) || '戸籍' || V_IDO_TODOKE_KBN_MEI || 'により消除',1);\r\n\r\n          ELSE\r\n            V_BIKO := FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '国籍喪失　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) || '戸籍' || V_IDO_TODOKE_KBN_MEI || 'により消除';\r\n          END IF;\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n         ELSIF R_BUPD_JUKIIDO.IDO_JIYU = 191 THEN\r\n         N_IDO_JIYU := 291;\r\n          N_JUMIN_NAKUNARU_JIYU := 291;\r\n          N_SHORI_KBN_KEY := 291;\r\n        IF NBIKOJKN = 1 THEN\r\n            V_BIKO := KKAPK0010.FMULTIBYTEHENKAN(FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '改製　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) ||  V_IDO_TODOKE_KBN_MEI || 'により消除',1);\r\n        ELSE\r\n         V_BIKO := FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_BI) || '改製　' || FUNCDAYEDIT(R_BUPD_JUKIIDO.IDO_TODOKE_BI) ||  V_IDO_TODOKE_KBN_MEI || 'により消除';\r\n        END IF;\r\n--2025/5/14 CTC.liu update end\r\n        END IF;\r\n        UPDATE JIBTJUKIIDO\r\n           SET GENZON_KBN = 1,\r\n               IDO_BI = R_BUPD_JUKIIDO.IDO_BI,\r\n               IDO_JIYU = N_IDO_JIYU,\r\n               IDO_TODOKE_BI = R_BUPD_JUKIIDO.IDO_TODOKE_BI,\r\n               IDO_TODOKE_KBN = R_BUPD_JUKIIDO.IDO_TODOKE_KBN,\r\n               JUMIN_NAKUNARU = R_BUPD_JUKIIDO.IDO_BI,\r\n               JUMIN_NAKUNARU_JIYU = N_JUMIN_NAKUNARU_JIYU,\r\n               JUMIN_NAKUNARU_TODOKEDE_BI = R_BUPD_JUKIIDO.IDO_TODOKE_BI,\r\n               JUMIN_NAKUNARU_TODOKEDE_KBN = R_BUPD_JUKIIDO.IDO_TODOKE_KBN,\r\n               BIKO = V_BIKO,\r\n               SHORIBI_KEY = I_SYSDATE2,\r\n               SHORI_JIKAN_KEY = I_SYSTIME2,\r\n               SHORI_KBN_KEY = N_SHORI_KBN_KEY,\r\n               ZENBU_ICHIBU_KEY = R_BUPD_JUKIIDO.ZENBU_ICHIBU_KEY,\r\n               SHOKUINKOJIN_NO_KEY = i_NSHOKUIN,\r\n               SYS_SAKUSEIBI = i_SHORIBI,\r\n               SYS_KOSHINBI = 0,\r\n               SYS_JIKAN = I_SYSTIME2,\r\n               SYS_SHOKUINKOJIN_NO = i_NSHOKUIN,\r\n               SYS_TANMATSU_NO = i_NTANMATSU_NO\r\n         WHERE KOJIN_NO = CR_SHITEIJIYUIDO.KOJIN_NO;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--        IF i_IDO_JIYU IN (15,16) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n        --IF i_IDO_JIYU IN (150,160) THEN\r\n        IF i_IDO_JIYU IN (150,160,191) THEN\r\n           FOR CR_TSUSHORIREKI IN C_TSUSHORIREKI(CR_SHITEIJIYUIDO.KOJIN_NO,CR_SHITEIJIYUIDO.ATENA_RIREKI_RENBAN) LOOP\r\n            ----通称履歴に追加する\r\n            INSERT INTO JIBTTSUSHORIREKI VALUES\r\n            ( CR_SHITEIJIYUIDO.KOJIN_NO,\r\n              CR_TSUSHORIREKI.RIREKI_RENBAN + 10,\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n              1,                        --履歴枝番\r\n              CR_TSUSHORIREKI.RENBAN,\r\n              CR_TSUSHORIREKI.TOROKU_BI,\r\n              CR_TSUSHORIREKI.TOROKU_USER_CD,\r\n              CR_TSUSHORIREKI.SAKUJO_BI,\r\n              CR_TSUSHORIREKI.SAKUJO_USER_CD,\r\n              CR_TSUSHORIREKI.TSUSHO_KANA,\r\n              CR_TSUSHORIREKI.TSUSHO_KANJI,\r\n              i_SHORIBI,\r\n              0,\r\n              I_SYSTIME2,\r\n              i_NSHOKUIN,\r\n              i_NTANMATSU_NO\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n             ,CR_TSUSHORIREKI.TSUSHO_KANA_FLG   --通称カナフラグ\r\n            );\r\n           END LOOP;\r\n        END IF;\r\n      --更新前の内容を住記異動累積ワークテーブル（JIBWIDORUISEKI）に書込む。\r\n      VSQL := NULL;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--      VSQL := 'INSERT INTO JIBWIDORUISEKI SELECT ''A'',B.KOJIN_NO,B.RIREKI_RENBAN,B.TEKIYO_BI,B.TOROKU_GYOMU,B.SETAI_NO,B.GENZON_KBN,\r\n      VSQL := 'INSERT INTO JIBWIDORUISEKI SELECT ''A'',B.KOJIN_NO,B.RIREKI_RENBAN,B.RIREKI_EDABAN,B.SAISHIN_FLG,B.TORIKESHI_FLG,B.JOHYOYODATA_FLG,B.TEKIYO_BI,B.TOROKU_GYOMU,B.SETAI_NO,B.GENZON_KBN,\r\n                      A.JUN_SETAI_KBN,B.JINKAKU_KBN,B.KOKUSEKI_CD,B.SHISHO_CD,B.CHIKU_CD,B.GYOSEIKU_CD,\r\n                      B.HAN_CD,B.SHOGAKU_CD,B.CHUGAKU_CD,B.TOHYOKU_CD,B.SANTEIDANTAI_CD,B.SEINENGAPI,\r\n                      B.WAREKI_SEINENGAPI,B.HYOJI_SEINENGAPI,B.SEIBETSU,B.USER_CD,B.OAZA_CD,B.HONBAN,\r\n                      B.EDABAN1,B.EDABAN2,B.EDABAN3,B.KATAGAKI_CD,B.GAIKU,B.TOU,B.GOU,B.JICHI_CD,B.SHIMEI_KANA,\r\n                      B.SHIMEI_KANJI,B.YUBIN_NO,B.YUBIN_NOBC,B.CHOMEI,B.BANCHI,B.KATAGAKI,B.DAIHYO_KATAGAKI,\r\n                      B.DAIHYO_SHIMEI,B.TEL_NO,B.TEL_KBN,B.FAX_NO,B.MAIL_ADS,B.YUHEN_KBN,B.TOROKU_JIYU,A.JUMINHYO_CD,\r\n                      A.ZOKUGARA_CD1,A.ZOKUGARA_CD2,A.ZOKUGARA_CD3,A.ZOKUGARA_CD4,A.ZOKUGARA_KBN,A.ZOKUGARA_MEI,\r\n                      A.JITSU_ZOKUGARA_MEI,A.KISAI_JUNI,A.IDO_BI,A.IDO_JIYU,A.IDO_TODOKE_BI,A.IDO_TODOKE_KBN,A.JUTEI_BI,\r\n                      A.JUTEI_JIYU,A.JUTEI_TODOKEDE_BI,A.JUTEI_TODOKEDE_KBN,A.GENJUSHO_REN,A.ZENJUSHO_REN,A.TENNYUMAE_REN,\r\n                      A.TENNYU_MITODOKE_REN,A.HONSEKI_REN,\r\n                      A.TENSHUTSU_YOTEI_BI,A.TENSHUTSU_YOTEI_TODOKEDE_BI,A.TENSHUTSU_YOTEI_TODOKEDE_KBN,A.TENSHUTSU_YOTEI_REN,\r\n                      A.TENSHUTSU_KAKUTEI_BI,A.TENSHUTSU_KAKUTEI_TSUCHI_BI,A.TENSHUTSU_KAKUTEI_TODOKEDE_KBN,A.TENSHUTSU_KAKUTEI_REN,\r\n                      A.JUMIN_NARU,A.JUMIN_NARU_JIYU,A.JUMIN_NARU_TODOKEDE_BI,A.JUMIN_NARU_TODOKEDE_KBN,A.JUMIN_NAKUNARU,\r\n                      A.JUMIN_NAKUNARU_JIYU,A.JUMIN_NAKUNARU_TODOKEDE_BI,A.JUMIN_NAKUNARU_TODOKEDE_KBN,A.SHIBOBI_FUSHO_KBN,\r\n                      B.HONMYO_KANA,B.HONMYO_KANJI,A.NUSHI_SHIMEI_KANA,A.NUSHI_SHIMEI_KANJI,A.BIKO,A.KAISEI_BI,A.KAISEI_REN,\r\n                      A.KYU_SHIMEI_KANA,A.KYU_SHIMEI_KANJI,A.SHORIBI_KEY,A.SHORI_JIKAN_KEY,A.SHORI_KBN_KEY,A.ZENBU_ICHIBU_KEY,\r\n                      A.SHOKUINKOJIN_NO_KEY,B.SYS_SAKUSEIBI,B.SYS_KOSHINBI,B.SYS_JIKAN,B.SYS_SHOKUINKOJIN_NO,B.SYS_TANMATSU_NO,\r\n                      A.GOMI_CD,A.SINYO_CD,A.KOIKIKOFU_STOP_CD,B.CHOMEI_KANA,B.BANCHI_KANA,B.KATAGAKI_KANA,B.KATAGAKI_HIDE_FLG,\r\n                      B.GAIJI_FLG,B.HOJINSOSHIKI_CD,B.JE_KOKUHOSHISANWARI_KBN,B.JE_JINTEKIGENMEN_KBN,B.JE_SHOYUSHAKEISHONIN_KBN,\r\n                      B.JE_LINK_KOJIN_NO,B.JE_NAYOSE_NO,B.YOBI1_CD,B.YOBI2_CD,B.YOBI3_CD,B.YOBI4_CD,B.YOBI5_CD,B.YOBI1_CH,\r\n                      B.YOBI2_CH,B.YOBI3_CH,B.YOBI4_CH,B.YOBI5_CH,' ||  I_SYSDATE2 || ',' || I_SYSTIME2 || ','''  || i_NTANMATSU_NO || ''''||\r\n                      ',A.ALP_SHIMEI_KANA,A.ALP_SHIMEI_KANJI,A.GAI_SHIMEI_KANA,A.GAI_SHIMEI_KANJI,A.TSUSHOMEI_KANA,A.TSUSHOMEI_KANJI,\r\n                      A.HEIKIMEI_KANA,A.HEIKIMEI_KANJI,A.GAIKOKU_JUMIN_NARU,A.ZAIRYU_NO_SHUBETSU,A.ZAIRYU_CARD_NO,A.ZAIRYU_SHIKAKU_CD,\r\n                      A.ZAIRYU_SHURYO_BI,A.ZAIRYU_KIKAN_NEN,A.ZAIRYU_KIKAN_TSUKI,A.ZAIRYU_KIKAN_HI,A.CARD_MANRYO_BI,A.KBN_30_45,A.KYOJYUCHI_UMU,\r\n                      A.SEINENGAPI_FUSHO_KBN,A.RYOKEN_BANGO,A.RYOKEN_HAKKO_BI,A.JORIKU_KYOKA_BI,A.JUMIN_NUSHI_SHIMEI,A.NUSHI_KBN '||\r\n                      ',B.TOUGOU_NO, A.SEIDO_KOJIN_NO, B.SEIDO_HOJIN_NO ' ||\r\n                      ' ,JH.KYUUJI_KANA, JH.KYUUJI_KANJI ' ||\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n                      ',B.KETAPRM, B.KOKUMEI_CD,' ||\r\n                      '''' || VCHOSHACODE || '''' ||\r\n                      ',A.SHIMEI_KANA_FLG,A.TSUSHO_KANA_FLG,JH.KYUUJI_KANA_FLG,A.JIJITSUJONOSETAINUSHI_KANA' ||\r\n                      ',A.JIJITSUJONOSETAINUSHI_KANJI,A.SAISYUTOROKUJUSHO_REN,A.SAISEIKISAI_DATE,A.SAISEIKISAIDATE_FUSHO_FLG,A.SAISEIKISAIDATE_FUSHO_HYOKI'||\r\n                      ',A.SAISEISHOJODATE,A.SAISEISHOJODATE_FUSHO_FLG,A.SAISEISHOJODATE_FUSHO_HYOKI,A.KBN_30_46_47,A.SEINENGAPI_FUSHO_HYOKI,A.IDO_BI_FUSHO_FLG'||\r\n                      ',A.IDO_BI_FUSHO_HYOKI,A.JUTEI_BI_FUSHO_FLG,A.JUTEI_BI_FUSHO_HYOKI,A.JUMIN_NARU_FUSHO_FLG,A.JUMIN_NARU_FUSHO_HYOKI,A.JUMIN_NAKUNARU_FUSHO_FLG'||\r\n                      ',A.JUMIN_NAKUNARU_FUSHO_HYOKI,A.KAISEI_BI_FUSHO_FLG,A.KAISEI_BI_FUSHO_HYOKI,A.GAIKOKU_JUMIN_NARU_FUSHO_FLG,A.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI'||\r\n                      ',A.SEIBETSU_FUSHO_KBN,A.IDO_JIYU_SHOSAI,A.IDOKOMOKU_1,A.RYUIJIKO_1,A.IDOKOMOKU_2,A.RYUIJIKO_2,A.IDOKOMOKU_3,A.RYUIJIKO_3' ||\r\n                      ',A.RIREKI_SENTAKUFUKA_FLG ,A.TODOKEDE_NO ,A.TORIKESHI_TODOKEDE_NO ' ||\r\n--2024/01/25 DIS.liuqimeng Add end\r\n                      ' FROM JIBTJUKIIDO A,JIBTJUKIKIHON B,JIBTJUKIJOHO JH WHERE A.KOJIN_NO = ' || CR_SHITEIJIYUIDO.KOJIN_NO || ' AND B.KOJIN_NO = ' || CR_SHITEIJIYUIDO.KOJIN_NO ||\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--                                                                            ' AND B.KOJIN_NO = JH.KOJIN_NO(+) AND B.RIREKI_RENBAN = JH.RIREKI_RENBAN(+) ';\r\n                      ' AND B.KOJIN_NO = JH.KOJIN_NO(+) AND B.RIREKI_RENBAN = JH.RIREKI_RENBAN(+) AND B.RIREKI_EDABAN = JH.RIREKI_EDABAN(+) ';\r\n      EXECUTE IMMEDIATE VSQL;\r\n      --更新前の内容を宛名異動累積ワークテーブル（GABWRUISEKIKIHON）に書込む。\r\n      VSQL := NULL;\r\n      VSQL := 'INSERT INTO GABWRUISEKIKIHON SELECT ''A'',KOJIN_NO,RIREKI_RENBAN,TEKIYO_BI,TOROKU_GYOMU,JUMINHYO_CD,SETAI_NO,GENZON_KBN,\r\n                      JINKAKU_KBN,KOKUSEKI_CD,SHISHO_CD,CHIKU_CD,GYOSEIKU_CD,HAN_CD,SHOGAKU_CD,CHUGAKU_CD,TOHYOKU_CD,SANTEIDANTAI_CD,\r\n                      SEINENGAPI,WAREKI_SEINENGAPI,HYOJI_SEINENGAPI,SEIBETSU,USER_CD,OAZA_CD,HONBAN,EDABAN1,EDABAN2,EDABAN3,KATAGAKI_CD,\r\n                      GAIKU,TOU,GOU,JICHI_CD,SHIMEI_KANA,SHIMEI_KANJI,HONMYO_KANA,HONMYO_KANJI,YUBIN_NO,YUBIN_NOBC,CHOMEI,BANCHI,KATAGAKI,\r\n                      DAIHYO_KATAGAKI,DAIHYO_SHIMEI,TEL_NO,TEL_KBN,FAX_NO,MAIL_ADS,YUHEN_KBN,TOROKU_JIYU,JUFUKU_KOJIN_NO,SYS_SAKUSEIBI,\r\n                      SYS_KOSHINBI,SYS_JIKAN,SYS_SHOKUINKOJIN_NO,SYS_TANMATSU_NO,CHOMEI_KANA,BANCHI_KANA,KATAGAKI_KANA,KATAGAKI_HIDE_FLG,\r\n                      GAIJI_FLG,HOJINSOSHIKI_CD,JE_KOKUHOSHISANWARI_KBN,JE_JINTEKIGENMEN_KBN,JE_SHOYUSHAKEISHONIN_KBN,JE_LINK_KOJIN_NO,\r\n                      JE_NAYOSE_NO,YOBI1_CD,YOBI2_CD,YOBI3_CD,YOBI4_CD,YOBI5_CD,YOBI1_CH,YOBI2_CH,YOBI3_CH,YOBI4_CH,YOBI5_CH,'\r\n\r\n                      ||  I_SYSDATE2 || ','  || I_SYSTIME2 || ',''' || i_NTANMATSU_NO || '''\r\n                     ,TOUGOU_NO, SEIDO_KOJIN_NO, SEIDO_HOJIN_NO, ZOKUGARACD1, ZOKUGARACD2, ZOKUGARACD3, ZOKUGARACD4, ZOKUGARAKBN, ZOKUGARAMEI, JITSUZOKUGARAMEI ' ||\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n--2024/03/26 DIS.liuqimeng Update 0.3.000.000:受入検証指摘対応\r\n--                     ',0,0,NULL,NULL,NULL,NULL,NULL,NULL,0,0,NULL,0,0,NULL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,NULL,NULL,NULL,0,NULL' ||\r\n                     ',0,0,NULL,NULL,NULL,NULL,NULL,NULL,0,0,NULL,0,0,NULL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,NULL,NULL,NULL,0,NULL,0,0,0,NULL' ||\r\n--2024/01/25 DIS.liuqimeng Add end\r\n                     ' FROM JIBTJUKIKIHON WHERE KOJIN_NO = ' || CR_SHITEIJIYUIDO.KOJIN_NO;\r\n\r\n      EXECUTE IMMEDIATE VSQL;\r\n      --異動累計テーブルの追加更新処理を行う、\r\n      ------------------------------------------------\r\n      -- 異動区分判定\r\n      ------------------------------------------------\r\n      IF R_BUPD_JUKIIDO.IDO_JIYU = R_BUPD_JUKIIDO.SHORI_KBN_KEY THEN\r\n        T_IDO_KBN := 1;\r\n      ELSE\r\n        T_IDO_KBN := 2;\r\n      END IF;\r\n      JIBSORUIUPD(CR_SHITEIJIYUIDO.KOJIN_NO\r\n                          ,CR_SHITEIJIYUIDO.JUMINHYO_CD\r\n                          ,N_IDO_JIYU\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n                          ,VCHOSHACODE\r\n                          ,T_IDO_KBN\r\n                          ,R_BUPD_JUKIIDO.ZENBU_ICHIBU_KEY\r\n                          ,0\r\n                          ,NULL\r\n                          ,i_NTANMATSU_NO\r\n                          ,0\r\n                          ,I_SYSDATE2\r\n                          ,I_SYSTIME2\r\n                          ,1\r\n                          ,I_SYSDATE2\r\n                          ,I_SYSTIME2\r\n                          ,N_SHORI_KBN_KEY\r\n                          ,R_BUPD_JUKIIDO.ZENBU_ICHIBU_KEY\r\n                          ,i_NSHOKUIN\r\n                          ,i_NSHOKUIN\r\n                          ,i_NTANMATSU_NO\r\n                          ,i_SHORIBI\r\n                          ,N_IDO_ZEN_JINKAKU_KBN\r\n                          ,N_IDO_ZEN_GENZON_KBN\r\n                          ,N_IDO_ZEN_NUSHI_KBN\r\n                          ,N_IDO_ZEN_OAZA_CD\r\n                          ,N_IDO_ZEN_GYOSEIKU_CD\r\n                          ,N_IDO_ZEN_CHIKU_CD\r\n                          ,T_NUSHI_JINKAKU_KBN1\r\n                          ,T_JIYU_KBN2\r\n                          );\r\n      --この際、最終的に宛名異動累積を書込む為の区分を\"U\"として管理する。\r\n      VKUBUN := 'U';\r\n      GABSKDRSKSNT(VKUBUN,i_SHORIBI,I_SYSDATE2,I_SYSTIME2,i_NSHOKUIN,i_NTANMATSU_NO);\r\n--住基ネット用変数の格納\r\n      J_IDOMOTO := CR_SHITEIJIYUIDO.ATENA_SETAI_NO;\r\n      IF J_KOJIN_NO IS NULL THEN\r\n        J_KOJIN_NO := CR_SHITEIJIYUIDO.KOJIN_NO;\r\n\r\n      ELSE\r\n        J_KOJIN_NO := J_KOJIN_NO || '|' || CR_SHITEIJIYUIDO.KOJIN_NO;\r\n\r\n      END IF;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--      IF NJOKEN4 = 3 AND i_IDO_JIYU = 24 THEN\r\n      IF NJOKEN4 = 3 AND i_IDO_JIYU = 240 THEN\r\n         /*\r\n         EBPPKOSEKINEWXEROXTEXT(CR_SHITEIJIYUIDO.KOJIN_NO,\r\n                                R_BUPD_ATENA.RIREKI_RENBAN,\r\n                                CR_SHITEIJIYUIDO.ATENA_SETAI_NO,\r\n                                24,\r\n                                R_BUPD_JUKIIDO.IDO_BI,\r\n                                R_BUPD_JUKIIDO.IDO_TODOKE_BI,\r\n                                i_SHORIBI,\r\n                               o_RETURNCD);\r\n         */\r\n         NULL;\r\n      END IF;\r\n--2025/07/14 CTC.zhang update start 1.0.010.006:新WizLIFE保守対応 QA17556\r\n        FOR CR_JIBWBUPD_BIKO IN CUR_JIBWBUPD_BIKO(CR_SHITEIJIYUIDO.KOJIN_NO)  LOOP\r\n          INSERT INTO JIBTJUKIBIKO VALUES(\r\n          CR_SHITEIJIYUIDO.KOJIN_NO      --宛名番号\r\n          ,CR_JIBWBUPD_BIKO.RIREKI_RENBAN --履歴連番\r\n          --,1 --履歴枝番\r\n          ,(CASE WHEN CR_JIBWBUPD_BIKO.IDO_JIYU =412 THEN\r\n                  CR_JIBWBUPD_BIKO.RIREKI_EDABAN+1\r\n             ELSE\r\n                  1 --履歴枝番\r\n           END)\r\n          ,CR_JIBWBUPD_BIKO.SAISHIN_FLG    --最新フラグ\r\n          ,CR_JIBWBUPD_BIKO.SEQ           --連番\r\n          ,CR_JIBWBUPD_BIKO.BIKO          --備考内容\r\n          ,CR_JIBWBUPD_BIKO.GOKIFLG       --誤記フラグ\r\n          ,CR_JIBWBUPD_BIKO.HISSUKBN      --必須区分\r\n          ,CR_JIBWBUPD_BIKO.KISAIJUN      --記載順\r\n          ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SHIMEI        --誤記修正後の氏名\r\n          ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SHIMEI_KANA   --誤記修正後の氏名のフリガナ\r\n          ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SEINENGAPI    --誤記修正後の生年月日\r\n          ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SEINENGAPI_FUSHO_K --誤記修正後の生年月日不詳区分\r\n          ,i_SHORIBI                       --作成日\r\n          ,i_SHORIBI                       --更新日\r\n          ,I_SYSTIME2                      --更新時間\r\n          ,i_NSHOKUIN                      --更新職員宛名番号\r\n          ,i_NTANMATSU_NO                  --更新端末番号\r\n          );\r\n        END LOOP;\r\n--2025/07/14 CTC.zhang update end\r\n    END LOOP;\r\n--2023/11/20 DIS.Xiyan Update 0.3.000.000:住基ネット1次開発\r\n--    JIBSOIDODATA(\r\n    JIBSOCRTIDDTJ(\r\n                       i_SHORIBI,              -- 処理日\r\n                       i_ZENBUICHIBU,          -- 全部一部\r\n                       N_IDO_JIYU,             -- 異動事由\r\n                       J_IDOMOTO,              -- 異動元世帯番号\r\n                       0,                      -- 異動先世帯番号\r\n                       J_KOJIN_NO,             -- 個人番号\r\n                       i_FUKI_FLG,             -- 付記フラグ\r\n                       i_KEIBI_FLG             -- 軽微な修正フラグ\r\n--2023/11/20 DIS.Xiyan Add start 0.3.000.000:住基ネット1次開発\r\n                       ,0                      -- 住居地フラグ\r\n                       ,''                     -- 異動事由詳細\r\n                       ,0                      -- 住所変更フラグ\r\n                       ,T_RENBAN               -- 住所連番\r\n--2023/11/20 DIS.Xiyan Add end\r\n    );\r\n  END IF;\r\n  --------------------------------------------------------------\r\n  -- ワーク住基異動カーソル\r\n  -------------------------------------------------------------\r\n  FOR CR_IDO IN CUR_IDO(i_IENTRY_ID) LOOP\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--    IF CR_IDO.IDO_JIYU != 52 THEN\r\n    IF CR_IDO.IDO_JIYU != 520 THEN\r\n--2024/04/03 DIS.Wangrucheng Update 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n--      IF CR_IDO.KOJIN_NO < 999999900000 THEN\r\n      IF CR_IDO.KOJIN_NO < 999999999900000 THEN\r\n        IF NKADO_BI5 <= I_SYSDATE AND\r\n           NJOKEN111 = 0 AND\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--           CR_IDO.IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n           --CR_IDO.IDO_JIYU IN (150,160,280) THEN\r\n           CR_IDO.IDO_JIYU IN (150,160,280,191) THEN\r\n             VKUBUN := 'I';\r\n        ELSE\r\n      --更新前の内容を住記異動累積ワークテーブル（JIBWIDORUISEKI）に書込む。\r\n          VSQL := NULL;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--          VSQL := 'INSERT INTO JIBWIDORUISEKI SELECT ''B'',B.KOJIN_NO,B.RIREKI_RENBAN,B.TEKIYO_BI,B.TOROKU_GYOMU,B.SETAI_NO,B.GENZON_KBN,\r\n          VSQL := 'INSERT INTO JIBWIDORUISEKI SELECT ''B'',B.KOJIN_NO,B.RIREKI_RENBAN,B.RIREKI_EDABAN,B.SAISHIN_FLG,B.TORIKESHI_FLG,B.JOHYOYODATA_FLG,B.TEKIYO_BI,B.TOROKU_GYOMU,B.SETAI_NO,B.GENZON_KBN,\r\n                          A.JUN_SETAI_KBN,B.JINKAKU_KBN,B.KOKUSEKI_CD,B.SHISHO_CD,B.CHIKU_CD,B.GYOSEIKU_CD,\r\n                          B.HAN_CD,B.SHOGAKU_CD,B.CHUGAKU_CD,B.TOHYOKU_CD,B.SANTEIDANTAI_CD,B.SEINENGAPI,\r\n                          B.WAREKI_SEINENGAPI,B.HYOJI_SEINENGAPI,B.SEIBETSU,B.USER_CD,B.OAZA_CD,B.HONBAN,\r\n                          B.EDABAN1,B.EDABAN2,B.EDABAN3,B.KATAGAKI_CD,B.GAIKU,B.TOU,B.GOU,B.JICHI_CD,B.SHIMEI_KANA,\r\n                          B.SHIMEI_KANJI,B.YUBIN_NO,B.YUBIN_NOBC,B.CHOMEI,B.BANCHI,B.KATAGAKI,B.DAIHYO_KATAGAKI,\r\n                          B.DAIHYO_SHIMEI,B.TEL_NO,B.TEL_KBN,B.FAX_NO,B.MAIL_ADS,B.YUHEN_KBN,B.TOROKU_JIYU,A.JUMINHYO_CD,\r\n                          B.ZOKUGARACD1,B.ZOKUGARACD2,B.ZOKUGARACD3,B.ZOKUGARACD4,B.ZOKUGARAKBN,B.ZOKUGARAMEI,\r\n                          B.JITSUZOKUGARAMEI,A.KISAI_JUNI,A.IDO_BI,A.IDO_JIYU,A.IDO_TODOKE_BI,A.IDO_TODOKE_KBN,A.JUTEI_BI,\r\n                          A.JUTEI_JIYU,A.JUTEI_TODOKEDE_BI,A.JUTEI_TODOKEDE_KBN,A.GENJUSHO_REN,A.ZENJUSHO_REN,A.TENNYUMAE_REN,\r\n                          A.TENNYU_MITODOKE_REN,A.HONSEKI_REN,\r\n                          A.TENSHUTSU_YOTEI_BI,A.TENSHUTSU_YOTEI_TODOKEDE_BI,A.TENSHUTSU_YOTEI_TODOKEDE_KBN,A.TENSHUTSU_YOTEI_REN,\r\n                          A.TENSHUTSU_KAKUTEI_BI,A.TENSHUTSU_KAKUTEI_TSUCHI_BI,A.TENSHUTSU_KAKUTEI_TODOKEDE_KBN,A.TENSHUTSU_KAKUTEI_REN,\r\n                          A.JUMIN_NARU,A.JUMIN_NARU_JIYU,A.JUMIN_NARU_TODOKEDE_BI,A.JUMIN_NARU_TODOKEDE_KBN,A.JUMIN_NAKUNARU,\r\n                          A.JUMIN_NAKUNARU_JIYU,A.JUMIN_NAKUNARU_TODOKEDE_BI,A.JUMIN_NAKUNARU_TODOKEDE_KBN,A.SHIBOBI_FUSHO_KBN,\r\n                          B.HONMYO_KANA,B.HONMYO_KANJI,A.NUSHI_SHIMEI_KANA,A.NUSHI_SHIMEI_KANJI,A.BIKO,A.KAISEI_BI,A.KAISEI_REN,\r\n                          A.KYU_SHIMEI_KANA,A.KYU_SHIMEI_KANJI,A.SHORIBI_KEY,A.SHORI_JIKAN_KEY,A.SHORI_KBN_KEY,A.ZENBU_ICHIBU_KEY,\r\n                          A.SHOKUINKOJIN_NO_KEY,B.SYS_SAKUSEIBI,B.SYS_KOSHINBI,B.SYS_JIKAN,B.SYS_SHOKUINKOJIN_NO,B.SYS_TANMATSU_NO,\r\n                          A.GOMI_CD,A.SINYO_CD,A.KOIKIKOFU_STOP_CD,B.CHOMEI_KANA,B.BANCHI_KANA,B.KATAGAKI_KANA,B.KATAGAKI_HIDE_FLG,\r\n                          B.GAIJI_FLG,B.HOJINSOSHIKI_CD,B.JE_KOKUHOSHISANWARI_KBN,B.JE_JINTEKIGENMEN_KBN,B.JE_SHOYUSHAKEISHONIN_KBN,\r\n                          B.JE_LINK_KOJIN_NO,B.JE_NAYOSE_NO,B.YOBI1_CD,B.YOBI2_CD,B.YOBI3_CD,B.YOBI4_CD,B.YOBI5_CD,B.YOBI1_CH,\r\n                          B.YOBI2_CH,B.YOBI3_CH,B.YOBI4_CH,B.YOBI5_CH,' ||  I_SYSDATE || ',' || I_SYSTIME || ','''  || i_NTANMATSU_NO || ''''||\r\n                          ',A.ALP_SHIMEI_KANA,A.ALP_SHIMEI_KANJI,A.GAI_SHIMEI_KANA,A.GAI_SHIMEI_KANJI,A.TSUSHOMEI_KANA,A.TSUSHOMEI_KANJI,\r\n                          A.HEIKIMEI_KANA,A.HEIKIMEI_KANJI,A.GAIKOKU_JUMIN_NARU,A.ZAIRYU_NO_SHUBETSU,A.ZAIRYU_CARD_NO,A.ZAIRYU_SHIKAKU_CD,\r\n                          A.ZAIRYU_SHURYO_BI,A.ZAIRYU_KIKAN_NEN,A.ZAIRYU_KIKAN_TSUKI,A.ZAIRYU_KIKAN_HI,A.CARD_MANRYO_BI,A.KBN_30_45,A.KYOJYUCHI_UMU,\r\n                          A.SEINENGAPI_FUSHO_KBN,A.RYOKEN_BANGO,A.RYOKEN_HAKKO_BI,A.JORIKU_KYOKA_BI,A.JUMIN_NUSHI_SHIMEI,A.NUSHI_KBN '||\r\n\r\n                        ',B.TOUGOU_NO, A.SEIDO_KOJIN_NO, B.SEIDO_HOJIN_NO ' ||\r\n                        ' ,JH.KYUUJI_KANA, JH.KYUUJI_KANJI ' ||\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n                        ',B.KETAPRM, B.KOKUMEI_CD,' ||\r\n                        '''' || VCHOSHACODE || '''' ||\r\n                        ',A.SHIMEI_KANA_FLG,A.TSUSHO_KANA_FLG,JH.KYUUJI_KANA_FLG,A.JIJITSUJONOSETAINUSHI_KANA' ||\r\n                        ',A.JIJITSUJONOSETAINUSHI_KANJI,A.SAISYUTOROKUJUSHO_REN,A.SAISEIKISAI_DATE,A.SAISEIKISAIDATE_FUSHO_FLG,A.SAISEIKISAIDATE_FUSHO_HYOKI'||\r\n                        ',A.SAISEISHOJODATE,A.SAISEISHOJODATE_FUSHO_FLG,A.SAISEISHOJODATE_FUSHO_HYOKI,A.KBN_30_46_47,A.SEINENGAPI_FUSHO_HYOKI,A.IDO_BI_FUSHO_FLG'||\r\n                        ',A.IDO_BI_FUSHO_HYOKI,A.JUTEI_BI_FUSHO_FLG,A.JUTEI_BI_FUSHO_HYOKI,A.JUMIN_NARU_FUSHO_FLG,A.JUMIN_NARU_FUSHO_HYOKI,A.JUMIN_NAKUNARU_FUSHO_FLG'||\r\n                        ',A.JUMIN_NAKUNARU_FUSHO_HYOKI,A.KAISEI_BI_FUSHO_FLG,A.KAISEI_BI_FUSHO_HYOKI,A.GAIKOKU_JUMIN_NARU_FUSHO_FLG,A.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI'||\r\n                        ',A.SEIBETSU_FUSHO_KBN,A.IDO_JIYU_SHOSAI,A.IDOKOMOKU_1,A.RYUIJIKO_1,A.IDOKOMOKU_2,A.RYUIJIKO_2,A.IDOKOMOKU_3,A.RYUIJIKO_3' ||\r\n                        ',A.RIREKI_SENTAKUFUKA_FLG ,A.TODOKEDE_NO ,A.TORIKESHI_TODOKEDE_NO ' ||\r\n--2024/01/25 DIS.liuqimeng Add end\r\n                        ' FROM JIBTJUKIIDO A,JIBTJUKIKIHON B,JIBTJUKIJOHO JH WHERE A.KOJIN_NO = ' || CR_IDO.KOJIN_NO || ' AND B.KOJIN_NO = ' || CR_IDO.KOJIN_NO ||\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--                                                                            ' AND B.KOJIN_NO = JH.KOJIN_NO(+) AND B.RIREKI_RENBAN = JH.RIREKI_RENBAN(+) ';\r\n                        ' AND B.KOJIN_NO = JH.KOJIN_NO(+) AND B.RIREKI_RENBAN = JH.RIREKI_RENBAN(+) AND B.RIREKI_EDABAN = JH.RIREKI_EDABAN(+) ';\r\n                          EXECUTE IMMEDIATE VSQL;\r\n\r\n      --更新前の内容を宛名異動累積ワークテーブル（GABWRUISEKIKIHON）に書込む。\r\n          VSQL := NULL;\r\n          VSQL := 'INSERT INTO GABWRUISEKIKIHON SELECT ''B'',KOJIN_NO,RIREKI_RENBAN,TEKIYO_BI,TOROKU_GYOMU,JUMINHYO_CD,SETAI_NO,GENZON_KBN,\r\n                          JINKAKU_KBN,KOKUSEKI_CD,SHISHO_CD,CHIKU_CD,GYOSEIKU_CD,HAN_CD,SHOGAKU_CD,CHUGAKU_CD,TOHYOKU_CD,SANTEIDANTAI_CD,\r\n                          SEINENGAPI,WAREKI_SEINENGAPI,HYOJI_SEINENGAPI,SEIBETSU,USER_CD,OAZA_CD,HONBAN,EDABAN1,EDABAN2,EDABAN3,KATAGAKI_CD,\r\n                          GAIKU,TOU,GOU,JICHI_CD,SHIMEI_KANA,SHIMEI_KANJI,HONMYO_KANA,HONMYO_KANJI,YUBIN_NO,YUBIN_NOBC,CHOMEI,BANCHI,KATAGAKI,\r\n                          DAIHYO_KATAGAKI,DAIHYO_SHIMEI,TEL_NO,TEL_KBN,FAX_NO,MAIL_ADS,YUHEN_KBN,TOROKU_JIYU,JUFUKU_KOJIN_NO,SYS_SAKUSEIBI,\r\n                          SYS_KOSHINBI,SYS_JIKAN,SYS_SHOKUINKOJIN_NO,SYS_TANMATSU_NO,CHOMEI_KANA,BANCHI_KANA,KATAGAKI_KANA,KATAGAKI_HIDE_FLG,\r\n                          GAIJI_FLG,HOJINSOSHIKI_CD,JE_KOKUHOSHISANWARI_KBN,JE_JINTEKIGENMEN_KBN,JE_SHOYUSHAKEISHONIN_KBN,JE_LINK_KOJIN_NO,\r\n                          JE_NAYOSE_NO,YOBI1_CD,YOBI2_CD,YOBI3_CD,YOBI4_CD,YOBI5_CD,YOBI1_CH,YOBI2_CH,YOBI3_CH,YOBI4_CH,YOBI5_CH,'\r\n\r\n                          ||  I_SYSDATE || ','  || I_SYSTIME || ',''' || i_NTANMATSU_NO || '''\r\n                         ,TOUGOU_NO, SEIDO_KOJIN_NO, SEIDO_HOJIN_NO, ZOKUGARACD1, ZOKUGARACD2, ZOKUGARACD3, ZOKUGARACD4, ZOKUGARAKBN, ZOKUGARAMEI, JITSUZOKUGARAMEI ' ||\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n--2024/03/26 DIS.liuqimeng Update 0.3.000.000:受入検証指摘対応\r\n--                        ',0,0,NULL,NULL,NULL,NULL,NULL,NULL,0,0,NULL,0,0,NULL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,NULL,NULL,NULL,0,NULL' ||\r\n                        ',0,0,NULL,NULL,NULL,NULL,NULL,NULL,0,0,NULL,0,0,NULL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,NULL,NULL,NULL,0,NULL,0,0,0,NULL' ||\r\n--2024/01/25 DIS.liuqimeng Add end\r\n                        ' FROM JIBTJUKIKIHON WHERE KOJIN_NO = ' || CR_IDO.KOJIN_NO;\r\n\r\n                          EXECUTE IMMEDIATE VSQL;\r\n          VKUBUN := 'U';\r\n        END IF;\r\n      ELSE\r\n        VKUBUN := 'I';\r\n      END IF;\r\n    END IF;\r\n--2024/04/03 DIS.Wangrucheng Update 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n--    IF CR_IDO.KOJIN_NO < 999999900000 THEN\r\n    IF CR_IDO.KOJIN_NO < 999999999900000 THEN\r\n      IF NKADO_BI5 <= I_SYSDATE AND\r\n         NJOKEN111 = 0 AND\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--         CR_IDO.IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n         --CR_IDO.IDO_JIYU IN (150,160,280) THEN\r\n         CR_IDO.IDO_JIYU IN (150,160,280,191) THEN\r\n           T_JINKAKU_KBN := 9;\r\n           T_GENZON_KBN := 9;\r\n           T_NUSHI_KBN := 9;\r\n           T_GYOSEIKU_CD := 0;\r\n           T_CHIKU_CD := 0;\r\n      ELSE\r\n        BEGIN\r\n          SELECT OAZA_CD\r\n            INTO T_OAZA_CD\r\n            FROM JIBTJUKIKIHON\r\n           WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n               T_OAZA_CD := 0;\r\n        END;\r\n\r\n        BEGIN\r\n          SELECT JINKAKU_KBN,GENZON_KBN,NUSHI_KBN,GYOSEIKU_CD,CHIKU_CD\r\n            INTO T_JINKAKU_KBN,T_GENZON_KBN,T_NUSHI_KBN,T_GYOSEIKU_CD,T_CHIKU_CD\r\n            FROM JIBTJUKIIDO\r\n           WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n            T_JINKAKU_KBN := 9;\r\n            T_GENZON_KBN := 9;\r\n            T_NUSHI_KBN := 9;\r\n            T_GYOSEIKU_CD := 0;\r\n            T_CHIKU_CD := 0;\r\n        END;\r\n      END iF;\r\n    ELSE\r\n      T_JINKAKU_KBN := 9;\r\n      T_GENZON_KBN := 9;\r\n      T_NUSHI_KBN := 9;\r\n      T_OAZA_CD := 0;\r\n      T_GYOSEIKU_CD := 0;\r\n      T_CHIKU_CD := 0;\r\n    END IF;\r\n    --------------------------------------------------------------\r\n    -- ワーク宛名基本データ抽出\r\n    -------------------------------------------------------------\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--    IF CR_IDO.IDO_JIYU != 52 THEN\r\n    IF CR_IDO.IDO_JIYU != 520 THEN\r\n      SELECT *\r\n        INTO R_BUPD_ATENA\r\n        FROM JIBWBUPD_JUKIKIHON\r\n       WHERE ENTRY_ID = CR_IDO.ENTRY_ID\r\n         AND KOJIN_NO = CR_IDO.KOJIN_NO;\r\n       --住基情報中間（仮更新用）テーブルから対象者のレコードを取得し、変数「R_BUPD_JUKIJOHO」に退避\r\n       BEGIN\r\n         SELECT BUJH.* INTO R_BUPD_JUKIJOHO\r\n          FROM JIBWBUPD_JUKIJOHO BUJH\r\n          WHERE BUJH.ENTRY_ID = CR_IDO.ENTRY_ID\r\n            AND BUJH.KOJIN_NO = CR_IDO.KOJIN_NO\r\n            AND BUJH.RIREKI_RENBAN =  R_BUPD_ATENA.RIREKI_RENBAN;\r\n       EXCEPTION\r\n         WHEN OTHERS THEN\r\n           R_BUPD_JUKIJOHO := NULL;\r\n       END;\r\n    END IF;\r\n    --------------------------------------------------------------\r\n    -- ワーク住基住所データ抽出（配列）\r\n    -------------------------------------------------------------\r\n    I_CNT := 0;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--    IF NKADO_BI5 <= I_SYSDATE AND NJOKEN111 = 0 AND CR_IDO.IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n    --IF NKADO_BI5 <= I_SYSDATE AND NJOKEN111 = 0 AND CR_IDO.IDO_JIYU IN (150,160,280) THEN\r\n    IF NKADO_BI5 <= I_SYSDATE AND NJOKEN111 = 0 AND CR_IDO.IDO_JIYU IN (150,160,280,191) THEN\r\n       WK_FFLG := 1;\r\n\r\n    ELSE\r\n       WK_FFLG := 0;\r\n\r\n    END IF;\r\n    FOR CR_JUSHO IN C_JUSHO(CR_IDO.ENTRY_ID,CR_IDO.KOJIN_NO,WK_FFLG) LOOP\r\n      I_CNT := I_CNT + 1;\r\n      M_JUSHO(I_CNT) := CR_JUSHO;\r\n      IF M_JUSHO(I_CNT).HONBAN = '0' THEN\r\n         M_JUSHO(I_CNT).HONBAN := '　　　　　';\r\n      END IF;\r\n      IF M_JUSHO(I_CNT).EDABAN1 = '0' THEN\r\n         M_JUSHO(I_CNT).EDABAN1 := '　　　　　';\r\n      END IF;\r\n      IF M_JUSHO(I_CNT).EDABAN2 = '0' THEN\r\n         M_JUSHO(I_CNT).EDABAN2 := '　　　　　';\r\n      END IF;\r\n      IF M_JUSHO(I_CNT).EDABAN3 = '0' THEN\r\n         M_JUSHO(I_CNT).EDABAN3 := '　　　　　';\r\n      END IF;\r\n      IF M_JUSHO(I_CNT).GAIKU = '0' THEN\r\n         M_JUSHO(I_CNT).GAIKU := '　　　　　';\r\n      END IF;\r\n      IF M_JUSHO(I_CNT).TOU = '0' THEN\r\n         M_JUSHO(I_CNT).TOU := '　　　　　';\r\n      END IF;\r\n      IF M_JUSHO(I_CNT).GOU = '0' THEN\r\n         M_JUSHO(I_CNT).GOU := '　　　　　';\r\n      END IF;\r\n    END LOOP;\r\n    --------------------------------------------------------------\r\n    -- 住基異動データ抽出\r\n    -------------------------------------------------------------\r\n    SELECT COUNT(*)\r\n      INTO I_CNT1\r\n      FROM JIBTJUKIIDO\r\n     WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n    R_IDO := NULL;\r\n    IF I_CNT1 != 0 THEN\r\n      SELECT *\r\n        INTO R_IDO\r\n        FROM JIBTJUKIIDO\r\n       WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n      -- 世帯番号退避\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--      IF CR_IDO.IDO_JIYU = 33 OR\r\n--         CR_IDO.IDO_JIYU = 34 OR\r\n--         CR_IDO.IDO_JIYU = 35 OR\r\n--         CR_IDO.IDO_JIYU = 37 THEN\r\n      IF CR_IDO.IDO_JIYU = 330 OR\r\n         CR_IDO.IDO_JIYU = 340 OR\r\n         CR_IDO.IDO_JIYU = 350 OR\r\n         CR_IDO.IDO_JIYU = 370 THEN\r\n--2024/01/25 DIS.liuqimeng Update end\r\n        I_IDOMOTO  := R_IDO.SETAI_NO;\r\n        I_JIYU_FLG := 1;\r\n      END IF;\r\n-- 排他解除世帯番号追加\r\n      IF I_HAITA_SETAI1 IS NULL THEN\r\n        I_HAITA_SETAI1 := R_IDO.SETAI_NO;\r\n      ELSE\r\n        IF I_HAITA_SETAI2 IS NULL THEN\r\n          IF I_HAITA_SETAI1 != R_IDO.SETAI_NO THEN\r\n            I_HAITA_SETAI2 := R_IDO.SETAI_NO;\r\n          END IF;\r\n        END IF;\r\n      END IF;\r\n    END IF;\r\n-- 排他解除世帯番号追加\r\n--2024/04/03 DIS.Wangrucheng Update 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n--    IF CR_IDO.SETAI_NO <= 9999000 THEN\r\n    IF CR_IDO.SETAI_NO <= 999999999900000 THEN\r\n      IF I_HAITA_SETAI1 IS NULL THEN\r\n        I_HAITA_SETAI1 := R_IDO.SETAI_NO;\r\n      ELSE\r\n        IF I_HAITA_SETAI2 IS NULL THEN\r\n          IF I_HAITA_SETAI1 != R_IDO.SETAI_NO THEN\r\n            I_HAITA_SETAI2 := R_IDO.SETAI_NO;\r\n          END IF;\r\n        END IF;\r\n      END IF;\r\n    END IF;\r\n    --------------------------------------------------------------\r\n    -- 宛名基本データ抽出\r\n    -------------------------------------------------------------\r\n    SELECT COUNT(*)\r\n      INTO A_CNT\r\n      FROM JIBTJUKIKIHON\r\n     WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n    IF A_CNT != 0 THEN\r\n      SELECT *\r\n        INTO R_ATENA\r\n        FROM JIBTJUKIKIHON\r\n       WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n    END IF;\r\n\r\n    --------------------------------------------------------------\r\n    -- 異動事由判定\r\n    -------------------------------------------------------------\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--    IF CR_IDO.IDO_JIYU = 52 THEN\r\n    IF CR_IDO.IDO_JIYU = 520 THEN\r\n      --------------------------------------------------------------\r\n      -- 住基異動データ更新\r\n      -------------------------------------------------------------\r\n      IF I_CNT1 != 0 THEN\r\n        UPDATE JIBTJUKIIDO\r\n          SET KISAI_JUNI = CR_IDO.KISAI_JUNI,\r\n              SYS_KOSHINBI = i_SHORIBI,\r\n              SYS_JIKAN = I_SYSTIME,\r\n              SYS_SHOKUINKOJIN_NO = i_NSHOKUIN,\r\n              SYS_TANMATSU_NO = i_NTANMATSU_NO\r\n        WHERE KOJIN_NO = CR_IDO.KOJIN_NO\r\n        AND   KISAI_JUNI != CR_IDO.KISAI_JUNI;\r\n      END IF;\r\n    ELSE\r\n      ------------------------------------------------\r\n      -- 宛名履歴ＴＢＬ追加\r\n      ------------------------------------------------\r\n      IF I_CNT1 != 0 OR A_CNT != 0 THEN\r\n        IF NKADO_BI5 <= I_SYSDATE AND\r\n           NJOKEN111 = 0 AND\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--           CR_IDO.IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n           --CR_IDO.IDO_JIYU IN (150,160,280) THEN\r\n           CR_IDO.IDO_JIYU IN (150,160,280,191) THEN\r\n             NULL;\r\n        ELSE\r\n--2024/04/03 DIS.Wangrucheng Add start 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n          -- 異動事由は「412：誤記修正」の場合\r\n         --2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n         --IF CR_IDO.IDO_JIYU = 412 THEN\r\n        IF CR_IDO.IDO_JIYU = 412 and  R_ATENA.RIREKI_RENBAN* 100 +R_ATENA.RIREKI_EDABAN > R_BUPD_ATENA.RIREKI_RENBAN* 100 +R_BUPD_ATENA.RIREKI_EDABAN THEN\r\n            RJIBTJUKIRIREKI_INS := NULL;\r\n            -- 宛名番号\r\n            RJIBTJUKIRIREKI_INS.KOJIN_NO := R_BUPD_ATENA.KOJIN_NO;\r\n            -- 履歴連番\r\n            RJIBTJUKIRIREKI_INS.RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN;\r\n            -- 履歴枝番\r\n            RJIBTJUKIRIREKI_INS.RIREKI_EDABAN := R_BUPD_ATENA.RIREKI_EDABAN + 1;\r\n            -- 最新フラグ\r\n            RJIBTJUKIRIREKI_INS.SAISHIN_FLG := 1;\r\n            -- 取消フラグ\r\n            RJIBTJUKIRIREKI_INS.TORIKESHI_FLG := R_BUPD_ATENA.TORIKESHI_FLG;\r\n            -- 除票用データフラグ\r\n            RJIBTJUKIRIREKI_INS.JOHYOYODATA_FLG := R_BUPD_ATENA.JOHYOYODATA_FLG;\r\n            -- 適用日\r\n            RJIBTJUKIRIREKI_INS.TEKIYO_BI := R_BUPD_ATENA.TEKIYO_BI;\r\n            -- 登録業務\r\n            RJIBTJUKIRIREKI_INS.TOROKU_GYOMU := R_BUPD_ATENA.TOROKU_GYOMU;\r\n            -- 世帯番号\r\n            RJIBTJUKIRIREKI_INS.SETAI_NO := R_BUPD_ATENA.SETAI_NO;\r\n            -- 現存区分\r\n            RJIBTJUKIRIREKI_INS.GENZON_KBN := R_BUPD_ATENA.GENZON_KBN;\r\n            -- 準世帯区分\r\n            RJIBTJUKIRIREKI_INS.JUN_SETAI_KBN := NVL(CR_IDO.JUN_SETAI_KBN,0);\r\n            -- 人格区分\r\n            RJIBTJUKIRIREKI_INS.JINKAKU_KBN := R_BUPD_ATENA.JINKAKU_KBN;\r\n            -- 国籍等コード\r\n            RJIBTJUKIRIREKI_INS.KOKUSEKI_CD := R_BUPD_ATENA.KOKUSEKI_CD;\r\n            -- 支所コード\r\n            RJIBTJUKIRIREKI_INS.SHISHO_CD := R_BUPD_ATENA.SHISHO_CD;\r\n            -- 地区コード\r\n            RJIBTJUKIRIREKI_INS.CHIKU_CD := R_BUPD_ATENA.CHIKU_CD;\r\n            -- 行政区コード\r\n            RJIBTJUKIRIREKI_INS.GYOSEIKU_CD := R_BUPD_ATENA.GYOSEIKU_CD;\r\n            -- 班コード\r\n            RJIBTJUKIRIREKI_INS.HAN_CD := R_BUPD_ATENA.HAN_CD;\r\n            -- 小学校区コード\r\n            RJIBTJUKIRIREKI_INS.SHOGAKU_CD := R_BUPD_ATENA.SHOGAKU_CD;\r\n            -- 中学校区コード\r\n            RJIBTJUKIRIREKI_INS.CHUGAKU_CD := R_BUPD_ATENA.CHUGAKU_CD;\r\n            -- 投票区コード\r\n            RJIBTJUKIRIREKI_INS.TOHYOKU_CD := R_BUPD_ATENA.TOHYOKU_CD;\r\n            -- 算定団体コード\r\n            RJIBTJUKIRIREKI_INS.SANTEIDANTAI_CD := R_BUPD_ATENA.SANTEIDANTAI_CD;\r\n            -- 生年月日\r\n            RJIBTJUKIRIREKI_INS.SEINENGAPI := R_BUPD_ATENA.SEINENGAPI;\r\n            -- 和暦生年月日\r\n            RJIBTJUKIRIREKI_INS.WAREKI_SEINENGAPI := R_BUPD_ATENA.WAREKI_SEINENGAPI;\r\n            -- 表示用生年月日\r\n            RJIBTJUKIRIREKI_INS.HYOJI_SEINENGAPI := R_BUPD_ATENA.HYOJI_SEINENGAPI;\r\n            -- 性別\r\n            RJIBTJUKIRIREKI_INS.SEIBETSU := R_BUPD_ATENA.SEIBETSU;\r\n            -- 市町村コード\r\n            RJIBTJUKIRIREKI_INS.USER_CD := R_BUPD_ATENA.USER_CD;\r\n            -- 大字コード\r\n            RJIBTJUKIRIREKI_INS.OAZA_CD := R_BUPD_ATENA.OAZA_CD;\r\n            -- 本番\r\n            RJIBTJUKIRIREKI_INS.HONBAN := R_BUPD_ATENA.HONBAN;\r\n            -- 枝番１\r\n            RJIBTJUKIRIREKI_INS.EDABAN1 := R_BUPD_ATENA.EDABAN1;\r\n            -- 枝番２\r\n            RJIBTJUKIRIREKI_INS.EDABAN2 := R_BUPD_ATENA.EDABAN2;\r\n            -- 枝番３\r\n            RJIBTJUKIRIREKI_INS.EDABAN3 := R_BUPD_ATENA.EDABAN3;\r\n            -- 方書コード\r\n            RJIBTJUKIRIREKI_INS.KATAGAKI_CD := R_BUPD_ATENA.KATAGAKI_CD;\r\n            -- 街区番号\r\n            RJIBTJUKIRIREKI_INS.GAIKU := R_BUPD_ATENA.GAIKU;\r\n            -- 棟\r\n            RJIBTJUKIRIREKI_INS.TOU := R_BUPD_ATENA.TOU;\r\n            -- 号\r\n            RJIBTJUKIRIREKI_INS.GOU := R_BUPD_ATENA.GOU;\r\n            -- 自治コード\r\n            RJIBTJUKIRIREKI_INS.JICHI_CD := R_BUPD_ATENA.JICHI_CD;\r\n            -- 氏名カナ\r\n            RJIBTJUKIRIREKI_INS.SHIMEI_KANA := R_BUPD_ATENA.SHIMEI_KANA;\r\n            -- 氏名漢字\r\n            RJIBTJUKIRIREKI_INS.SHIMEI_KANJI := R_BUPD_ATENA.SHIMEI_KANJI;\r\n            -- 郵便番号\r\n            RJIBTJUKIRIREKI_INS.YUBIN_NO := R_BUPD_ATENA.YUBIN_NO;\r\n            -- 郵便番号BC\r\n            RJIBTJUKIRIREKI_INS.YUBIN_NOBC := R_BUPD_ATENA.YUBIN_NOBC;\r\n            -- 町名\r\n            RJIBTJUKIRIREKI_INS.CHOMEI := R_BUPD_ATENA.CHOMEI;\r\n            -- 番地\r\n            RJIBTJUKIRIREKI_INS.BANCHI := R_BUPD_ATENA.BANCHI;\r\n            -- 方書\r\n            RJIBTJUKIRIREKI_INS.KATAGAKI := R_BUPD_ATENA.KATAGAKI;\r\n            -- 代表者肩書\r\n            RJIBTJUKIRIREKI_INS.DAIHYO_KATAGAKI := R_BUPD_ATENA.DAIHYO_KATAGAKI;\r\n            -- 代表者氏名\r\n            RJIBTJUKIRIREKI_INS.DAIHYO_SHIMEI := R_BUPD_ATENA.DAIHYO_SHIMEI;\r\n            -- 電話番号\r\n            RJIBTJUKIRIREKI_INS.TEL_NO := R_BUPD_ATENA.TEL_NO;\r\n            -- 電話区分\r\n            RJIBTJUKIRIREKI_INS.TEL_KBN := R_BUPD_ATENA.TEL_KBN;\r\n            -- FAX\r\n            RJIBTJUKIRIREKI_INS.FAX_NO := R_BUPD_ATENA.FAX_NO;\r\n            -- メールアドレス\r\n            RJIBTJUKIRIREKI_INS.MAIL_ADS := R_BUPD_ATENA.MAIL_ADS;\r\n            -- 郵便返却区分\r\n            RJIBTJUKIRIREKI_INS.YUHEN_KBN := R_BUPD_ATENA.YUHEN_KBN;\r\n            -- 登録事由\r\n            RJIBTJUKIRIREKI_INS.TOROKU_JIYU := R_BUPD_ATENA.TOROKU_JIYU;\r\n            -- 住民票コード\r\n            RJIBTJUKIRIREKI_INS.JUMINHYO_CD := NVL(R_BUPD_ATENA.JUMINHYO_CD,0);\r\n            -- 続柄コード１\r\n            RJIBTJUKIRIREKI_INS.ZOKUGARA_CD1 := NVL(R_BUPD_ATENA.ZOKUGARACD1,0);\r\n            -- 続柄コード２\r\n            RJIBTJUKIRIREKI_INS.ZOKUGARA_CD2 := NVL(R_BUPD_ATENA.ZOKUGARACD2,0);\r\n            -- 続柄コード３\r\n            RJIBTJUKIRIREKI_INS.ZOKUGARA_CD3 := NVL(R_BUPD_ATENA.ZOKUGARACD3,0);\r\n            -- 続柄コード４\r\n            RJIBTJUKIRIREKI_INS.ZOKUGARA_CD4 := NVL(R_BUPD_ATENA.ZOKUGARACD4,0);\r\n            -- 続柄区分\r\n            RJIBTJUKIRIREKI_INS.ZOKUGARA_KBN := NVL(R_BUPD_ATENA.ZOKUGARAKBN,0);\r\n            -- 続柄名\r\n            RJIBTJUKIRIREKI_INS.ZOKUGARA_MEI := R_BUPD_ATENA.ZOKUGARAMEI;\r\n            -- 実続柄名\r\n            RJIBTJUKIRIREKI_INS.JITSU_ZOKUGARA_MEI := R_BUPD_ATENA.JITSUZOKUGARAMEI;\r\n            -- 記載順位\r\n            RJIBTJUKIRIREKI_INS.KISAI_JUNI := NVL(CR_IDO.KISAI_JUNI,0);\r\n            -- 異動日\r\n            RJIBTJUKIRIREKI_INS.IDO_BI := NVL(CR_IDO.IDO_BI,0);\r\n            -- 異動事由\r\n            RJIBTJUKIRIREKI_INS.IDO_JIYU := NVL(CR_IDO.IDO_JIYU,0);\r\n            -- 異動届出日\r\n            RJIBTJUKIRIREKI_INS.IDO_TODOKE_BI := NVL(CR_IDO.IDO_TODOKE_BI,0);\r\n            -- 異動届出区分\r\n            RJIBTJUKIRIREKI_INS.IDO_TODOKE_KBN := NVL(CR_IDO.IDO_TODOKE_KBN,0);\r\n            -- 住定日\r\n            RJIBTJUKIRIREKI_INS.JUTEI_BI := NVL(CR_IDO.JUTEI_BI,0);\r\n            -- 住定事由\r\n            RJIBTJUKIRIREKI_INS.JUTEI_JIYU := NVL(CR_IDO.JUTEI_JIYU,0);\r\n            -- 住定届出日\r\n            RJIBTJUKIRIREKI_INS.JUTEI_TODOKEDE_BI := NVL(CR_IDO.JUTEI_TODOKEDE_BI,0);\r\n            -- 住定届出区分\r\n            RJIBTJUKIRIREKI_INS.JUTEI_TODOKEDE_KBN := NVL(CR_IDO.JUTEI_TODOKEDE_KBN,0);\r\n            -- 現住所連番\r\n            RJIBTJUKIRIREKI_INS.GENJUSHO_REN := NVL(CR_IDO.GENJUSHO_REN,0);\r\n            -- 前住所連番\r\n            RJIBTJUKIRIREKI_INS.ZENJUSHO_REN := NVL(CR_IDO.ZENJUSHO_REN,0);\r\n            -- 転入前住所連番\r\n            RJIBTJUKIRIREKI_INS.TENNYUMAE_REN := NVL(CR_IDO.TENNYUMAE_REN,0);\r\n            -- 転入未届地連番\r\n            RJIBTJUKIRIREKI_INS.TENNYU_MITODOKE_REN := NVL(CR_IDO.TENNYU_MITODOKE_REN,0);\r\n            -- 本籍地連番\r\n            RJIBTJUKIRIREKI_INS.HONSEKI_REN := NVL(CR_IDO.HONSEKI_REN,0);\r\n            -- 転出予定日\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_YOTEI_BI := NVL(CR_IDO.TENSHUTSU_YOTEI_BI,0);\r\n            -- 転出予定届出日\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_YOTEI_TODOKEDE_BI := NVL(CR_IDO.TENSHUTSU_YOTEI_TODOKEDE_BI,0);\r\n            -- 転出予定届出区分\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_YOTEI_TODOKEDE_KBN := NVL(CR_IDO.TENSHUTSU_YOTEI_TODOKEDE_KBN,0);\r\n            -- 転出予定地連番\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_YOTEI_REN := NVL(CR_IDO.TENSHUTSU_YOTEI_REN,0);\r\n            -- 転出確定日\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_KAKUTEI_BI := NVL(CR_IDO.TENSHUTSU_KAKUTEI_BI,0);\r\n            -- 転出確定通知日\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_KAKUTEI_TSUCHI_BI := NVL(CR_IDO.TENSHUTSU_KAKUTEI_TSUCHI_BI,0);\r\n            -- 転出確定届出区分\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_KAKUTEI_TODOKEDE_KBN := NVL(CR_IDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN,0);\r\n            -- 転出確定地連番\r\n            RJIBTJUKIRIREKI_INS.TENSHUTSU_KAKUTEI_REN := NVL(CR_IDO.TENSHUTSU_KAKUTEI_REN,0);\r\n            -- 住民となる日\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NARU := NVL(CR_IDO.JUMIN_NARU,0);\r\n            -- 住民となる事由\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NARU_JIYU := NVL(CR_IDO.JUMIN_NARU_JIYU,0);\r\n            -- 住民となる届出日\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NARU_TODOKEDE_BI := NVL(CR_IDO.JUMIN_NARU_TODOKEDE_BI,0);\r\n            -- 住民となる届出区分\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NARU_TODOKEDE_KBN := NVL(CR_IDO.JUMIN_NARU_TODOKEDE_KBN,0);\r\n            -- 住民でなくなる日\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NAKUNARU := NVL(CR_IDO.JUMIN_NAKUNARU,0);\r\n            -- 住民でなくなる事由\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NAKUNARU_JIYU := NVL(CR_IDO.JUMIN_NAKUNARU_JIYU,0);\r\n            -- 住民でなくなる届出日\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NAKUNARU_TODOKEDE_BI := NVL(CR_IDO.JUMIN_NAKUNARU_TODOKEDE_BI,0);\r\n            -- 住民でなくなる届出区分\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NAKUNARU_TODOKEDE_KBN := NVL(CR_IDO.JUMIN_NAKUNARU_TODOKEDE_KBN,0);\r\n            -- 死亡日不詳区分\r\n            RJIBTJUKIRIREKI_INS.SHIBOBI_FUSHO_KBN := NVL(CR_IDO.SHIBOBI_FUSHO_KBN,0);\r\n            -- 本名カナ\r\n            RJIBTJUKIRIREKI_INS.HONMYO_KANA := R_BUPD_ATENA.HONMYO_KANA;\r\n            -- 本名漢字\r\n            RJIBTJUKIRIREKI_INS.HONMYO_KANJI := R_BUPD_ATENA.HONMYO_KANJI;\r\n            -- 世帯主氏名カナ\r\n            RJIBTJUKIRIREKI_INS.NUSHI_SHIMEI_KANA := CR_IDO.NUSHI_SHIMEI_KANA;\r\n            -- 世帯主氏名漢字\r\n            RJIBTJUKIRIREKI_INS.NUSHI_SHIMEI_KANJI := CR_IDO.NUSHI_SHIMEI_KANJI;\r\n            -- 備考\r\n            RJIBTJUKIRIREKI_INS.BIKO := CR_IDO.BIKO;\r\n            -- 改製日\r\n            RJIBTJUKIRIREKI_INS.KAISEI_BI := NVL(CR_IDO.KAISEI_BI,0);\r\n            -- 改製連番\r\n            RJIBTJUKIRIREKI_INS.KAISEI_REN := NVL(CR_IDO.KAISEI_REN,0);\r\n            -- 旧氏名カナ\r\n            RJIBTJUKIRIREKI_INS.KYU_SHIMEI_KANA := CR_IDO.KYU_SHIMEI_KANA;\r\n            -- 旧氏名漢字\r\n            RJIBTJUKIRIREKI_INS.KYU_SHIMEI_KANJI := CR_IDO.KYU_SHIMEI_KANJI;\r\n            -- 処理日キー\r\n            RJIBTJUKIRIREKI_INS.SHORIBI_KEY := NVL(CR_IDO.SHORIBI_KEY,0);\r\n            -- 処理時間キー\r\n            RJIBTJUKIRIREKI_INS.SHORI_JIKAN_KEY := NVL(CR_IDO.SHORI_JIKAN_KEY,0);\r\n            -- 処理区分キー\r\n            RJIBTJUKIRIREKI_INS.SHORI_KBN_KEY := NVL(CR_IDO.SHORI_KBN_KEY,0);\r\n            -- 全部一部キー\r\n            RJIBTJUKIRIREKI_INS.ZENBU_ICHIBU_KEY := NVL(CR_IDO.ZENBU_ICHIBU_KEY,0);\r\n            -- 職員番号キー\r\n            RJIBTJUKIRIREKI_INS.SHOKUINKOJIN_NO_KEY := CR_IDO.SHOKUINKOJIN_NO_KEY;\r\n            -- 作成日\r\n            RJIBTJUKIRIREKI_INS.SYS_SAKUSEIBI := R_BUPD_ATENA.SYS_SAKUSEIBI;\r\n            -- 更新日\r\n            RJIBTJUKIRIREKI_INS.SYS_KOSHINBI := R_BUPD_ATENA.SYS_KOSHINBI;\r\n            -- 更新時間\r\n            RJIBTJUKIRIREKI_INS.SYS_JIKAN := R_BUPD_ATENA.SYS_JIKAN;\r\n            -- 更新職員宛名番号\r\n            RJIBTJUKIRIREKI_INS.SYS_SHOKUINKOJIN_NO := R_BUPD_ATENA.SYS_SHOKUINKOJIN_NO;\r\n            -- 更新端末番号\r\n            RJIBTJUKIRIREKI_INS.SYS_TANMATSU_NO := R_BUPD_ATENA.SYS_TANMATSU_NO;\r\n            -- ごみ業者コード\r\n            RJIBTJUKIRIREKI_INS.GOMI_CD := NVL(CR_IDO.GOMI_CD,0);\r\n            -- し尿業者コード\r\n            RJIBTJUKIRIREKI_INS.SINYO_CD := NVL(CR_IDO.SINYO_CD,0);\r\n            -- 広域交付発行停止コード\r\n            RJIBTJUKIRIREKI_INS.KOIKIKOFU_STOP_CD := NVL(CR_IDO.KOIKIKOFU_STOP_CD,0);\r\n            -- 町名カナ（全角文字）\r\n            RJIBTJUKIRIREKI_INS.CHOMEI_KANA := R_BUPD_ATENA.CHOMEI_KANA;\r\n            -- 番地カナ（全角文字）\r\n            RJIBTJUKIRIREKI_INS.BANCHI_KANA := R_BUPD_ATENA.BANCHI_KANA;\r\n            -- 方書カナ（全角文字）\r\n            RJIBTJUKIRIREKI_INS.KATAGAKI_KANA := R_BUPD_ATENA.KATAGAKI_KANA;\r\n            -- 方書非表示フラグ\r\n            RJIBTJUKIRIREKI_INS.KATAGAKI_HIDE_FLG := R_BUPD_ATENA.KATAGAKI_HIDE_FLG;\r\n            -- 外字未登録フラグ\r\n            RJIBTJUKIRIREKI_INS.GAIJI_FLG := R_BUPD_ATENA.GAIJI_FLG;\r\n            -- 法人組織コード\r\n            RJIBTJUKIRIREKI_INS.HOJINSOSHIKI_CD := R_BUPD_ATENA.HOJINSOSHIKI_CD;\r\n            -- 固定_国保資産割対象区分\r\n            RJIBTJUKIRIREKI_INS.JE_KOKUHOSHISANWARI_KBN := R_BUPD_ATENA.JE_KOKUHOSHISANWARI_KBN;\r\n            -- 固定_人的減免区分\r\n            RJIBTJUKIRIREKI_INS.JE_JINTEKIGENMEN_KBN := R_BUPD_ATENA.JE_JINTEKIGENMEN_KBN;\r\n            -- 固定_所有者継承人区分\r\n            RJIBTJUKIRIREKI_INS.JE_SHOYUSHAKEISHONIN_KBN := R_BUPD_ATENA.JE_SHOYUSHAKEISHONIN_KBN;\r\n            -- 固定_リンク先宛名番号\r\n            RJIBTJUKIRIREKI_INS.JE_LINK_KOJIN_NO := R_BUPD_ATENA.JE_LINK_KOJIN_NO;\r\n            -- 固定_名寄番号\r\n            RJIBTJUKIRIREKI_INS.JE_NAYOSE_NO := R_BUPD_ATENA.JE_NAYOSE_NO;\r\n            -- 予備コード1\r\n            RJIBTJUKIRIREKI_INS.YOBI1_CD := R_BUPD_ATENA.YOBI1_CD;\r\n            -- 予備コード2\r\n            RJIBTJUKIRIREKI_INS.YOBI2_CD := R_BUPD_ATENA.YOBI2_CD;\r\n            -- 予備コード3\r\n            RJIBTJUKIRIREKI_INS.YOBI3_CD := R_BUPD_ATENA.YOBI3_CD;\r\n            -- 予備コード4\r\n            RJIBTJUKIRIREKI_INS.YOBI4_CD := R_BUPD_ATENA.YOBI4_CD;\r\n            -- 予備コード5\r\n            RJIBTJUKIRIREKI_INS.YOBI5_CD := R_BUPD_ATENA.YOBI5_CD;\r\n            -- 予備項目1\r\n            RJIBTJUKIRIREKI_INS.YOBI1_CH := R_BUPD_ATENA.YOBI1_CH;\r\n            -- 予備項目2\r\n            RJIBTJUKIRIREKI_INS.YOBI2_CH := R_BUPD_ATENA.YOBI2_CH;\r\n            -- 予備項目3\r\n            RJIBTJUKIRIREKI_INS.YOBI3_CH := R_BUPD_ATENA.YOBI3_CH;\r\n            -- 予備項目4\r\n            RJIBTJUKIRIREKI_INS.YOBI4_CH := R_BUPD_ATENA.YOBI4_CH;\r\n            -- 予備項目5\r\n            RJIBTJUKIRIREKI_INS.YOBI5_CH := R_BUPD_ATENA.YOBI5_CH;\r\n            -- アルファベット氏名カナ\r\n            RJIBTJUKIRIREKI_INS.ALP_SHIMEI_KANA := CR_IDO.ALP_SHIMEI_KANA;\r\n            -- アルファベット氏名漢字\r\n            RJIBTJUKIRIREKI_INS.ALP_SHIMEI_KANJI := CR_IDO.ALP_SHIMEI_KANJI;\r\n            -- 外国人氏名カナ\r\n            RJIBTJUKIRIREKI_INS.GAI_SHIMEI_KANA := CR_IDO.GAI_SHIMEI_KANA;\r\n            -- 外国人氏名漢字\r\n            RJIBTJUKIRIREKI_INS.GAI_SHIMEI_KANJI := CR_IDO.GAI_SHIMEI_KANJI;\r\n            -- 通称名カナ\r\n            RJIBTJUKIRIREKI_INS.TSUSHOMEI_KANA := CR_IDO.TSUSHOMEI_KANA;\r\n            -- 通称名漢字\r\n            RJIBTJUKIRIREKI_INS.TSUSHOMEI_KANJI := CR_IDO.TSUSHOMEI_KANJI;\r\n            -- 併記名カナ\r\n            RJIBTJUKIRIREKI_INS.HEIKIMEI_KANA := CR_IDO.HEIKIMEI_KANA;\r\n            -- 併記名漢字\r\n            RJIBTJUKIRIREKI_INS.HEIKIMEI_KANJI := CR_IDO.HEIKIMEI_KANJI;\r\n            -- 外国人の住民となる日\r\n            RJIBTJUKIRIREKI_INS.GAIKOKU_JUMIN_NARU := NVL(CR_IDO.GAIKOKU_JUMIN_NARU,0);\r\n            -- 在留番号種別\r\n            RJIBTJUKIRIREKI_INS.ZAIRYU_NO_SHUBETSU := NVL(CR_IDO.ZAIRYU_NO_SHUBETSU,0);\r\n            -- 在留カード番号\r\n            RJIBTJUKIRIREKI_INS.ZAIRYU_CARD_NO := CR_IDO.ZAIRYU_CARD_NO;\r\n            -- 在留資格コード\r\n            RJIBTJUKIRIREKI_INS.ZAIRYU_SHIKAKU_CD := NVL(CR_IDO.ZAIRYU_SHIKAKU_CD,0);\r\n            -- 在留期間終了年月日\r\n            RJIBTJUKIRIREKI_INS.ZAIRYU_SHURYO_BI := NVL(CR_IDO.ZAIRYU_SHURYO_BI,0);\r\n            -- 在留期間年\r\n            RJIBTJUKIRIREKI_INS.ZAIRYU_KIKAN_NEN := NVL(CR_IDO.ZAIRYU_KIKAN_NEN,0);\r\n            -- 在留期間月\r\n            RJIBTJUKIRIREKI_INS.ZAIRYU_KIKAN_TSUKI := NVL(CR_IDO.ZAIRYU_KIKAN_TSUKI,0);\r\n            -- 在留期間日\r\n            RJIBTJUKIRIREKI_INS.ZAIRYU_KIKAN_HI := NVL(CR_IDO.ZAIRYU_KIKAN_HI,0);\r\n            -- カード有効期間満了日\r\n            RJIBTJUKIRIREKI_INS.CARD_MANRYO_BI := NVL(CR_IDO.CARD_MANRYO_BI,0);\r\n            -- 第30条45に規定する区分\r\n            RJIBTJUKIRIREKI_INS.KBN_30_45 := NVL(CR_IDO.KBN_30_45,0);\r\n            -- 居住地の届出の有無\r\n            RJIBTJUKIRIREKI_INS.KYOJYUCHI_UMU := NVL(CR_IDO.KYOJYUCHI_UMU,0);\r\n            -- 生年月日不詳区分\r\n            RJIBTJUKIRIREKI_INS.SEINENGAPI_FUSHO_KBN := NVL(CR_IDO.SEINENGAPI_FUSHO_KBN,0);\r\n            -- 旅券番号\r\n            RJIBTJUKIRIREKI_INS.RYOKEN_BANGO := CR_IDO.RYOKEN_BANGO;\r\n            -- 旅券発行年月日\r\n            RJIBTJUKIRIREKI_INS.RYOKEN_HAKKO_BI := NVL(CR_IDO.RYOKEN_HAKKO_BI,0);\r\n            -- 上陸許可年月日\r\n            RJIBTJUKIRIREKI_INS.JORIKU_KYOKA_BI := NVL(CR_IDO.JORIKU_KYOKA_BI,0);\r\n            -- 住民票上世帯主名\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NUSHI_SHIMEI := CR_IDO.JUMIN_NUSHI_SHIMEI;\r\n            -- 統合宛名番号\r\n            RJIBTJUKIRIREKI_INS.TOUGOU_NO := R_BUPD_ATENA.TOUGOU_NO;\r\n            -- 個人番号（番号制度）\r\n            RJIBTJUKIRIREKI_INS.SEIDO_KOJIN_NO := R_BUPD_ATENA.SEIDO_KOJIN_NO;\r\n            -- 法人番号（番号制度）\r\n            RJIBTJUKIRIREKI_INS.SEIDO_HOJIN_NO := R_BUPD_ATENA.SEIDO_HOJIN_NO;\r\n            -- 住所_桁取パラメータ（基本データリスト用項目）\r\n            RJIBTJUKIRIREKI_INS.KETAPRM := R_BUPD_ATENA.KETAPRM;\r\n            -- 住所_国名コード（基本データリスト用項目）\r\n            RJIBTJUKIRIREKI_INS.KOKUMEI_CD := R_BUPD_ATENA.KOKUMEI_CD;\r\n            -- 入力場所\r\n            RJIBTJUKIRIREKI_INS.NYURYOKUBASHO := CR_IDO.NYURYOKUBASHO;\r\n            -- 氏名カナフラグ\r\n            RJIBTJUKIRIREKI_INS.SHIMEI_KANA_FLG := NVL(CR_IDO.SHIMEI_KANA_FLG,0);\r\n            -- 通称カナフラグ\r\n            RJIBTJUKIRIREKI_INS.TSUSHO_KANA_FLG := NVL(CR_IDO.TSUSHO_KANA_FLG,0);\r\n            -- 事実上の世帯主カナ\r\n            RJIBTJUKIRIREKI_INS.JIJITSUJONOSETAINUSHI_KANA := CR_IDO.JIJITSUJONOSETAINUSHI_KANA;\r\n            -- 事実上の世帯主漢字\r\n            RJIBTJUKIRIREKI_INS.JIJITSUJONOSETAINUSHI_KANJI := CR_IDO.JIJITSUJONOSETAINUSHI_KANJI;\r\n            -- 最終登録住所地連番\r\n            RJIBTJUKIRIREKI_INS.SAISYUTOROKUJUSHO_REN := NVL(CR_IDO.SAISYUTOROKUJUSHO_REN,0);\r\n            -- 再製記載年月日\r\n            RJIBTJUKIRIREKI_INS.SAISEIKISAI_DATE := NVL(CR_IDO.SAISEIKISAI_DATE,0);\r\n            -- 再製記載年月日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.SAISEIKISAIDATE_FUSHO_FLG := NVL(CR_IDO.SAISEIKISAIDATE_FUSHO_FLG,0);\r\n            -- 再製記載年月日不詳表記\r\n            RJIBTJUKIRIREKI_INS.SAISEIKISAIDATE_FUSHO_HYOKI := CR_IDO.SAISEIKISAIDATE_FUSHO_HYOKI;\r\n            -- 再製消除年月日\r\n            RJIBTJUKIRIREKI_INS.SAISEISHOJODATE := NVL(CR_IDO.SAISEISHOJODATE,0);\r\n            -- 再製消除年月日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.SAISEISHOJODATE_FUSHO_FLG := NVL(CR_IDO.SAISEISHOJODATE_FUSHO_FLG,0);\r\n            -- 再製消除年月日不詳表記\r\n            RJIBTJUKIRIREKI_INS.SAISEISHOJODATE_FUSHO_HYOKI := CR_IDO.SAISEISHOJODATE_FUSHO_HYOKI;\r\n            -- 法第30条46又は47区分\r\n            RJIBTJUKIRIREKI_INS.KBN_30_46_47 := CR_IDO.KBN_30_46_47;\r\n            -- 生年月日不詳表記\r\n            RJIBTJUKIRIREKI_INS.SEINENGAPI_FUSHO_HYOKI := CR_IDO.SEINENGAPI_FUSHO_HYOKI;\r\n            -- 異動日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.IDO_BI_FUSHO_FLG := NVL(CR_IDO.IDO_BI_FUSHO_FLG,0);\r\n            -- 異動日不詳表記\r\n            RJIBTJUKIRIREKI_INS.IDO_BI_FUSHO_HYOKI := CR_IDO.IDO_BI_FUSHO_HYOKI;\r\n            -- 住定日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.JUTEI_BI_FUSHO_FLG := NVL(CR_IDO.JUTEI_BI_FUSHO_FLG,0);\r\n            -- 住定日不詳表記\r\n            RJIBTJUKIRIREKI_INS.JUTEI_BI_FUSHO_HYOKI := CR_IDO.JUTEI_BI_FUSHO_HYOKI;\r\n            -- 住民となる日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NARU_FUSHO_FLG := NVL(CR_IDO.JUMIN_NARU_FUSHO_FLG,0);\r\n            -- 住民となる日不詳表記\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NARU_FUSHO_HYOKI := CR_IDO.JUMIN_NARU_FUSHO_HYOKI;\r\n            -- 住民でなくなる日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NAKUNARU_FUSHO_FLG := NVL(CR_IDO.JUMIN_NAKUNARU_FUSHO_FLG,0);\r\n            -- 住民でなくなる日不詳表記\r\n            RJIBTJUKIRIREKI_INS.JUMIN_NAKUNARU_FUSHO_HYOKI := CR_IDO.JUMIN_NAKUNARU_FUSHO_HYOKI;\r\n            -- 改製日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.KAISEI_BI_FUSHO_FLG := NVL(CR_IDO.KAISEI_BI_FUSHO_FLG,0);\r\n            -- 改製日不詳表記\r\n            RJIBTJUKIRIREKI_INS.KAISEI_BI_FUSHO_HYOKI := CR_IDO.KAISEI_BI_FUSHO_HYOKI;\r\n            -- 外国人の住民となる日不詳フラグ\r\n            RJIBTJUKIRIREKI_INS.GAIKOKU_JUMIN_NARU_FUSHO_FLG := NVL(CR_IDO.GAIKOKU_JUMIN_NARU_FUSHO_FLG,0);\r\n            -- 外国人の住民となる日不詳表記\r\n            RJIBTJUKIRIREKI_INS.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI := CR_IDO.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI;\r\n            -- 性別不詳区分\r\n            RJIBTJUKIRIREKI_INS.SEIBETSU_FUSHO_KBN := NVL(CR_IDO.SEIBETSU_FUSHO_KBN,0);\r\n            -- 異動事由詳細\r\n            RJIBTJUKIRIREKI_INS.IDO_JIYU_SHOSAI := NVL(CR_IDO.IDO_JIYU_SHOSAI,0);\r\n            -- 異動項目_1\r\n            RJIBTJUKIRIREKI_INS.IDOKOMOKU_1 := NVL(CR_IDO.IDOKOMOKU_1,0);\r\n            -- 留意事項_1\r\n            RJIBTJUKIRIREKI_INS.RYUIJIKO_1 := CR_IDO.RYUIJIKO_1;\r\n            -- 異動項目_2\r\n            RJIBTJUKIRIREKI_INS.IDOKOMOKU_2 := NVL(CR_IDO.IDOKOMOKU_2,0);\r\n            -- 留意事項_2\r\n            RJIBTJUKIRIREKI_INS.RYUIJIKO_2 := CR_IDO.RYUIJIKO_2;\r\n            -- 異動項目_3\r\n            RJIBTJUKIRIREKI_INS.IDOKOMOKU_3 := NVL(CR_IDO.IDOKOMOKU_3,0);\r\n            -- 留意事項_3\r\n            RJIBTJUKIRIREKI_INS.RYUIJIKO_3 := CR_IDO.RYUIJIKO_3;\r\n            -- 履歴選択不可フラグ\r\n            RJIBTJUKIRIREKI_INS.RIREKI_SENTAKUFUKA_FLG := NVL(CR_IDO.RIREKI_SENTAKUFUKA_FLG,0);\r\n            -- 届出番号\r\n            RJIBTJUKIRIREKI_INS.TODOKEDE_NO := NVL(CR_IDO.TODOKEDE_NO,0);\r\n            -- 取消届出番号\r\n            RJIBTJUKIRIREKI_INS.TORIKESHI_TODOKEDE_NO := NVL(CR_IDO.TORIKESHI_TODOKEDE_NO,0);\r\n            -- 宛名履歴_住記を登録する\r\n            INSERT INTO JIBTJUKIRIREKI VALUES RJIBTJUKIRIREKI_INS;\r\n            -- 宛名履歴_住記を更新する\r\n            UPDATE JIBTJUKIRIREKI\r\n               SET SAISHIN_FLG = 0\r\n             WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n               AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n               AND RIREKI_EDABAN = R_BUPD_ATENA.RIREKI_EDABAN;\r\n          ELSE\r\n--2024/04/03 DIS.Wangrucheng Add end\r\n          INSERT INTO JIBTJUKIRIREKI\r\n          (\r\n            KOJIN_NO,\r\n            RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n            RIREKI_EDABAN,   --履歴枝番\r\n            SAISHIN_FLG,     --最新フラグ\r\n            TORIKESHI_FLG,   --取消フラグ\r\n            JOHYOYODATA_FLG, --除票用データフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n            TEKIYO_BI,\r\n            TOROKU_GYOMU,\r\n            SETAI_NO,\r\n            GENZON_KBN,\r\n            JUN_SETAI_KBN,\r\n            JINKAKU_KBN,\r\n            KOKUSEKI_CD,\r\n            SHISHO_CD,\r\n            CHIKU_CD,\r\n            GYOSEIKU_CD,\r\n            HAN_CD,\r\n            SHOGAKU_CD,\r\n            CHUGAKU_CD,\r\n            TOHYOKU_CD,\r\n            SANTEIDANTAI_CD,\r\n            SEINENGAPI,\r\n            WAREKI_SEINENGAPI,\r\n            HYOJI_SEINENGAPI,\r\n            SEIBETSU,\r\n            USER_CD,\r\n            OAZA_CD,\r\n            HONBAN,\r\n            EDABAN1,\r\n            EDABAN2,\r\n            EDABAN3,\r\n            KATAGAKI_CD,\r\n            GAIKU,\r\n            TOU,\r\n            GOU,\r\n            JICHI_CD,\r\n            SHIMEI_KANA,\r\n            SHIMEI_KANJI,\r\n            YUBIN_NO,\r\n            YUBIN_NOBC,\r\n            CHOMEI,\r\n            BANCHI,\r\n            KATAGAKI,\r\n            DAIHYO_KATAGAKI,\r\n            DAIHYO_SHIMEI,\r\n            TEL_NO,\r\n            TEL_KBN,\r\n            FAX_NO,\r\n            MAIL_ADS,\r\n            YUHEN_KBN,\r\n            TOROKU_JIYU,\r\n            JUMINHYO_CD,\r\n            ZOKUGARA_CD1,\r\n            ZOKUGARA_CD2,\r\n            ZOKUGARA_CD3,\r\n            ZOKUGARA_CD4,\r\n            ZOKUGARA_KBN,\r\n            ZOKUGARA_MEI,\r\n            JITSU_ZOKUGARA_MEI,\r\n            KISAI_JUNI,\r\n            IDO_BI,\r\n            IDO_JIYU,\r\n            IDO_TODOKE_BI,\r\n            IDO_TODOKE_KBN,\r\n            JUTEI_BI,\r\n            JUTEI_JIYU,\r\n            JUTEI_TODOKEDE_BI,\r\n            JUTEI_TODOKEDE_KBN,\r\n            GENJUSHO_REN,\r\n            ZENJUSHO_REN,\r\n            TENNYUMAE_REN,\r\n            TENNYU_MITODOKE_REN,\r\n            HONSEKI_REN,\r\n            TENSHUTSU_YOTEI_BI,\r\n            TENSHUTSU_YOTEI_TODOKEDE_BI,\r\n            TENSHUTSU_YOTEI_TODOKEDE_KBN,\r\n            TENSHUTSU_YOTEI_REN,\r\n            TENSHUTSU_KAKUTEI_BI,\r\n            TENSHUTSU_KAKUTEI_TSUCHI_BI,\r\n            TENSHUTSU_KAKUTEI_TODOKEDE_KBN,\r\n            TENSHUTSU_KAKUTEI_REN,\r\n            JUMIN_NARU,\r\n            JUMIN_NARU_JIYU,\r\n            JUMIN_NARU_TODOKEDE_BI,\r\n            JUMIN_NARU_TODOKEDE_KBN,\r\n            JUMIN_NAKUNARU,\r\n            JUMIN_NAKUNARU_JIYU,\r\n            JUMIN_NAKUNARU_TODOKEDE_BI,\r\n            JUMIN_NAKUNARU_TODOKEDE_KBN,\r\n            SHIBOBI_FUSHO_KBN,\r\n            HONMYO_KANA,\r\n            HONMYO_KANJI,\r\n            NUSHI_SHIMEI_KANA,\r\n            NUSHI_SHIMEI_KANJI,\r\n            BIKO,\r\n            KAISEI_BI,\r\n            KAISEI_REN,\r\n            KYU_SHIMEI_KANA,\r\n            KYU_SHIMEI_KANJI,\r\n            SHORIBI_KEY,\r\n            SHORI_JIKAN_KEY,\r\n            SHORI_KBN_KEY,\r\n            ZENBU_ICHIBU_KEY,\r\n            SHOKUINKOJIN_NO_KEY,\r\n            SYS_SAKUSEIBI,\r\n            SYS_KOSHINBI,\r\n            SYS_JIKAN,\r\n            SYS_SHOKUINKOJIN_NO,\r\n            SYS_TANMATSU_NO,\r\n            GOMI_CD,\r\n            SINYO_CD,\r\n            KOIKIKOFU_STOP_CD,\r\n            CHOMEI_KANA,\r\n            BANCHI_KANA,\r\n            KATAGAKI_KANA,\r\n            KATAGAKI_HIDE_FLG,\r\n            GAIJI_FLG,\r\n            HOJINSOSHIKI_CD,\r\n            JE_KOKUHOSHISANWARI_KBN,\r\n            JE_JINTEKIGENMEN_KBN,\r\n            JE_SHOYUSHAKEISHONIN_KBN,\r\n            JE_LINK_KOJIN_NO,\r\n            JE_NAYOSE_NO,\r\n            YOBI1_CD,\r\n            YOBI2_CD,\r\n            YOBI3_CD,\r\n            YOBI4_CD,\r\n            YOBI5_CD,\r\n            YOBI1_CH,\r\n            YOBI2_CH,\r\n            YOBI3_CH,\r\n            YOBI4_CH,\r\n            YOBI5_CH\r\n            ,ALP_SHIMEI_KANA,\r\n            ALP_SHIMEI_KANJI,\r\n            GAI_SHIMEI_KANA,\r\n            GAI_SHIMEI_KANJI,\r\n            TSUSHOMEI_KANA,\r\n            TSUSHOMEI_KANJI,\r\n            HEIKIMEI_KANA,\r\n            HEIKIMEI_KANJI,\r\n            GAIKOKU_JUMIN_NARU,\r\n            ZAIRYU_NO_SHUBETSU,\r\n            ZAIRYU_CARD_NO,\r\n            ZAIRYU_SHIKAKU_CD,\r\n            ZAIRYU_SHURYO_BI,\r\n            ZAIRYU_KIKAN_NEN,\r\n            ZAIRYU_KIKAN_TSUKI,\r\n            ZAIRYU_KIKAN_HI ,\r\n            CARD_MANRYO_BI,\r\n            KBN_30_45,\r\n            KYOJYUCHI_UMU,\r\n            SEINENGAPI_FUSHO_KBN,\r\n            RYOKEN_BANGO,\r\n            RYOKEN_HAKKO_BI,\r\n            JORIKU_KYOKA_BI,\r\n            JUMIN_NUSHI_SHIMEI\r\n           ,TOUGOU_NO\r\n           ,SEIDO_KOJIN_NO\r\n           ,SEIDO_HOJIN_NO\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n           ,KETAPRM                        --住所_桁取パラメータ（基本データリスト用項目）\r\n           ,KOKUMEI_CD                     --住所_国名コード（基本データリスト用項目）\r\n           ,NYURYOKUBASHO                  --入力場所\r\n           ,SHIMEI_KANA_FLG                --氏名カナフラグ\r\n           ,TSUSHO_KANA_FLG                --通称カナフラグ\r\n           ,JIJITSUJONOSETAINUSHI_KANA     --事実上の世帯主カナ\r\n           ,JIJITSUJONOSETAINUSHI_KANJI    --事実上の世帯主漢字\r\n           ,SAISYUTOROKUJUSHO_REN          --最終登録住所地連番\r\n           ,SAISEIKISAI_DATE               --再製記載年月日\r\n           ,SAISEIKISAIDATE_FUSHO_FLG      --再製記載年月日不詳フラグ\r\n           ,SAISEIKISAIDATE_FUSHO_HYOKI    --再製記載年月日不詳表記\r\n           ,SAISEISHOJODATE                --再製消除年月日\r\n           ,SAISEISHOJODATE_FUSHO_FLG      --再製消除年月日不詳フラグ\r\n           ,SAISEISHOJODATE_FUSHO_HYOKI    --再製消除年月日不詳表記\r\n           ,KBN_30_46_47                   --法第30条46又は47区分\r\n           ,SEINENGAPI_FUSHO_HYOKI         --生年月日不詳表記\r\n           ,IDO_BI_FUSHO_FLG               --異動日不詳フラグ\r\n           ,IDO_BI_FUSHO_HYOKI             --異動日不詳表記\r\n           ,JUTEI_BI_FUSHO_FLG             --住定日不詳フラグ\r\n           ,JUTEI_BI_FUSHO_HYOKI           --住定日不詳表記\r\n           ,JUMIN_NARU_FUSHO_FLG           --住民となる日不詳フラグ\r\n           ,JUMIN_NARU_FUSHO_HYOKI         --住民となる日不詳表記\r\n           ,JUMIN_NAKUNARU_FUSHO_FLG       --住民でなくなる日不詳フラグ\r\n           ,JUMIN_NAKUNARU_FUSHO_HYOKI     --住民でなくなる日不詳表記\r\n           ,KAISEI_BI_FUSHO_FLG            --改製日不詳フラグ\r\n           ,KAISEI_BI_FUSHO_HYOKI          --改製日不詳表記\r\n           ,GAIKOKU_JUMIN_NARU_FUSHO_FLG   --外国人の住民となる日不詳フラグ\r\n           ,GAIKOKU_JUMIN_NARU_FUSHO_HYOKI --外国人の住民となる日不詳表記\r\n           ,SEIBETSU_FUSHO_KBN             --性別不詳区分\r\n           ,IDO_JIYU_SHOSAI                --異動事由詳細\r\n           ,IDOKOMOKU_1                    --異動項目_1\r\n           ,RYUIJIKO_1                     --留意事項_1\r\n           ,IDOKOMOKU_2                    --異動項目_2\r\n           ,RYUIJIKO_2                     --留意事項_2\r\n           ,IDOKOMOKU_3                    --異動項目_3\r\n           ,RYUIJIKO_3                     --留意事項_3\r\n           ,RIREKI_SENTAKUFUKA_FLG         --履歴選択不可フラグ\r\n           ,TODOKEDE_NO                    --届出番号\r\n           ,TORIKESHI_TODOKEDE_NO          --取消届出番号\r\n--2024/01/25 DIS.liuqimeng Add end\r\n          )\r\n          VALUES\r\n          (\r\n            R_ATENA.KOJIN_NO,\r\n            R_ATENA.RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n            R_ATENA.RIREKI_EDABAN,   --履歴枝番\r\n--2024/04/03 DIS.Wangrucheng Update start 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n--            R_ATENA.SAISHIN_FLG,     --最新フラグ\r\n--            R_ATENA.TORIKESHI_FLG,   --取消フラグ\r\n            CASE\r\n                WHEN CR_IDO.IDO_JIYU IN (141,292,418) THEN 1\r\n\t\t--2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n                WHEN CR_IDO.IDO_JIYU =412 THEN 0\r\n                --2024/12/6 CTC Update end\r\n                ELSE R_ATENA.SAISHIN_FLG\r\n            END,                     --最新フラグ\r\n            CASE\r\n                WHEN CR_IDO.IDO_JIYU IN (141,292,418) THEN 1\r\n                ELSE R_ATENA.TORIKESHI_FLG\r\n            END,                     --取消フラグ\r\n--2024/04/03 DIS.Wangrucheng Update end\r\n            R_ATENA.JOHYOYODATA_FLG, --除票用データフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n            R_ATENA.TEKIYO_BI,\r\n            R_ATENA.TOROKU_GYOMU,\r\n            R_ATENA.SETAI_NO,\r\n            R_ATENA.GENZON_KBN,\r\n            NVL(R_IDO.JUN_SETAI_KBN, 0),\r\n            R_ATENA.JINKAKU_KBN,\r\n            R_ATENA.KOKUSEKI_CD,\r\n            R_ATENA.SHISHO_CD,\r\n            R_ATENA.CHIKU_CD,\r\n            R_ATENA.GYOSEIKU_CD,\r\n            R_ATENA.HAN_CD,\r\n            R_ATENA.SHOGAKU_CD,\r\n            R_ATENA.CHUGAKU_CD,\r\n            R_ATENA.TOHYOKU_CD,\r\n            R_ATENA.SANTEIDANTAI_CD,\r\n            R_ATENA.SEINENGAPI,\r\n            R_ATENA.WAREKI_SEINENGAPI,\r\n            R_ATENA.HYOJI_SEINENGAPI,\r\n            R_ATENA.SEIBETSU,\r\n            R_ATENA.USER_CD,\r\n            R_ATENA.OAZA_CD,\r\n            R_ATENA.HONBAN,\r\n            R_ATENA.EDABAN1,\r\n            R_ATENA.EDABAN2,\r\n            R_ATENA.EDABAN3,\r\n            R_ATENA.KATAGAKI_CD,\r\n            R_ATENA.GAIKU,\r\n            R_ATENA.TOU,\r\n            R_ATENA.GOU,\r\n            R_ATENA.JICHI_CD,\r\n            R_ATENA.SHIMEI_KANA,\r\n            R_ATENA.SHIMEI_KANJI,\r\n            R_ATENA.YUBIN_NO,\r\n            R_ATENA.YUBIN_NOBC,\r\n            R_ATENA.CHOMEI,\r\n            R_ATENA.BANCHI,\r\n            R_ATENA.KATAGAKI,\r\n            R_ATENA.DAIHYO_KATAGAKI,\r\n            R_ATENA.DAIHYO_SHIMEI,\r\n            R_ATENA.TEL_NO,\r\n            R_ATENA.TEL_KBN,\r\n            R_ATENA.FAX_NO,\r\n            R_ATENA.MAIL_ADS,\r\n            R_ATENA.YUHEN_KBN,\r\n            R_ATENA.TOROKU_JIYU,\r\n            NVL(R_IDO.JUMINHYO_CD, 0),\r\n            NVL(R_ATENA.ZOKUGARACD1, 0),\r\n            NVL(R_ATENA.ZOKUGARACD2, 0),\r\n            NVL(R_ATENA.ZOKUGARACD3, 0),\r\n            NVL(R_ATENA.ZOKUGARACD4, 0),\r\n            NVL(R_ATENA.ZOKUGARAKBN, 0),\r\n            R_ATENA.ZOKUGARAMEI,\r\n            R_ATENA.JITSUZOKUGARAMEI,\r\n            NVL(R_IDO.KISAI_JUNI, 0),\r\n            NVL(R_IDO.IDO_BI, 0),\r\n            NVL(R_IDO.IDO_JIYU, 0),\r\n            NVL(R_IDO.IDO_TODOKE_BI, 0),\r\n            NVL(R_IDO.IDO_TODOKE_KBN, 0),\r\n            NVL(R_IDO.JUTEI_BI, 0),\r\n            NVL(R_IDO.JUTEI_JIYU, 0),\r\n            NVL(R_IDO.JUTEI_TODOKEDE_BI, 0),\r\n            NVL(R_IDO.JUTEI_TODOKEDE_KBN, 0),\r\n            NVL(R_IDO.GENJUSHO_REN, 0),\r\n            NVL(R_IDO.ZENJUSHO_REN, 0),\r\n            NVL(R_IDO.TENNYUMAE_REN, 0),\r\n            NVL(R_IDO.TENNYU_MITODOKE_REN, 0),\r\n            NVL(R_IDO.HONSEKI_REN, 0),\r\n            NVL(R_IDO.TENSHUTSU_YOTEI_BI, 0),\r\n            NVL(R_IDO.TENSHUTSU_YOTEI_TODOKEDE_BI, 0),\r\n            NVL(R_IDO.TENSHUTSU_YOTEI_TODOKEDE_KBN, 0),\r\n            NVL(R_IDO.TENSHUTSU_YOTEI_REN, 0),\r\n            NVL(R_IDO.TENSHUTSU_KAKUTEI_BI, 0),\r\n            NVL(R_IDO.TENSHUTSU_KAKUTEI_TSUCHI_BI, 0),\r\n            NVL(R_IDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN, 0),\r\n            NVL(R_IDO.TENSHUTSU_KAKUTEI_REN, 0),\r\n            NVL(R_IDO.JUMIN_NARU, 0),\r\n            NVL(R_IDO.JUMIN_NARU_JIYU, 0),\r\n            NVL(R_IDO.JUMIN_NARU_TODOKEDE_BI, 0),\r\n            NVL(R_IDO.JUMIN_NARU_TODOKEDE_KBN, 0),\r\n            NVL(R_IDO.JUMIN_NAKUNARU, 0),\r\n            NVL(R_IDO.JUMIN_NAKUNARU_JIYU, 0),\r\n            NVL(R_IDO.JUMIN_NAKUNARU_TODOKEDE_BI, 0),\r\n            NVL(R_IDO.JUMIN_NAKUNARU_TODOKEDE_KBN, 0),\r\n            NVL(R_IDO.SHIBOBI_FUSHO_KBN, 0),\r\n            R_ATENA.HONMYO_KANA,\r\n            R_ATENA.HONMYO_KANJI,\r\n            R_IDO.NUSHI_SHIMEI_KANA,\r\n            R_IDO.NUSHI_SHIMEI_KANJI,\r\n            R_IDO.BIKO,\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--            NVL(R_IDO.KAISEI_BI, 0),\r\n--            NVL(R_IDO.KAISEI_REN, 0),\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n            --CASE\r\n               -- WHEN R_IDO.IDO_JIYU IN (191,291) THEN i_SHORIBI\r\n               -- ELSE NVL(R_IDO.KAISEI_BI, 0)\r\n            --END,\r\n            --CASE\r\n               -- WHEN R_IDO.IDO_JIYU IN (191,291) THEN R_IDO.KAISEI_REN + 1\r\n               -- ELSE NVL(R_IDO.KAISEI_REN, 0)\r\n            --END,\r\n            NVL(R_IDO.KAISEI_BI, 0),\r\n            R_IDO.KAISEI_REN,\r\n--2025/5/14 CTC.liu update end\r\n--2024/01/25 DIS.liuqimeng Update end\r\n            R_IDO.KYU_SHIMEI_KANA,\r\n            R_IDO.KYU_SHIMEI_KANJI,\r\n            NVL(R_IDO.SHORIBI_KEY, 0),\r\n            NVL(R_IDO.SHORI_JIKAN_KEY, 0),\r\n            NVL(R_IDO.SHORI_KBN_KEY, 0),\r\n            NVL(R_IDO.ZENBU_ICHIBU_KEY, 0),\r\n            NVL(R_IDO.SHOKUINKOJIN_NO_KEY, 0),\r\n            R_ATENA.SYS_SAKUSEIBI,\r\n            R_ATENA.SYS_KOSHINBI,\r\n            R_ATENA.SYS_JIKAN,\r\n            R_ATENA.SYS_SHOKUINKOJIN_NO,\r\n            R_ATENA.SYS_TANMATSU_NO,\r\n            R_IDO.GOMI_CD,\r\n            R_IDO.SINYO_CD,\r\n            R_IDO.KOIKIKOFU_STOP_CD,\r\n            R_ATENA.CHOMEI_KANA,\r\n            R_ATENA.BANCHI_KANA,\r\n            R_ATENA.KATAGAKI_KANA,\r\n            R_ATENA.KATAGAKI_HIDE_FLG,\r\n            R_ATENA.GAIJI_FLG,\r\n            R_ATENA.HOJINSOSHIKI_CD,\r\n            R_ATENA.JE_KOKUHOSHISANWARI_KBN,\r\n            R_ATENA.JE_JINTEKIGENMEN_KBN,\r\n            R_ATENA.JE_SHOYUSHAKEISHONIN_KBN,\r\n            R_ATENA.JE_LINK_KOJIN_NO,\r\n            R_ATENA.JE_NAYOSE_NO,\r\n            R_ATENA.YOBI1_CD,\r\n            R_ATENA.YOBI2_CD,\r\n            R_ATENA.YOBI3_CD,\r\n            R_ATENA.YOBI4_CD,\r\n            R_ATENA.YOBI5_CD,\r\n            R_ATENA.YOBI1_CH,\r\n            R_ATENA.YOBI2_CH,\r\n            R_ATENA.YOBI3_CH,\r\n            R_ATENA.YOBI4_CH,\r\n            R_ATENA.YOBI5_CH\r\n            ,R_IDO.ALP_SHIMEI_KANA,\r\n            R_IDO.ALP_SHIMEI_KANJI,\r\n            R_IDO.GAI_SHIMEI_KANA,\r\n            R_IDO.GAI_SHIMEI_KANJI,\r\n            R_IDO.TSUSHOMEI_KANA,\r\n            R_IDO.TSUSHOMEI_KANJI,\r\n            R_IDO.HEIKIMEI_KANA,\r\n            R_IDO.HEIKIMEI_KANJI,\r\n            R_IDO.GAIKOKU_JUMIN_NARU,\r\n            R_IDO.ZAIRYU_NO_SHUBETSU,\r\n            R_IDO.ZAIRYU_CARD_NO,\r\n            R_IDO.ZAIRYU_SHIKAKU_CD,\r\n            R_IDO.ZAIRYU_SHURYO_BI,\r\n            R_IDO.ZAIRYU_KIKAN_NEN,\r\n            R_IDO.ZAIRYU_KIKAN_TSUKI,\r\n            R_IDO.ZAIRYU_KIKAN_HI,\r\n            R_IDO.CARD_MANRYO_BI,\r\n            R_IDO.KBN_30_45,\r\n            R_IDO.KYOJYUCHI_UMU,\r\n            R_IDO.SEINENGAPI_FUSHO_KBN,\r\n            R_IDO.RYOKEN_BANGO,\r\n            R_IDO.RYOKEN_HAKKO_BI,\r\n            R_IDO.JORIKU_KYOKA_BI,\r\n            R_IDO.JUMIN_NUSHI_SHIMEI\r\n\r\n           ,R_ATENA.TOUGOU_NO\r\n           ,R_IDO.SEIDO_KOJIN_NO\r\n           ,R_ATENA.SEIDO_HOJIN_NO\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n           ,R_ATENA.KETAPRM                      --住所_桁取パラメータ（基本データリスト用項目）\r\n           ,R_ATENA.KOKUMEI_CD                   --住所_国名コード（基本データリスト用項目）\r\n           ,VCHOSHACODE                           --入力場所\r\n           ,R_IDO.SHIMEI_KANA_FLG                --氏名カナフラグ\r\n           ,R_IDO.TSUSHO_KANA_FLG                --通称カナフラグ\r\n           ,R_IDO.JIJITSUJONOSETAINUSHI_KANA     --事実上の世帯主カナ\r\n           ,R_IDO.JIJITSUJONOSETAINUSHI_KANJI    --事実上の世帯主漢字\r\n           ,R_IDO.SAISYUTOROKUJUSHO_REN          --最終登録住所地連番\r\n           ,R_IDO.SAISEIKISAI_DATE               --再製記載年月日\r\n           ,R_IDO.SAISEIKISAIDATE_FUSHO_FLG      --再製記載年月日不詳フラグ\r\n           ,R_IDO.SAISEIKISAIDATE_FUSHO_HYOKI    --再製記載年月日不詳表記\r\n           ,R_IDO.SAISEISHOJODATE                --再製消除年月日\r\n           ,R_IDO.SAISEISHOJODATE_FUSHO_FLG      --再製消除年月日不詳フラグ\r\n           ,R_IDO.SAISEISHOJODATE_FUSHO_HYOKI    --再製消除年月日不詳表記\r\n           ,R_IDO.KBN_30_46_47                   --法第30条46又は47区分\r\n           ,R_IDO.SEINENGAPI_FUSHO_HYOKI         --生年月日不詳表記\r\n           ,R_IDO.IDO_BI_FUSHO_FLG               --異動日不詳フラグ\r\n           ,R_IDO.IDO_BI_FUSHO_HYOKI             --異動日不詳表記\r\n           ,R_IDO.JUTEI_BI_FUSHO_FLG             --住定日不詳フラグ\r\n           ,R_IDO.JUTEI_BI_FUSHO_HYOKI           --住定日不詳表記\r\n           ,R_IDO.JUMIN_NARU_FUSHO_FLG           --住民となる日不詳フラグ\r\n           ,R_IDO.JUMIN_NARU_FUSHO_HYOKI         --住民となる日不詳表記\r\n           ,R_IDO.JUMIN_NAKUNARU_FUSHO_FLG       --住民でなくなる日不詳フラグ\r\n           ,R_IDO.JUMIN_NAKUNARU_FUSHO_HYOKI     --住民でなくなる日不詳表記\r\n           ,R_IDO.KAISEI_BI_FUSHO_FLG            --改製日不詳フラグ\r\n           ,R_IDO.KAISEI_BI_FUSHO_HYOKI          --改製日不詳表記\r\n           ,R_IDO.GAIKOKU_JUMIN_NARU_FUSHO_FLG   --外国人の住民となる日不詳フラグ\r\n           ,R_IDO.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI --外国人の住民となる日不詳表記\r\n           ,R_IDO.SEIBETSU_FUSHO_KBN             --性別不詳区分\r\n           ,R_IDO.IDO_JIYU_SHOSAI                --異動事由詳細\r\n           ,R_IDO.IDOKOMOKU_1                    --異動項目_1\r\n           ,R_IDO.RYUIJIKO_1                     --留意事項_1\r\n           ,R_IDO.IDOKOMOKU_2                    --異動項目_2\r\n           ,R_IDO.RYUIJIKO_2                     --留意事項_2\r\n           ,R_IDO.IDOKOMOKU_3                    --異動項目_3\r\n           ,R_IDO.RYUIJIKO_3                     --留意事項_3\r\n           ,R_IDO.RIREKI_SENTAKUFUKA_FLG         --履歴選択不可フラグ\r\n           ,R_IDO.TODOKEDE_NO                    --届出番号\r\n           ,R_IDO.TORIKESHI_TODOKEDE_NO          --取消届出番号\r\n--2024/01/25 DIS.liuqimeng Add end\r\n\r\n          );\r\n--2024/04/03 DIS.Wangrucheng Add start 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n          END IF;\r\n          -- 異動事由は「141:異動取消（増）、292:異動取消（減）、418:異動取消（修正）」の場合\r\n          IF CR_IDO.IDO_JIYU IN (141,292,418) THEN\r\n            -- 宛名履歴_住記を更新する\r\n            UPDATE JIBTJUKIRIREKI\r\n--               SET SAISHIN_FLG = 0  --2025/02/23 Del\r\n               SET TORIKESHI_FLG = 1  --2025/02/23 Add\r\n                  ,RIREKI_SENTAKUFUKA_FLG = 1  --2025/02/23 Add\r\n             WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n               AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n               AND RIREKI_EDABAN = R_BUPD_ATENA.RIREKI_EDABAN;\r\n/*            -- 履歴枝番＜＞１の場合  --2025/02/23 Del\r\n            IF R_BUPD_ATENA.RIREKI_EDABAN <> 1 THEN\r\n              -- 宛名履歴_住記を更新する\r\n              UPDATE JIBTJUKIRIREKI\r\n                 SET SAISHIN_FLG = 0\r\n               WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n                 AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n                 AND RIREKI_EDABAN = R_BUPD_ATENA.RIREKI_EDABAN - 1;\r\n            --履歴枝番=１の場合\r\n            ELSE\r\n              SELECT MAX(RIREKI_EDABAN)\r\n                INTO NRIREKI_EDABAN\r\n                FROM JIBTJUKIRIREKI\r\n               WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n                 AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN - 10;\r\n              -- 宛名履歴_住記を更新する\r\n              UPDATE JIBTJUKIRIREKI\r\n                 SET SAISHIN_FLG = 0\r\n               WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n                 AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN - 10\r\n                 AND RIREKI_EDABAN = NRIREKI_EDABAN;\r\n            END IF;  */\r\n          END IF;\r\n--2024/04/03 DIS.Wangrucheng Add end\r\n        END IF;\r\n      END IF;\r\n--2024/04/03 DIS.Wangrucheng Add start 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n      -- 異動事由は「141:異動取消（増）、292:異動取消（減）、418:異動取消（修正）」の場合\r\n      IF CR_IDO.IDO_JIYU IN (141,292,418) THEN\r\n        SELECT B.RIREKI_RENBAN\r\n          INTO NRIREKI_RENBAN\r\n          FROM JIBTJUKIIDO A,\r\n               JIBTJUKIKIHON B\r\n         WHERE A.KOJIN_NO = B.KOJIN_NO\r\n           AND A.KOJIN_NO = CR_IDO.KOJIN_NO;\r\n      END IF;\r\n--2024/04/03 DIS.Wangrucheng Add end\r\n--2024/10/21 DIS.liuqimeng Add Start 0.3.000.000:IT_JIB_00229対応\r\n      --2.異動事由は「誤記修正」、「異動取消（増）（減）（修正）」の場合\r\n      --「412:誤記修正、141:異動取消（増）、292:異動取消（減）、418:異動取消（修正）」\r\n      IF CR_IDO.IDO_JIYU IN (412,141,292,418) THEN\r\n        --「特別養子縁組」又は「特別養子縁組の離縁」の留意事項がある場合\r\n        IF CR_IDO.RYUIJIKO_1 IN ('特別養子縁組','特別養子縁組の離縁')\r\n          OR CR_IDO.RYUIJIKO_2 IN ('特別養子縁組','特別養子縁組の離縁')\r\n          OR CR_IDO.RYUIJIKO_3 IN ('特別養子縁組','特別養子縁組の離縁') THEN\r\n          UPDATE JIBTJUKIRIREKI\r\n             SET RIREKI_SENTAKUFUKA_FLG = 1\r\n           WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n             AND RIREKI_RENBAN * 10 + RIREKI_EDABAN <= R_BUPD_ATENA.RIREKI_RENBAN * 10 + R_BUPD_ATENA.RIREKI_EDABAN;\r\n        END IF;\r\n--2025/11/13 CTC.liu add start:1.0.027.000 保守QA22566対応\r\n        IF CR_IDO.IDO_JIYU = 412 THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n               SET RIREKI_SENTAKUFUKA_FLG = 1\r\n             WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n               AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n               AND RIREKI_EDABAN <= R_BUPD_ATENA.RIREKI_EDABAN;\r\n           END IF;\r\n--2025/11/13 CTC.liu add end\r\n      --1.異動事由は「誤記修正」、「異動取消（増）（減）（修正）」以外の場合\r\n      ELSE\r\n        --留意事項_1,留意事項_2,留意事項_3\r\n        BEGIN\r\n         SELECT RYUIJIKO_1,RYUIJIKO_2,RYUIJIKO_3\r\n           INTO VRYUIJIKO_1,VRYUIJIKO_2,VRYUIJIKO_3\r\n           FROM JIBWBUPD_JUKIIDO\r\n          WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n            AND ENTRY_ID = i_IENTRY_ID;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n            VRYUIJIKO_1 := NULL;\r\n            VRYUIJIKO_2 := NULL;\r\n            VRYUIJIKO_3 := NULL;\r\n        END;\r\n        --「特別養子縁組」又は「特別養子縁組の離縁」の留意事項がある場合\r\n        IF VRYUIJIKO_1 IN ('特別養子縁組','特別養子縁組の離縁')\r\n          OR VRYUIJIKO_2 IN ('特別養子縁組','特別養子縁組の離縁')\r\n          OR VRYUIJIKO_3 IN ('特別養子縁組','特別養子縁組の離縁') THEN\r\n          UPDATE JIBTJUKIRIREKI\r\n             SET RIREKI_SENTAKUFUKA_FLG = 1\r\n           WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO;\r\n        END IF;\r\n      END IF;\r\n--2024/10/21 DIS.liuqimeng Add end\r\n--2025/10/29 CTC.liu add start 1.0.025.002:新WizLIFE保守対応 QA22490\r\n--住登外履歴連番取得\r\n      BEGIN\r\n      SELECT RIREKI_RENBAN INTO GAB_RIREKI_RENBAN\r\n       FROM GABTATENAKIHON\r\n      WHERE KOJIN_NO = R_BUPD_ATENA.KOJIN_NO\r\n        AND GENZON_KBN= 2;\r\n     EXCEPTION\r\n       WHEN NO_DATA_FOUND THEN\r\n           GAB_RIREKI_RENBAN:=0;\r\n     END;\r\n      ------------------------------------------------\r\n      -- 宛名基本ＴＢＬデータ削除\r\n      ------------------------------------------------\r\n        IF I_CNT1 != 0 THEN\r\n          IF NKADO_BI5 <= I_SYSDATE AND\r\n             NJOKEN111 = 0 AND\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--             CR_IDO.IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n            --CR_IDO.IDO_JIYU IN (150,160,280) THEN\r\n             CR_IDO.IDO_JIYU IN (150,160,280,191) THEN\r\n               NULL;\r\n\t  --2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n          --ELSE\r\n          ELSE\r\n           IF (R_ATENA.RIREKI_RENBAN *100 +R_ATENA.RIREKI_EDABAN <= R_BUPD_ATENA.RIREKI_RENBAN *100 +R_BUPD_ATENA.RIREKI_EDABAN) or CR_IDO.IDO_JIYU <>412 THEN\r\n            DELETE FROM JIBTJUKIKIHON\r\n                  WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n            END IF;\r\n           --2024/12/6 CTC Update end\r\n          END IF;\r\n        ELSIF A_CNT != 0 THEN\r\n          IF NKADO_BI5 <= I_SYSDATE AND\r\n             NJOKEN111 = 0 AND\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--             CR_IDO.IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n            --CR_IDO.IDO_JIYU IN (150,160,280) THEN\r\n             CR_IDO.IDO_JIYU IN (150,160,280,191) THEN\r\n               NULL;\r\n\t --2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n         --ELSE\r\n          ELSE\r\n           IF (R_ATENA.RIREKI_RENBAN *100 +R_ATENA.RIREKI_EDABAN <= R_BUPD_ATENA.RIREKI_RENBAN *100 +R_BUPD_ATENA.RIREKI_EDABAN) or CR_IDO.IDO_JIYU <>412 THEN\r\n            DELETE FROM JIBTJUKIKIHON\r\n                  WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n           END IF;\r\n         --2024/12/6 CTC Update end\r\n          END IF;\r\n        END IF;\r\n      ------------------------------------------------\r\n      -- 個人番号採番判定\r\n      ------------------------------------------------\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--      IF R_BUPD_ATENA.KOJIN_NO > 999999900000 OR (NJOKEN111 = 0 AND CR_IDO.IDO_JIYU IN (15,16,28)) THEN\r\n--2024/04/03 DIS.Wangrucheng Update 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n--      IF R_BUPD_ATENA.KOJIN_NO > 999999900000 OR (NJOKEN111 = 0 AND CR_IDO.IDO_JIYU IN (150,160,280)) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n      --IF R_BUPD_ATENA.KOJIN_NO > 999999999900000 OR (NJOKEN111 = 0 AND CR_IDO.IDO_JIYU IN (150,160,280)) THEN\r\n      IF R_BUPD_ATENA.KOJIN_NO > 999999999900000 OR (NJOKEN111 = 0 AND CR_IDO.IDO_JIYU IN (150,160,280,191)) THEN\r\n        T_MAX_KOJIN_NO := GAAPK0030.FNEWNOGET('JIB',\r\n                                                0,\r\n                                                0,\r\n                                                i_NTANMATSU_NO,\r\n                                                i_NSHOKUIN,\r\n                                                NRTN);\r\n            --リターン値 <> 0の場合\r\n            IF NRTN != 0 THEN\r\n              o_N_SQL_CODE  := NRTN;\r\n              o_V_SQL_MSG := '新規付番取得エラー';\r\n              RETURN;\r\n            END IF;\r\n        T_KOJIN_NO     := T_MAX_KOJIN_NO;\r\n        UPDATE JIBWBUPD_GYOMUSHIKAKU\r\n           SET KOJIN_NO = T_MAX_KOJIN_NO\r\n         WHERE ENTRY_ID = i_IENTRY_ID\r\n           AND KOJIN_NO = R_BUPD_ATENA.KOJIN_NO;\r\n      ELSE\r\n        T_KOJIN_NO := R_BUPD_ATENA.KOJIN_NO;\r\n      END IF;\r\n\r\n      ------------------------------------------------\r\n      -- 住民票コード採番判定\r\n      ------------------------------------------------\r\n      SELECT IDO_JIYU_KBN\r\n        INTO T_JIYU_KBN\r\n        FROM GABTIDOJIYU\r\n       WHERE IDO_JIYU_CD = CR_IDO.IDO_JIYU;\r\n\r\n      IF R_BUPD_ATENA.JUMINHYO_CD = 0 AND\r\n         ((T_JIYU_KBN = 1) OR\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--          CR_IDO.IDO_JIYU = 47 OR\r\n--          CR_IDO.IDO_JIYU = 48 OR\r\n--        (T_JIYU_KBN = 4 AND CR_IDO.IDO_JIYU IN (15,16))) THEN\r\n          CR_IDO.IDO_JIYU = 470 OR\r\n          CR_IDO.IDO_JIYU = 480 OR\r\n        (T_JIYU_KBN = 4 AND CR_IDO.IDO_JIYU IN (150,160))) THEN\r\n--2024/01/25 DIS.liuqimeng Update end\r\n        IF CR_IDO.JINKAKU_KBN = 1 AND\r\n           NKADO_BI6 > I_SYSDATE THEN\r\n           T_JUMIN_CD := R_BUPD_ATENA.JUMINHYO_CD;\r\n        ELSE\r\n           LOOP\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--             JIBSKJUMINCD(T_KOJIN_NO,I_SYSDATE,T_MAX_JUMINHYO_CD,RTNCD);\r\n             JIBSKJUMINCD(T_KOJIN_NO,I_SYSDATE,i_NSHOKUIN,T_MAX_JUMINHYO_CD,RTNCD);\r\n             BEGIN\r\n               SELECT SHIYOSHA_KOJIN_NO INTO WK_KOJIN_NO FROM JIBTJNAKINOKANRI\r\n                WHERE JUMINHYO_CD = T_MAX_JUMINHYO_CD;\r\n             EXCEPTION\r\n               WHEN OTHERS THEN\r\n                WK_KOJIN_NO := 0;\r\n             END;\r\n             EXIT WHEN (T_MAX_JUMINHYO_CD <> 0 AND T_KOJIN_NO = WK_KOJIN_NO);\r\n           END LOOP;\r\n           T_JUMIN_CD := T_MAX_JUMINHYO_CD;\r\n        END IF;\r\n      ELSE\r\n        T_JUMIN_CD := R_BUPD_ATENA.JUMINHYO_CD;\r\n      END IF;\r\n      ------------------------------------------------\r\n      -- 世帯番号採番判定\r\n      ------------------------------------------------\r\n--2024/04/03 DIS.Wangrucheng Update 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n--      IF R_BUPD_ATENA.SETAI_NO > 9999000 THEN\r\n      IF R_BUPD_ATENA.SETAI_NO > 999999999900000 THEN\r\n        IF (T_MAX_SETAI_NO IS NULL) THEN\r\n          T_MAX_SETAI_NO := GAAPK0030.FNEWNOGET('JIB',\r\n                                                  0,\r\n                                                  1,\r\n                                                  i_NTANMATSU_NO,\r\n                                                  i_NSHOKUIN,\r\n                                                  NRTN);\r\n            --リターン値 <> 0の場合\r\n            IF NRTN != 0 THEN\r\n              T_MAX_SETAI_NO := 0;\r\n            END IF;\r\n          -- 発行注意書きをコピー\r\n          PROC_COPY_HAKKOCHUI(R_IDO.SETAI_NO, T_MAX_SETAI_NO);\r\n        END IF;\r\n        T_SETAI_NO     := T_MAX_SETAI_NO;\r\n      ELSE\r\n        T_SETAI_NO := R_BUPD_ATENA.SETAI_NO;\r\n        -- 発行注意書きをコピー\r\n        PROC_COPY_HAKKOCHUI(R_IDO.SETAI_NO, T_SETAI_NO);\r\n      END IF;\r\n      IF NKADO_BI5 <= I_SYSDATE THEN\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--         IF CR_IDO.IDO_JIYU IN (15,16,28) AND NJOKEN111 = 1 THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n        --IF CR_IDO.IDO_JIYU IN (150,160,280) AND NJOKEN111 = 1 THEN\r\n         IF CR_IDO.IDO_JIYU IN (150,160,280,191) AND NJOKEN111 = 1 THEN\r\n            T_RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN + 10;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--         ELSIF CR_IDO.IDO_JIYU IN (15,16,28) AND NJOKEN111 = 0 THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n        --ELSIF CR_IDO.IDO_JIYU IN (150,160,280) AND NJOKEN111 = 0 THEN\r\n         ELSIF CR_IDO.IDO_JIYU IN (150,160,280,191) AND NJOKEN111 = 0 THEN\r\n            T_RIREKI_RENBAN := 10;\r\n         ELSE\r\n            T_RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN;\r\n         END IF;\r\n      ELSE\r\n         T_RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN;\r\n      END IF;\r\n--2024/04/03 DIS.Wangrucheng Add start 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n      -- 異動事由は「141:異動取消（増）、292:異動取消（減）、418:異動取消（修正）」の場合\r\n      IF CR_IDO.IDO_JIYU IN (141,292,418) THEN\r\n        T_RIREKI_RENBAN := NRIREKI_RENBAN + 10;\r\n      END IF;\r\n--2024/04/03 DIS.Wangrucheng Add end\r\n--2025/10/29 CTC.liu add start 1.0.025.002:新WizLIFE保守対応 QA22490\r\n       IF GAB_RIREKI_RENBAN <> 0 THEN\r\n          T_RIREKI_RENBAN := GAB_RIREKI_RENBAN+10;\r\n       END IF;\r\n      ------------------------------------------------\r\n      -- 宛名基本ＴＢＬ追加\r\n      ------------------------------------------------\r\n--2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n IF (R_ATENA.RIREKI_RENBAN *100 +R_ATENA.RIREKI_EDABAN <= R_BUPD_ATENA.RIREKI_RENBAN *100 +R_BUPD_ATENA.RIREKI_EDABAN)\r\n \t\t\t\t\t\t\t\t\t\tor CR_IDO.IDO_JIYU <> 412 THEN\r\n      INSERT INTO JIBTJUKIKIHON\r\n      (\r\n        KOJIN_NO,\r\n        RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n        RIREKI_EDABAN,   --履歴枝番\r\n        SAISHIN_FLG,     --最新フラグ\r\n        TORIKESHI_FLG,   --取消フラグ\r\n        JOHYOYODATA_FLG, --除票用データフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n        TEKIYO_BI,\r\n        TOROKU_GYOMU,\r\n        JUMINHYO_CD,\r\n        SETAI_NO,\r\n        GENZON_KBN,\r\n        JINKAKU_KBN,\r\n        KOKUSEKI_CD,\r\n        SHISHO_CD,\r\n        CHIKU_CD,\r\n        GYOSEIKU_CD,\r\n        HAN_CD,\r\n        SHOGAKU_CD,\r\n        CHUGAKU_CD,\r\n        TOHYOKU_CD,\r\n        SANTEIDANTAI_CD,\r\n        SEINENGAPI,\r\n        WAREKI_SEINENGAPI,\r\n        HYOJI_SEINENGAPI,\r\n        SEIBETSU,\r\n        USER_CD,\r\n        OAZA_CD,\r\n        HONBAN,\r\n        EDABAN1,\r\n        EDABAN2,\r\n        EDABAN3,\r\n        KATAGAKI_CD,\r\n        GAIKU,\r\n        TOU,\r\n        GOU,\r\n        JICHI_CD,\r\n        SHIMEI_KANA,\r\n        SHIMEI_KANJI,\r\n        HONMYO_KANA,\r\n        HONMYO_KANJI,\r\n        YUBIN_NO,\r\n        YUBIN_NOBC,\r\n        CHOMEI,\r\n        BANCHI,\r\n        KATAGAKI,\r\n        DAIHYO_KATAGAKI,\r\n        DAIHYO_SHIMEI,\r\n        TEL_NO,\r\n        TEL_KBN,\r\n        FAX_NO,\r\n        MAIL_ADS,\r\n        YUHEN_KBN,\r\n        TOROKU_JIYU,\r\n        JUFUKU_KOJIN_NO,\r\n        SYS_SAKUSEIBI,\r\n        SYS_KOSHINBI,\r\n        SYS_JIKAN,\r\n        SYS_SHOKUINKOJIN_NO,\r\n        SYS_TANMATSU_NO,\r\n        CHOMEI_KANA,\r\n        BANCHI_KANA,\r\n        KATAGAKI_KANA,\r\n        KATAGAKI_HIDE_FLG,\r\n        GAIJI_FLG,\r\n        HOJINSOSHIKI_CD,\r\n        JE_KOKUHOSHISANWARI_KBN,\r\n        JE_JINTEKIGENMEN_KBN,\r\n        JE_SHOYUSHAKEISHONIN_KBN,\r\n        JE_LINK_KOJIN_NO,\r\n        JE_NAYOSE_NO,\r\n        YOBI1_CD,\r\n        YOBI2_CD,\r\n        YOBI3_CD,\r\n        YOBI4_CD,\r\n        YOBI5_CD,\r\n        YOBI1_CH,\r\n        YOBI2_CH,\r\n        YOBI3_CH,\r\n        YOBI4_CH,\r\n        YOBI5_CH\r\n\r\n       ,TOUGOU_NO\r\n       ,SEIDO_KOJIN_NO\r\n       ,SEIDO_HOJIN_NO\r\n       ,ZOKUGARACD1\r\n       ,ZOKUGARACD2\r\n       ,ZOKUGARACD3\r\n       ,ZOKUGARACD4\r\n       ,ZOKUGARAKBN\r\n       ,ZOKUGARAMEI\r\n       ,JITSUZOKUGARAMEI\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n       ,KETAPRM                   --住所_桁取パラメータ（基本データリスト用項目）\r\n       ,KOKUMEI_CD                --住所_国名コード（住登外者宛名番号管理の基本データリスト用項目）\r\n--2024/01/25 DIS.liuqimeng Add end\r\n\r\n      )\r\n      VALUES\r\n      (\r\n        T_KOJIN_NO,\r\n        T_RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n        CASE\r\n--2024/04/03 DIS.Wangrucheng Update 0.3.030.000:新WizLIFE２次開発（ph4対応）\r\n--            WHEN CR_IDO.IDO_JIYU IN (150,160,280) THEN 1     --履歴枝番\r\n--2024/03/26 DIS.liuqimeng Update 0.3.000.000:受入検証指摘対応\r\n--            WHEN CR_IDO.IDO_JIYU IN (150,160,280,141,292,418) THEN 1     --履歴枝番\r\n--2024/08/02 DIS.chenming Update 0.3.000.000:IT_JIB_00115対応\r\n--            WHEN CR_IDO.IDO_JIYU IN (150,160,240,141,292,418) THEN 1     --履歴枝番\r\n            WHEN CR_IDO.IDO_JIYU != 412 THEN 1     --履歴枝番\r\n            ELSE R_BUPD_ATENA.RIREKI_EDABAN + 1\r\n        END,\r\n        1,       --最新フラグ\r\n        0,       --取消フラグ\r\n        0,       --除票用データフラグ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n        R_BUPD_ATENA.TEKIYO_BI,\r\n        R_BUPD_ATENA.TOROKU_GYOMU,\r\n        T_JUMIN_CD,\r\n        T_SETAI_NO,\r\n        R_BUPD_ATENA.GENZON_KBN,\r\n        R_BUPD_ATENA.JINKAKU_KBN,\r\n        R_BUPD_ATENA.KOKUSEKI_CD,\r\n        R_BUPD_ATENA.SHISHO_CD,\r\n        R_BUPD_ATENA.CHIKU_CD,\r\n        R_BUPD_ATENA.GYOSEIKU_CD,\r\n        R_BUPD_ATENA.HAN_CD,\r\n        R_BUPD_ATENA.SHOGAKU_CD,\r\n        R_BUPD_ATENA.CHUGAKU_CD,\r\n        R_BUPD_ATENA.TOHYOKU_CD,\r\n        R_BUPD_ATENA.SANTEIDANTAI_CD,\r\n        R_BUPD_ATENA.SEINENGAPI,\r\n        R_BUPD_ATENA.WAREKI_SEINENGAPI,\r\n        R_BUPD_ATENA.HYOJI_SEINENGAPI,\r\n        R_BUPD_ATENA.SEIBETSU,\r\n        R_BUPD_ATENA.USER_CD,\r\n        R_BUPD_ATENA.OAZA_CD,\r\n        R_BUPD_ATENA.HONBAN,\r\n        R_BUPD_ATENA.EDABAN1,\r\n        R_BUPD_ATENA.EDABAN2,\r\n        R_BUPD_ATENA.EDABAN3,\r\n        R_BUPD_ATENA.KATAGAKI_CD,\r\n        R_BUPD_ATENA.GAIKU,\r\n        R_BUPD_ATENA.TOU,\r\n        R_BUPD_ATENA.GOU,\r\n        R_BUPD_ATENA.JICHI_CD,\r\n        R_BUPD_ATENA.SHIMEI_KANA,\r\n        R_BUPD_ATENA.SHIMEI_KANJI,\r\n        R_BUPD_ATENA.HONMYO_KANA,\r\n        R_BUPD_ATENA.HONMYO_KANJI,\r\n        R_BUPD_ATENA.YUBIN_NO,\r\n        R_BUPD_ATENA.YUBIN_NOBC,\r\n        R_BUPD_ATENA.CHOMEI,\r\n        R_BUPD_ATENA.BANCHI,\r\n        R_BUPD_ATENA.KATAGAKI,\r\n        R_BUPD_ATENA.DAIHYO_KATAGAKI,\r\n        R_BUPD_ATENA.DAIHYO_SHIMEI,\r\n        R_BUPD_ATENA.TEL_NO,\r\n        R_BUPD_ATENA.TEL_KBN,\r\n        R_BUPD_ATENA.FAX_NO,\r\n        R_BUPD_ATENA.MAIL_ADS,\r\n        R_BUPD_ATENA.YUHEN_KBN,\r\n        R_BUPD_ATENA.TOROKU_JIYU,\r\n        R_BUPD_ATENA.JUFUKU_KOJIN_NO,\r\n        i_SHORIBI,\r\n        0,\r\n        I_SYSTIME,\r\n        i_NSHOKUIN,\r\n        i_NTANMATSU_NO,\r\n        R_BUPD_ATENA.CHOMEI_KANA,\r\n        R_BUPD_ATENA.BANCHI_KANA,\r\n        R_BUPD_ATENA.KATAGAKI_KANA,\r\n        R_BUPD_ATENA.KATAGAKI_HIDE_FLG,\r\n        R_BUPD_ATENA.GAIJI_FLG,\r\n        R_BUPD_ATENA.HOJINSOSHIKI_CD,\r\n        R_BUPD_ATENA.JE_KOKUHOSHISANWARI_KBN,\r\n        R_BUPD_ATENA.JE_JINTEKIGENMEN_KBN,\r\n        R_BUPD_ATENA.JE_SHOYUSHAKEISHONIN_KBN,\r\n        R_BUPD_ATENA.JE_LINK_KOJIN_NO,\r\n        R_BUPD_ATENA.JE_NAYOSE_NO,\r\n        R_BUPD_ATENA.YOBI1_CD,\r\n        R_BUPD_ATENA.YOBI2_CD,\r\n        R_BUPD_ATENA.YOBI3_CD,\r\n        R_BUPD_ATENA.YOBI4_CD,\r\n        R_BUPD_ATENA.YOBI5_CD,\r\n        R_BUPD_ATENA.YOBI1_CH,\r\n        R_BUPD_ATENA.YOBI2_CH,\r\n        R_BUPD_ATENA.YOBI3_CH,\r\n        R_BUPD_ATENA.YOBI4_CH,\r\n        R_BUPD_ATENA.YOBI5_CH\r\n       ,R_BUPD_ATENA.TOUGOU_NO\r\n       ,R_BUPD_ATENA.SEIDO_KOJIN_NO\r\n       ,R_BUPD_ATENA.SEIDO_HOJIN_NO\r\n       ,R_BUPD_ATENA.ZOKUGARACD1\r\n       ,R_BUPD_ATENA.ZOKUGARACD2\r\n       ,R_BUPD_ATENA.ZOKUGARACD3\r\n       ,R_BUPD_ATENA.ZOKUGARACD4\r\n       ,R_BUPD_ATENA.ZOKUGARAKBN\r\n       ,R_BUPD_ATENA.ZOKUGARAMEI\r\n       ,R_BUPD_ATENA.JITSUZOKUGARAMEI\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n--2025/11/13 CTC.liu add start:1.0.026.003 保守QA23150対応\r\n       --,R_BUPD_ATENA.KETAPRM       --住所_桁取パラメータ（基本データリスト用項目）\r\n       ,DECODE (NVL(R_BUPD_ATENA.KETAPRM,NULL),NULL,JIAPK0010.FJUSHOPRM(R_BUPD_ATENA.CHOMEI),R_BUPD_ATENA.KETAPRM)\r\n       ,R_BUPD_ATENA.KOKUMEI_CD    --住所_国名コード（住登外者宛名番号管理の基本データリスト用項目）\r\n--2024/01/25 DIS.liuqimeng Add end\r\n      );\r\n--2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n     END IF;\r\n      --住基情報テーブルにレコードを追加する\r\n      REBT_JUKIJOHO := NULL;\r\n      REBT_JUKIJOHO.KOJIN_NO := T_KOJIN_NO;  --宛名番号\r\n      REBT_JUKIJOHO.RIREKI_RENBAN := T_RIREKI_RENBAN;  --履歴連番\r\n      REBT_JUKIJOHO.KYUUJI_KANA := R_BUPD_JUKIJOHO.KYUUJI_KANA;   --旧氏かな\r\n      REBT_JUKIJOHO.KYUUJI_KANJI := R_BUPD_JUKIJOHO.KYUUJI_KANJI;   --旧氏漢字\r\n      REBT_JUKIJOHO.SYS_SAKUSEIBI := i_SHORIBI;   --作成日\r\n      REBT_JUKIJOHO.SYS_KOSHINBI := 0;            --更新日\r\n      REBT_JUKIJOHO.SYS_JIKAN := I_SYSTIME;      --更新時間\r\n      REBT_JUKIJOHO.SYS_SHOKUINKOJIN_NO := i_NSHOKUIN;    --更新職員宛名番号\r\n      REBT_JUKIJOHO.SYS_TANMATSU_NO := i_NTANMATSU_NO;    --更新端末番号\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n--2024/10/28 DIS.Zhaohuanhuan Update start 0.3.000.000:新WizLIFE２次開発_IT_JIB_00550の対応\r\n--      REBT_JUKIJOHO.RIREKI_EDABAN := 1;\r\n      -- 異動事由は「412：誤記修正」の場合\r\n      IF CR_IDO.IDO_JIYU = 412 THEN\r\n         REBT_JUKIJOHO.RIREKI_EDABAN := R_BUPD_ATENA.RIREKI_EDABAN + 1;\r\n      ELSE\r\n         REBT_JUKIJOHO.RIREKI_EDABAN := 1;\r\n      END IF;\r\n--2024/10/28 DIS.Zhaohuanhuan Update end\r\n      REBT_JUKIJOHO.SAISHIN_FLG := 1;\r\n      REBT_JUKIJOHO.KYUUJI_KANA_FLG := R_BUPD_JUKIJOHO.KYUUJI_KANA_FLG;\r\n--2024/01/25 DIS.liuqimeng Add end\r\n      --住基情報に登録する\r\n      INSERT INTO JIBTJUKIJOHO VALUES REBT_JUKIJOHO;\r\n--2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n\tIF CR_IDO.IDO_JIYU=412 THEN\r\n        UPDATE JIBTJUKIJOHO\r\n        SET SAISHIN_FLG=0\r\n        WHERE KOJIN_NO=REBT_JUKIJOHO.KOJIN_NO\r\n        AND   RIREKI_RENBAN=T_RIREKI_RENBAN\r\n        AND   RIREKI_EDABAN=R_BUPD_ATENA.RIREKI_EDABAN;\r\n      END IF;\r\n--2024/12/6 CTC Update end\r\n      ------------------------------------------------\r\n      -- 住基異動ＴＢＬデータ削除\r\n      ------------------------------------------------\r\n      IF I_CNT1 != 0 THEN\r\n        IF NKADO_BI5 <= I_SYSDATE AND\r\n           NJOKEN111 = 0 AND\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--           CR_IDO.IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n           --CR_IDO.IDO_JIYU IN (150,160,280) THEN\r\n           CR_IDO.IDO_JIYU IN (150,160,280,191) THEN\r\n             NULL;\r\n       --2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n        --ELSE\r\n        ELSE\r\n         IF (R_ATENA.RIREKI_RENBAN *100 +R_ATENA.RIREKI_EDABAN <= R_BUPD_ATENA.RIREKI_RENBAN *100 +R_BUPD_ATENA.RIREKI_EDABAN) or CR_IDO.IDO_JIYU <>412 THEN\r\n          DELETE FROM JIBTJUKIIDO\r\n                WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n          END IF;\r\n\t--2024/12/6 CTC Update end\r\n        END IF;\r\n      END IF;\r\n      ------------------------------------------------\r\n      -- 住基異動ＴＢＬデータ追加\r\n      ------------------------------------------------\r\n--2023/06/27 ZCZL.WANGM ADD Start 0.2.000.001:住記系追加作業\r\n      --特例転出であることを示すフラグのセット処理を追加\r\n      --入力票コード−異動事由が「213:特例転出（一部）」「214:特例転出（全部）」「217:特例転出（一部）：郵送による特例転出」「218:特例転出（全部）：郵送による特例転出」「219:特例転出（一部）：ワンストップ」「210:特例転出（全部）：ワンストップ）」かつ転出する異動者（異動元世帯の続柄変更者ではない）の場合\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--      IF NREPORTCODE2 IN('213', '214', '217', '218' ,'219' ,'210') AND CR_IDO.IDO_JIYU = 21 THEN\r\n--2024/03/26 DIS.liuqimeng Update 0.3.000.000:受入検証指摘対応\r\n--      IF NREPORTCODE2 IN('213', '214', '217', '218' ,'219' ,'210') AND CR_IDO.IDO_JIYU = 210 THEN\r\n--    IF NREPORTCODE2 IN('213', '214', '217', '218' ,'219' ,'210') AND CR_IDO.IDO_JIYU IN(210,211) THEN  --2025/07/07 Del\r\n      IF NREPORTCODE2 IN('21003', '21004', '21007', '21008' ,'21009' ,'21000') AND CR_IDO.IDO_JIYU IN(210,211) THEN  --2025/07/07 Add\r\n        CR_IDO.YOBI4_CH := '[特例転出]';\r\n      --上記以外 かつ CR_IDO.現存区分が0の場合\r\n--    ELSIF NREPORTCODE2 NOT IN('213', '214', '217', '218' ,'219' ,'210') AND CR_IDO.GENZON_KBN = 0 THEN  --2025/07/07 Del\r\n      ELSIF NREPORTCODE2 NOT IN('21003', '21004', '21007', '21008' ,'21009' ,'21000') AND CR_IDO.GENZON_KBN = 0 THEN  --2025/07/07 Add\r\n        IF INSTR(CR_IDO.YOBI4_CH, '[特例転出]')>0 THEN\r\n          CR_IDO.YOBI4_CH := REPLACE(CR_IDO.YOBI4_CH,'[特例転出]','');\r\n        END IF;\r\n      ELSE\r\n        NULL;\r\n      END IF;\r\n--2023/06/27 ZCZL.WANGM ADD End\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n      --入力票コード−異動事由が「11003：特例転入(一部)」「11004：特例転入(全部)」かつ転入する異動者（異動先世帯の続柄変更者ではない）の場合\r\n--2024/03/26 DIS.liuqimeng Update 0.3.000.000:受入検証指摘対応\r\n--      IF NREPORTCODE2 IN('11003', '11004') AND CR_IDO.IDO_JIYU = 210 THEN\r\n      IF NREPORTCODE2 IN('11003', '11004') AND CR_IDO.IDO_JIYU IN(110,111) THEN\r\n        CR_IDO.YOBI4_CH := '[特例転入]';\r\n      --上記以外 かつ CR_IDO.現存区分が1の場合\r\n--2024/03/26 DIS.liuqimeng Update0.3.000.000:受入検証指摘対応\r\n--      ELSIF NREPORTCODE2 NOT IN('11003', '11004') AND CR_IDO.GENZON_KBN = 1 THEN\r\n      ELSIF CR_IDO.GENZON_KBN = 1 THEN\r\n        IF INSTR(CR_IDO.YOBI4_CH, '[特例転入]')>0 THEN\r\n          CR_IDO.YOBI4_CH := REPLACE(CR_IDO.YOBI4_CH,'[特例転入]','');\r\n        END IF;\r\n      ELSE\r\n        NULL;\r\n      END IF;\r\n--2024/01/25 DIS.liuqimeng Add end\r\n      ------------------------------------------------\r\n      -- 宛名基本ＴＢＬ追加\r\n      ------------------------------------------------\r\n--2024/11/07 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n      IF( R_ATENA.RIREKI_RENBAN <= R_BUPD_ATENA.RIREKI_RENBAN) or  CR_IDO.IDO_JIYU <> 412 THEN\r\n      INSERT INTO JIBTJUKIIDO\r\n      (\r\n        KOJIN_NO,\r\n        JUMINHYO_CD,\r\n        SETAI_NO,\r\n        JUN_SETAI_KBN,\r\n        SAIDAI_JUSHO_REN,\r\n        GENZON_KBN,\r\n        JINKAKU_KBN,\r\n        NUSHI_KBN,\r\n        SHISHO_CD,\r\n        CHIKU_CD,\r\n        GYOSEIKU_CD,\r\n        HAN_CD,\r\n        SHOGAKU_CD,\r\n        CHUGAKU_CD,\r\n        TOHYOKU_CD,\r\n        SANTEIDANTAI_CD,\r\n        ZOKUGARA_CD1,\r\n        ZOKUGARA_CD2,\r\n        ZOKUGARA_CD3,\r\n        ZOKUGARA_CD4,\r\n        ZOKUGARA_KBN,\r\n        ZOKUGARA_MEI,\r\n        JITSU_ZOKUGARA_MEI,\r\n        SEINENGAPI,\r\n        WAREKI_SEINENGAPI,\r\n        HYOJI_SEINENGAPI,\r\n        SEIBETSU,\r\n        KISAI_JUNI,\r\n        IDO_BI,\r\n        IDO_JIYU,\r\n        IDO_TODOKE_BI,\r\n        IDO_TODOKE_KBN,\r\n        JUTEI_BI,\r\n        JUTEI_JIYU,\r\n        JUTEI_TODOKEDE_BI,\r\n        JUTEI_TODOKEDE_KBN,\r\n        GENJUSHO_REN,\r\n        ZENJUSHO_REN,\r\n        TENNYUMAE_REN,\r\n        TENNYU_MITODOKE_REN,\r\n        HONSEKI_REN,\r\n        TENSHUTSU_YOTEI_BI,\r\n        TENSHUTSU_YOTEI_TODOKEDE_BI,\r\n        TENSHUTSU_YOTEI_TODOKEDE_KBN,\r\n        TENSHUTSU_YOTEI_REN,\r\n        TENSHUTSU_KAKUTEI_BI,\r\n        TENSHUTSU_KAKUTEI_TSUCHI_BI,\r\n        TENSHUTSU_KAKUTEI_TODOKEDE_KBN,\r\n        TENSHUTSU_KAKUTEI_REN,\r\n        JUMIN_NARU,\r\n        JUMIN_NARU_JIYU,\r\n        JUMIN_NARU_TODOKEDE_BI,\r\n        JUMIN_NARU_TODOKEDE_KBN,\r\n        JUMIN_NAKUNARU,\r\n        JUMIN_NAKUNARU_JIYU,\r\n        JUMIN_NAKUNARU_TODOKEDE_BI,\r\n        JUMIN_NAKUNARU_TODOKEDE_KBN,\r\n        SHIBOBI_FUSHO_KBN,\r\n        SHIMEI_KANA,\r\n        SHIMEI_KANJI,\r\n        HONMYO_KANA,\r\n        HONMYO_KANJI,\r\n        NUSHI_SHIMEI_KANA,\r\n        NUSHI_SHIMEI_KANJI,\r\n        BIKO,\r\n        KAISEI_REN,\r\n        KAISEI_BI,\r\n        KYU_SHIMEI_KANA,\r\n        KYU_SHIMEI_KANJI,\r\n        KOIKI_KOJIN_NO,\r\n        SHORIBI_KEY,\r\n        SHORI_JIKAN_KEY,\r\n        SHORI_KBN_KEY,\r\n        ZENBU_ICHIBU_KEY,\r\n        SHOKUINKOJIN_NO_KEY,\r\n        SYS_SAKUSEIBI,\r\n        SYS_KOSHINBI,\r\n        SYS_JIKAN,\r\n        SYS_SHOKUINKOJIN_NO,\r\n        SYS_TANMATSU_NO,\r\n        GOMI_CD,\r\n        SINYO_CD,\r\n        KOIKIKOFU_STOP_CD,\r\n        GAIJI_FLG,\r\n        YOBI1_CD,\r\n        YOBI2_CD,\r\n        YOBI3_CD,\r\n        YOBI4_CD,\r\n        YOBI5_CD,\r\n        YOBI1_CH,\r\n        YOBI2_CH,\r\n        YOBI3_CH,\r\n        YOBI4_CH,\r\n        YOBI5_CH\r\n        ,ALP_SHIMEI_KANA,\r\n        ALP_SHIMEI_KANJI,\r\n        GAI_SHIMEI_KANA,\r\n        GAI_SHIMEI_KANJI,\r\n        TSUSHOMEI_KANA,\r\n        TSUSHOMEI_KANJI,\r\n        HEIKIMEI_KANA,\r\n        HEIKIMEI_KANJI,\r\n        GAIKOKU_JUMIN_NARU,\r\n        ZAIRYU_NO_SHUBETSU,\r\n        ZAIRYU_CARD_NO,\r\n        ZAIRYU_SHIKAKU_CD,\r\n        ZAIRYU_SHURYO_BI,\r\n        ZAIRYU_KIKAN_NEN,\r\n        ZAIRYU_KIKAN_TSUKI,\r\n        ZAIRYU_KIKAN_HI,\r\n        KOKUSEKI_CD,\r\n        CARD_MANRYO_BI,\r\n        KBN_30_45,\r\n        KYOJYUCHI_UMU,\r\n        SEINENGAPI_FUSHO_KBN,\r\n        RYOKEN_BANGO,\r\n        RYOKEN_HAKKO_BI,\r\n        JORIKU_KYOKA_BI,\r\n        JUMIN_NUSHI_SHIMEI\r\n       ,SEIDO_KOJIN_NO\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n       ,NYURYOKUBASHO                   --入力場所\r\n       ,SHIMEI_KANA_FLG                 --氏名カナフラグ\r\n       ,TSUSHO_KANA_FLG                 --通称カナフラグ\r\n       ,JIJITSUJONOSETAINUSHI_KANA      --事実上の世帯主カナ\r\n       ,JIJITSUJONOSETAINUSHI_KANJI     --事実上の世帯主漢字\r\n       ,SAISYUTOROKUJUSHO_REN           --最終登録住所地連番\r\n       ,SAISEIKISAI_DATE                --再製記載年月日\r\n       ,SAISEIKISAIDATE_FUSHO_FLG       --再製記載年月日不詳フラグ\r\n       ,SAISEIKISAIDATE_FUSHO_HYOKI     --再製記載年月日不詳表記\r\n       ,SAISEISHOJODATE                 --再製消除年月日\r\n       ,SAISEISHOJODATE_FUSHO_FLG       --再製消除年月日不詳フラグ\r\n       ,SAISEISHOJODATE_FUSHO_HYOKI     --再製消除年月日不詳表記\r\n       ,KBN_30_46_47                    --法第30条46又は47区分\r\n       ,SEINENGAPI_FUSHO_HYOKI          --生年月日不詳表記\r\n       ,IDO_BI_FUSHO_FLG                --異動日不詳フラグ\r\n       ,IDO_BI_FUSHO_HYOKI              --異動日不詳表記\r\n       ,JUTEI_BI_FUSHO_FLG              --住定日不詳フラグ\r\n       ,JUTEI_BI_FUSHO_HYOKI            --住定日不詳表記\r\n       ,JUMIN_NARU_FUSHO_FLG            --住民となる日不詳フラグ\r\n       ,JUMIN_NARU_FUSHO_HYOKI          --住民となる日不詳表記\r\n       ,JUMIN_NAKUNARU_FUSHO_FLG        --住民でなくなる日不詳フラグ\r\n       ,JUMIN_NAKUNARU_FUSHO_HYOKI      --住民でなくなる日不詳表記\r\n       ,KAISEI_BI_FUSHO_FLG             --改製日不詳フラグ\r\n       ,KAISEI_BI_FUSHO_HYOKI           --改製日不詳表記\r\n       ,GAIKOKU_JUMIN_NARU_FUSHO_FLG    --外国人の住民となる日不詳フラグ\r\n       ,GAIKOKU_JUMIN_NARU_FUSHO_HYOKI  --外国人の住民となる日不詳表記\r\n       ,SEIBETSU_FUSHO_KBN              --性別不詳区分\r\n       ,IDO_JIYU_SHOSAI                 --異動事由詳細\r\n       ,IDOKOMOKU_1                     --異動項目_1\r\n       ,RYUIJIKO_1                      --留意事項_1\r\n       ,IDOKOMOKU_2                     --異動項目_2\r\n       ,RYUIJIKO_2                      --留意事項_2\r\n       ,IDOKOMOKU_3                     --異動項目_3\r\n       ,RYUIJIKO_3                      --留意事項_3\r\n       ,RIREKI_SENTAKUFUKA_FLG          --履歴選択不可フラグ\r\n       ,TODOKEDE_NO                     --届出番号\r\n       ,TORIKESHI_TODOKEDE_NO           --取消届出番号\r\n--2024/01/25 DIS.liuqimeng Add end\r\n      )\r\n      VALUES\r\n      (\r\n        T_KOJIN_NO,\r\n        T_JUMIN_CD,\r\n        T_SETAI_NO,\r\n        CR_IDO.JUN_SETAI_KBN,\r\n        CR_IDO.SAIDAI_JUSHO_REN,\r\n        CR_IDO.GENZON_KBN,\r\n        CR_IDO.JINKAKU_KBN,\r\n        CR_IDO.NUSHI_KBN,\r\n        CR_IDO.SHISHO_CD,\r\n        CR_IDO.CHIKU_CD,\r\n        CR_IDO.GYOSEIKU_CD,\r\n        CR_IDO.HAN_CD,\r\n        CR_IDO.SHOGAKU_CD,\r\n        CR_IDO.CHUGAKU_CD,\r\n        CR_IDO.TOHYOKU_CD,\r\n        CR_IDO.SANTEIDANTAI_CD,\r\n        CR_IDO.ZOKUGARA_CD1,\r\n        CR_IDO.ZOKUGARA_CD2,\r\n        CR_IDO.ZOKUGARA_CD3,\r\n        CR_IDO.ZOKUGARA_CD4,\r\n        CR_IDO.ZOKUGARA_KBN,\r\n        CR_IDO.ZOKUGARA_MEI,\r\n        CR_IDO.JITSU_ZOKUGARA_MEI,\r\n        CR_IDO.SEINENGAPI,\r\n        CR_IDO.WAREKI_SEINENGAPI,\r\n        CR_IDO.HYOJI_SEINENGAPI,\r\n        CR_IDO.SEIBETSU,\r\n        CR_IDO.KISAI_JUNI,\r\n        CR_IDO.IDO_BI,\r\n        CR_IDO.IDO_JIYU,\r\n        CR_IDO.IDO_TODOKE_BI,\r\n        CR_IDO.IDO_TODOKE_KBN,\r\n        CR_IDO.JUTEI_BI,\r\n        CR_IDO.JUTEI_JIYU,\r\n        CR_IDO.JUTEI_TODOKEDE_BI,\r\n        CR_IDO.JUTEI_TODOKEDE_KBN,\r\n        CR_IDO.GENJUSHO_REN,\r\n        CR_IDO.ZENJUSHO_REN,\r\n        CR_IDO.TENNYUMAE_REN,\r\n        CR_IDO.TENNYU_MITODOKE_REN,\r\n        CR_IDO.HONSEKI_REN,\r\n        CR_IDO.TENSHUTSU_YOTEI_BI,\r\n        CR_IDO.TENSHUTSU_YOTEI_TODOKEDE_BI,\r\n        CR_IDO.TENSHUTSU_YOTEI_TODOKEDE_KBN,\r\n        CR_IDO.TENSHUTSU_YOTEI_REN,\r\n        CR_IDO.TENSHUTSU_KAKUTEI_BI,\r\n        CR_IDO.TENSHUTSU_KAKUTEI_TSUCHI_BI,\r\n        CR_IDO.TENSHUTSU_KAKUTEI_TODOKEDE_KBN,\r\n        CR_IDO.TENSHUTSU_KAKUTEI_REN,\r\n        CR_IDO.JUMIN_NARU,\r\n        CR_IDO.JUMIN_NARU_JIYU,\r\n        CR_IDO.JUMIN_NARU_TODOKEDE_BI,\r\n        CR_IDO.JUMIN_NARU_TODOKEDE_KBN,\r\n        CR_IDO.JUMIN_NAKUNARU,\r\n        CR_IDO.JUMIN_NAKUNARU_JIYU,\r\n        CR_IDO.JUMIN_NAKUNARU_TODOKEDE_BI,\r\n        CR_IDO.JUMIN_NAKUNARU_TODOKEDE_KBN,\r\n        CR_IDO.SHIBOBI_FUSHO_KBN,\r\n        CR_IDO.SHIMEI_KANA,\r\n        CR_IDO.SHIMEI_KANJI,\r\n        CR_IDO.HONMYO_KANA,\r\n        CR_IDO.HONMYO_KANJI,\r\n        CR_IDO.NUSHI_SHIMEI_KANA,\r\n        CR_IDO.NUSHI_SHIMEI_KANJI,\r\n        CR_IDO.BIKO,\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n--        DECODE(NVL(CR_IDO.KAISEI_REN,0), 0, 1, CR_IDO.KAISEI_REN),\r\n--        CR_IDO.KAISEI_BI,\r\n        CASE\r\n            WHEN CR_IDO.IDO_JIYU IN (191,291) THEN CR_IDO.KAISEI_REN + 1\r\n            ELSE DECODE(NVL(CR_IDO.KAISEI_REN,0), 0, 1, CR_IDO.KAISEI_REN)\r\n        END,\r\n        CASE\r\n            WHEN CR_IDO.IDO_JIYU IN (191,291) THEN i_SHORIBI\r\n            ELSE CR_IDO.KAISEI_BI\r\n        END,\r\n--2024/01/25 DIS.liuqimeng Add end\r\n        CR_IDO.KYU_SHIMEI_KANA,\r\n        CR_IDO.KYU_SHIMEI_KANJI,\r\n        CR_IDO.KOIKI_KOJIN_NO,\r\n        I_SYSDATE,\r\n        I_SYSTIME,\r\n        CR_IDO.SHORI_KBN_KEY,\r\n        CR_IDO.ZENBU_ICHIBU_KEY,\r\n        i_NSHOKUIN,\r\n        i_SHORIBI,\r\n        0,\r\n        I_SYSTIME,\r\n        i_NSHOKUIN,\r\n        i_NTANMATSU_NO,\r\n        CR_IDO.GOMI_CD,\r\n        CR_IDO.SINYO_CD,\r\n        CR_IDO.KOIKIKOFU_STOP_CD,\r\n        CR_IDO.GAIJI_FLG,\r\n        CR_IDO.YOBI1_CD,\r\n        CR_IDO.YOBI2_CD,\r\n        CR_IDO.YOBI3_CD,\r\n        CR_IDO.YOBI4_CD,\r\n        CR_IDO.YOBI5_CD,\r\n        CR_IDO.YOBI1_CH,\r\n        CR_IDO.YOBI2_CH,\r\n        CR_IDO.YOBI3_CH,\r\n        CR_IDO.YOBI4_CH,\r\n        CR_IDO.YOBI5_CH\r\n        ,CR_IDO.ALP_SHIMEI_KANA,\r\n        CR_IDO.ALP_SHIMEI_KANJI,\r\n        CR_IDO.GAI_SHIMEI_KANA,\r\n        CR_IDO.GAI_SHIMEI_KANJI,\r\n        CR_IDO.TSUSHOMEI_KANA,\r\n        CR_IDO.TSUSHOMEI_KANJI,\r\n        CR_IDO.HEIKIMEI_KANA,\r\n        CR_IDO.HEIKIMEI_KANJI,\r\n        CR_IDO.GAIKOKU_JUMIN_NARU,\r\n        CR_IDO.ZAIRYU_NO_SHUBETSU,\r\n        CR_IDO.ZAIRYU_CARD_NO,\r\n        CR_IDO.ZAIRYU_SHIKAKU_CD,\r\n        CR_IDO.ZAIRYU_SHURYO_BI,\r\n        CR_IDO.ZAIRYU_KIKAN_NEN,\r\n        CR_IDO.ZAIRYU_KIKAN_TSUKI,\r\n        CR_IDO.ZAIRYU_KIKAN_HI,\r\n        CR_IDO.KOKUSEKI_CD,\r\n        CR_IDO.CARD_MANRYO_BI,\r\n        CR_IDO.KBN_30_45,\r\n        CR_IDO.KYOJYUCHI_UMU,\r\n        CR_IDO.SEINENGAPI_FUSHO_KBN,\r\n        CR_IDO.RYOKEN_BANGO,\r\n        CR_IDO.RYOKEN_HAKKO_BI,\r\n        CR_IDO.JORIKU_KYOKA_BI,\r\n        CR_IDO.JUMIN_NUSHI_SHIMEI\r\n       ,CR_IDO.SEIDO_KOJIN_NO\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n       ,VCHOSHACODE                   --入力場所\r\n       ,CR_IDO.SHIMEI_KANA_FLG                 --氏名カナフラグ\r\n       ,CR_IDO.TSUSHO_KANA_FLG                 --通称カナフラグ\r\n       ,CR_IDO.JIJITSUJONOSETAINUSHI_KANA      --事実上の世帯主カナ\r\n       ,CR_IDO.JIJITSUJONOSETAINUSHI_KANJI     --事実上の世帯主漢字\r\n       ,CR_IDO.SAISYUTOROKUJUSHO_REN           --最終登録住所地連番\r\n       ,CR_IDO.SAISEIKISAI_DATE                --再製記載年月日\r\n       ,CR_IDO.SAISEIKISAIDATE_FUSHO_FLG       --再製記載年月日不詳フラグ\r\n       ,CR_IDO.SAISEIKISAIDATE_FUSHO_HYOKI     --再製記載年月日不詳表記\r\n       ,CR_IDO.SAISEISHOJODATE                 --再製消除年月日\r\n       ,CR_IDO.SAISEISHOJODATE_FUSHO_FLG       --再製消除年月日不詳フラグ\r\n       ,CR_IDO.SAISEISHOJODATE_FUSHO_HYOKI     --再製消除年月日不詳表記\r\n       ,CR_IDO.KBN_30_46_47                    --法第30条46又は47区分\r\n       ,CR_IDO.SEINENGAPI_FUSHO_HYOKI          --生年月日不詳表記\r\n       ,CR_IDO.IDO_BI_FUSHO_FLG                --異動日不詳フラグ\r\n       ,CR_IDO.IDO_BI_FUSHO_HYOKI              --異動日不詳表記\r\n       ,CR_IDO.JUTEI_BI_FUSHO_FLG              --住定日不詳フラグ\r\n       ,CR_IDO.JUTEI_BI_FUSHO_HYOKI            --住定日不詳表記\r\n       ,CR_IDO.JUMIN_NARU_FUSHO_FLG            --住民となる日不詳フラグ\r\n       ,CR_IDO.JUMIN_NARU_FUSHO_HYOKI          --住民となる日不詳表記\r\n       ,CR_IDO.JUMIN_NAKUNARU_FUSHO_FLG        --住民でなくなる日不詳フラグ\r\n       ,CR_IDO.JUMIN_NAKUNARU_FUSHO_HYOKI      --住民でなくなる日不詳表記\r\n       ,CR_IDO.KAISEI_BI_FUSHO_FLG             --改製日不詳フラグ\r\n       ,CR_IDO.KAISEI_BI_FUSHO_HYOKI           --改製日不詳表記\r\n       ,CR_IDO.GAIKOKU_JUMIN_NARU_FUSHO_FLG    --外国人の住民となる日不詳フラグ\r\n       ,CR_IDO.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI  --外国人の住民となる日不詳表記\r\n       ,CR_IDO.SEIBETSU_FUSHO_KBN              --性別不詳区分\r\n       ,CR_IDO.IDO_JIYU_SHOSAI                 --異動事由詳細\r\n       ,CR_IDO.IDOKOMOKU_1                     --異動項目_1\r\n       ,CR_IDO.RYUIJIKO_1                      --留意事項_1\r\n       ,CR_IDO.IDOKOMOKU_2                     --異動項目_2\r\n       ,CR_IDO.RYUIJIKO_2                      --留意事項_2\r\n       ,CR_IDO.IDOKOMOKU_3                     --異動項目_3\r\n       ,CR_IDO.RYUIJIKO_3                      --留意事項_3\r\n       ,CR_IDO.RIREKI_SENTAKUFUKA_FLG          --履歴選択不可フラグ\r\n--2024/08/15 DIS.liuqimeng Update 0.3.000.000: IT_JIB_00228対応\r\n--       ,CR_IDO.TODOKEDE_NO                     --届出番号\r\n--2024/10/22 DIS.Gaohaobo Update 0.3.040.000: IT_JIB_00454対応\r\n--     ,JIBSOTODOKEDE_SEQ.NEXTVAL                --届出番号\r\n       ,VNEXTVAL                                 --届出番号\r\n       ,CR_IDO.TORIKESHI_TODOKEDE_NO           --取消届出番号\r\n--2024/01/25 DIS.liuqimeng Add end\r\n\r\n      );\r\n--2024/11/07 CTC Update start 0.3.000.000:IT_JIB_00736対応\r\n \tEND IF;\r\n       -- システム条件 =1の場合\r\n      IF NJOKEN = 1 THEN\r\n        SELECT COUNT(*)\r\n          INTO I_CNT2\r\n          FROM JIBTKOBETSUKANRI\r\n         WHERE KOJIN_NO = CR_IDO.KOJIN_NO;\r\n        -- JIBTKOBETSUKANRIの件数 =0の場合\r\n        IF I_CNT2 = 0 THEN\r\n      ------------------------------------------------\r\n      -- 個別項目情報管理テーブルの追加\r\n      ------------------------------------------------\r\n        INSERT INTO JIBTKOBETSUKANRI\r\n        (\r\n          KOJIN_NO,\r\n          SNENKIN_SHIKAKU,\r\n          SNENKIN_NO,\r\n          SNENKIN_KAISHI_BI,\r\n          SEIKATSUHOGO_SHIKAKU,\r\n          SEIKATSUHOGO_SHUBETU_CD,\r\n          SEIKATSUHOGO_KAISHI_BI,\r\n          SEIKATSUHOGO_SHURYO_BI,\r\n          SHOGAISHA_KUBUN_CD,\r\n          KOUTSUKYOSAI_KUBUN_CD,\r\n          SYS_SAKUSEIBI,\r\n          SYS_KOSHINBI,\r\n          SYS_JIKAN,\r\n          SYS_SHOKUINKOJIN_NO,\r\n          SYS_TANMATSU_NO\r\n        )\r\n        VALUES\r\n        (\r\n          T_KOJIN_NO,\r\n          0,\r\n          0,\r\n          NULL,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          i_SHORIBI,\r\n          0,\r\n          I_SYSTIME,\r\n          i_NSHOKUIN,\r\n          i_NTANMATSU_NO\r\n        );\r\n        END IF;\r\n      END IF;\r\n      ------------------------------------------------\r\n      -- 住基住所ＴＢＬ追加\r\n      ------------------------------------------------\r\n      FOR I IN 1..I_CNT LOOP\r\n        ------------------------------------------------\r\n        -- 住基住所ＴＢＬデータ検索\r\n        ------------------------------------------------\r\n\r\n        SELECT COUNT(*) INTO I_CNT1 FROM JIBTJUKIJUSHO\r\n          WHERE KOJIN_NO    = T_KOJIN_NO\r\n              AND NVL(OAZA_CD,0) = NVL(M_JUSHO(I).OAZA_CD,0)\r\n            AND NVL(HONBAN,'　　　　　') = NVL(M_JUSHO(I).HONBAN,'　　　　　')\r\n            AND NVL(EDABAN1,'　　　　　') = NVL(M_JUSHO(I).EDABAN1,'　　　　　')\r\n            AND NVL(EDABAN2,'　　　　　') = NVL(M_JUSHO(I).EDABAN2,'　　　　　')\r\n            AND NVL(EDABAN3,'　　　　　') = NVL(M_JUSHO(I).EDABAN3,'　　　　　')\r\n            AND NVL(KATAGAKI_CD,0) = NVL(M_JUSHO(I).KATAGAKI_CD,0)\r\n            AND NVL(GAIKU,'_null') = NVL(M_JUSHO(I).GAIKU,'_null')\r\n            AND NVL(TOU,'_null') = NVL(M_JUSHO(I).TOU,'_null')\r\n            AND NVL(GOU,'_null') = NVL(M_JUSHO(I).GOU,'_null')\r\n            AND USER_CD     = M_JUSHO(I).USER_CD\r\n            AND JICHI_CD    = M_JUSHO(I).JICHI_CD\r\n            AND NVL(KATAGAKI_HIDE_FLG,0) = NVL(M_JUSHO(I).KATAGAKI_HIDE_FLG,0)\r\n            AND NVL(YUBIN_NO,0) = NVL(M_JUSHO(I).YUBIN_NO,0)\r\n            AND (BANCHI = M_JUSHO(I).BANCHI OR BANCHI IS NULL AND M_JUSHO(I).BANCHI IS NULL)\r\n            AND (CHOMEI = M_JUSHO(I).CHOMEI OR  CHOMEI IS NULL AND M_JUSHO(I).CHOMEI IS NULL)\r\n            AND (KATAGAKI = M_JUSHO(I).KATAGAKI OR KATAGAKI IS NULL AND M_JUSHO(I).KATAGAKI IS NULL)\r\n            AND (BANCHI_KANA = M_JUSHO(I).BANCHI_KANA OR BANCHI_KANA IS NULL AND M_JUSHO(I).BANCHI_KANA IS NULL)\r\n            AND (CHOMEI_KANA = M_JUSHO(I).CHOMEI_KANA OR CHOMEI_KANA IS NULL AND M_JUSHO(I).CHOMEI_KANA IS NULL)\r\n            AND (KATAGAKI_KANA = M_JUSHO(I).KATAGAKI_KANA OR KATAGAKI_KANA IS NULL AND M_JUSHO(I).KATAGAKI_KANA IS NULL)\r\n--2024/01/25 DIS.liuqimeng Update Start 0.3.000.000:新WizLIFE２次開発\r\n--            AND (NUSHI_HITTOSYA = M_JUSHO(I).NUSHI_HITTOSYA OR  NUSHI_HITTOSYA  IS NULL AND M_JUSHO(I).NUSHI_HITTOSYA IS NULL);\r\n            AND (NUSHI_HITTOSYA = M_JUSHO(I).NUSHI_HITTOSYA OR  NUSHI_HITTOSYA  IS NULL AND M_JUSHO(I).NUSHI_HITTOSYA IS NULL)\r\n            AND (KETAPRM = M_JUSHO(I).KETAPRM OR  KETAPRM  IS NULL AND M_JUSHO(I).KETAPRM IS NULL)\r\n            --2025/02/18 CTC Update start 0.3.000.000:IT_JIB_00976対応\r\n            --AND (KOKUMEI_CD = M_JUSHO(I).KOKUMEI_CD OR  KOKUMEI_CD  IS NULL AND M_JUSHO(I).KOKUMEI_CD IS NULL);\r\n            AND (KOKUMEI_CD = M_JUSHO(I).KOKUMEI_CD OR  KOKUMEI_CD  = 0 AND M_JUSHO(I).KOKUMEI_CD = 0);\r\n--2024/01/25 DIS.liuqimeng Update End\r\n        ------------------------------------------------\r\n        -- 住基住所ＴＢＬ検索判定\r\n        ------------------------------------------------\r\n        IF I_CNT1 = 0 THEN\r\n          IF (M_JUSHO(I).OAZA_CD = 0 AND\r\n              NVL(M_JUSHO(I).HONBAN,'　　　　　') = '　　　　　' AND\r\n              NVL(M_JUSHO(I).EDABAN1,'　　　　　') = '　　　　　' AND\r\n              NVL(M_JUSHO(I).EDABAN2,'　　　　　') = '　　　　　' AND\r\n              NVL(M_JUSHO(I).EDABAN3,'　　　　　') = '　　　　　' AND\r\n              M_JUSHO(I).KATAGAKI_CD = 0 AND\r\n              NVL(M_JUSHO(I).GAIKU,'　　　　　') ='　　　　　' AND\r\n              NVL(M_JUSHO(I).TOU,'　　　　　') = '　　　　　' AND\r\n              NVL(M_JUSHO(I).GOU,'　　　　　') = '　　　　　' AND\r\n              M_JUSHO(I).USER_CD = 0 AND\r\n              M_JUSHO(I).JICHI_CD = 0 AND\r\n              NVL(M_JUSHO(I).YUBIN_NO,0) = 0 AND\r\n              M_JUSHO(I).YUBIN_NOBC   IS  NULL  AND\r\n              M_JUSHO(I).BANCHI     IS  NULL  AND\r\n              M_JUSHO(I).CHOMEI     IS  NULL  AND\r\n              M_JUSHO(I).KATAGAKI     IS  NULL  AND\r\n              M_JUSHO(I).BANCHI_KANA  IS NULL AND\r\n              M_JUSHO(I).CHOMEI_KANA  IS NULL AND\r\n              M_JUSHO(I).KATAGAKI_KANA  IS NULL AND\r\n              M_JUSHO(I).KATAGAKI_HIDE_FLG = 0 AND\r\n--2024/01/25 DIS.liuqimeng Update Start 0.3.000.000:新WizLIFE２次開発\r\n--              M_JUSHO(I).NUSHI_HITTOSYA IS  NULL) THEN\r\n              M_JUSHO(I).NUSHI_HITTOSYA IS  NULL AND\r\n              M_JUSHO(I).KETAPRM IS  NULL AND\r\n              --2025/02/18 CTC Update start 0.3.000.000:IT_JIB_00976対応\r\n              --M_JUSHO(I).KOKUMEI_CD IS  NULL) THEN\r\n              M_JUSHO(I).KOKUMEI_CD = 0) THEN\r\n--2024/01/25 DIS.liuqimeng Update End\r\n                T_RENBAN := 0;\r\n          ELSE\r\n            ------------------------------------------------\r\n            -- 住所連番設定\r\n            ------------------------------------------------\r\n            SELECT COUNT(*)\r\n              INTO I_CNT1\r\n              FROM JIBTJUKIJUSHO\r\n             WHERE KOJIN_NO = T_KOJIN_NO;\r\n            ------------------------------------------------\r\n            -- 住基住所ＴＢＬ検索判定\r\n            ------------------------------------------------\r\n            IF I_CNT1 != 0 THEN\r\n              SELECT MAX(JUSHO_REN)\r\n                INTO T_RENBAN\r\n                FROM JIBTJUKIJUSHO\r\n               WHERE KOJIN_NO = T_KOJIN_NO;\r\n              T_RENBAN := T_RENBAN + 1;\r\n            ELSE\r\n              T_RENBAN := 1;\r\n            END IF;\r\n            --最大住所連番更新\r\n            UPDATE JIBTJUKIIDO\r\n              SET SAIDAI_JUSHO_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                 --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n            ------------------------------------------------\r\n            -- 住基住所ＴＢＬ追加\r\n            ------------------------------------------------\r\n            INSERT INTO JIBTJUKIJUSHO\r\n            (\r\n              KOJIN_NO,\r\n              JUSHO_REN,\r\n              OAZA_CD,\r\n              HONBAN,\r\n              EDABAN1,\r\n              EDABAN2,\r\n              EDABAN3,\r\n              KATAGAKI_CD,\r\n              GAIKU,\r\n              TOU,\r\n              GOU,\r\n              USER_CD,\r\n              JICHI_CD,\r\n              YUBIN_NO,\r\n              YUBIN_NOBC,\r\n              BANCHI,\r\n              CHOMEI,\r\n              KATAGAKI,\r\n              NUSHI_HITTOSYA,\r\n              SYS_SAKUSEIBI,\r\n              SYS_KOSHINBI,\r\n              SYS_JIKAN,\r\n              SYS_SHOKUINKOJIN_NO,\r\n              SYS_TANMATSU_NO,\r\n              CHOMEI_KANA,\r\n              BANCHI_KANA,\r\n              KATAGAKI_KANA,\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--              KATAGAKI_HIDE_FLG\r\n              KATAGAKI_HIDE_FLG,\r\n              KETAPRM,\r\n              KOKUMEI_CD\r\n--2024/01/25 DIS.liuqimeng Update end\r\n            )\r\n            VALUES\r\n            (\r\n              T_KOJIN_NO,\r\n              T_RENBAN,\r\n              M_JUSHO(I).OAZA_CD,\r\n              M_JUSHO(I).HONBAN,\r\n              M_JUSHO(I).EDABAN1,\r\n              M_JUSHO(I).EDABAN2,\r\n              M_JUSHO(I).EDABAN3,\r\n              M_JUSHO(I).KATAGAKI_CD,\r\n              M_JUSHO(I).GAIKU,\r\n              M_JUSHO(I).TOU,\r\n              M_JUSHO(I).GOU,\r\n              M_JUSHO(I).USER_CD,\r\n              M_JUSHO(I).JICHI_CD,\r\n              M_JUSHO(I).YUBIN_NO,\r\n              M_JUSHO(I).YUBIN_NOBC,\r\n              M_JUSHO(I).BANCHI,\r\n              M_JUSHO(I).CHOMEI,\r\n              M_JUSHO(I).KATAGAKI,\r\n              M_JUSHO(I).NUSHI_HITTOSYA,\r\n              i_SHORIBI,\r\n              0,\r\n              I_SYSTIME,\r\n              i_NSHOKUIN,\r\n              i_NTANMATSU_NO,\r\n              M_JUSHO(I).CHOMEI_KANA,\r\n              M_JUSHO(I).BANCHI_KANA,\r\n              M_JUSHO(I).KATAGAKI_KANA,\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--              M_JUSHO(I).KATAGAKI_HIDE_FLG\r\n              M_JUSHO(I).KATAGAKI_HIDE_FLG,\r\n--2025/11/13 CTC.liu update start:1.0.026.003 保守QA23150対応\r\n              --M_JUSHO(I).KETAPRM,\r\n              DECODE (NVL(M_JUSHO(I).KETAPRM,NULL),NULL,JIAPK0010.FJUSHOPRM(M_JUSHO(I).CHOMEI),M_JUSHO(I).KETAPRM),\r\n--2025/11/13 CTC.liu update end\r\n              M_JUSHO(I).KOKUMEI_CD\r\n--2024/01/25 DIS.liuqimeng Update end\r\n            );\r\n          END IF;\r\n--2025/5/23 CTC.liu add start 1.0.005.000:新WizLIFE２次開発 QA16260対応\r\n          IF  CR_IDO.IDO_JIYU = 412 and  R_ATENA.RIREKI_RENBAN* 100 +R_ATENA.RIREKI_EDABAN > R_BUPD_ATENA.RIREKI_RENBAN* 100 +R_BUPD_ATENA.RIREKI_EDABAN THEN\r\n           IF CR_IDO.GENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET GENJUSHO_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.ZENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET ZENJUSHO_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転入前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYUMAE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENNYUMAE_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転入未届地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYU_MITODOKE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENNYU_MITODOKE_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの本籍地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.HONSEKI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET HONSEKI_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転出予定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_YOTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENSHUTSU_YOTEI_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転出確定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_KAKUTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENSHUTSU_KAKUTEI_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          IF CR_IDO.SAISYUTOROKUJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n--2025/5/23 CTC.liu update start\r\n--        END IF;\r\n        ELSE\r\n--2025/5/23 CTC.liu update end\r\n--2025/5/23 CTC.liu add start\r\n         ------------------------------------------------\r\n          -- 住基異動ＴＢＬの各住所連番を更新\r\n          ------------------------------------------------\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの現住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.GENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET GENJUSHO_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                  --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.ZENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET ZENJUSHO_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                 --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転入前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYUMAE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENNYUMAE_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                 --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転入未届地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYU_MITODOKE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENNYU_MITODOKE_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                 --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの本籍地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.HONSEKI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET HONSEKI_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                 --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転出予定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_YOTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENSHUTSU_YOTEI_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                 --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転出確定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_KAKUTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENSHUTSU_KAKUTEI_REN = T_RENBAN\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n --2025/02/24 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n                 --,SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          --2025/02/19 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n          IF CR_IDO.SAISYUTOROKUJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET SAISYUTOROKUJUSHO_REN = T_RENBAN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n--2025/5/23 CTC.liu add\r\n            END IF;\r\n          END IF;\r\n        ELSE\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの各住所連番を更新\r\n          ------------------------------------------------\r\n          ------------------------------------------------\r\n          -- 住基住所データ抽出\r\n          ------------------------------------------------\r\n          SELECT *\r\n            INTO R_JUSHO\r\n            FROM JIBTJUKIJUSHO\r\n           WHERE KOJIN_NO = T_KOJIN_NO\r\n             AND JUSHO_REN = (\r\n                              SELECT MIN(JUSHO_REN)\r\n                                FROM JIBTJUKIJUSHO\r\n                               WHERE KOJIN_NO = T_KOJIN_NO\r\n                                 AND NVL(OAZA_CD,0)  = NVL(M_JUSHO(I).OAZA_CD,0)\r\n                                 AND NVL(HONBAN,'　　　　　')   = NVL(M_JUSHO(I).HONBAN,'　　　　　')\r\n                                 AND NVL(EDABAN1,'　　　　　')  = NVL(M_JUSHO(I).EDABAN1,'　　　　　')\r\n                                 AND NVL(EDABAN2,'　　　　　')  = NVL(M_JUSHO(I).EDABAN2,'　　　　　')\r\n                                 AND NVL(EDABAN3,'　　　　　')  = NVL(M_JUSHO(I).EDABAN3,'　　　　　')\r\n                                 AND NVL(KATAGAKI_CD,0) = NVL(M_JUSHO(I).KATAGAKI_CD,0)\r\n                                 AND NVL(GAIKU,'_null')    = NVL(M_JUSHO(I).GAIKU,'_null')\r\n                                 AND NVL(TOU,'_null')      = NVL(M_JUSHO(I).TOU,'_null')\r\n                                 AND NVL(GOU,'_null')      = NVL(M_JUSHO(I).GOU,'_null')\r\n                                 AND USER_CD  = M_JUSHO(I).USER_CD\r\n                                 AND JICHI_CD    = M_JUSHO(I).JICHI_CD\r\n                                 AND NVL(KATAGAKI_HIDE_FLG,0) = NVL(M_JUSHO(I).KATAGAKI_HIDE_FLG,0)\r\n                                 AND NVL(YUBIN_NO,0) = NVL(M_JUSHO(I).YUBIN_NO,0)\r\n                                 --##########################################\r\n                                 --##郵便番号バーコードの仕様確定した場合は処理する\r\n                                 --##########################################\r\n                                 AND (BANCHI = M_JUSHO(I).BANCHI OR BANCHI IS NULL AND M_JUSHO(I).BANCHI IS NULL)\r\n                                 AND (CHOMEI = M_JUSHO(I).CHOMEI OR  CHOMEI IS NULL AND M_JUSHO(I).CHOMEI IS NULL)\r\n                                 AND (KATAGAKI = M_JUSHO(I).KATAGAKI OR KATAGAKI IS NULL AND M_JUSHO(I).KATAGAKI IS NULL)\r\n                                 AND (BANCHI_KANA = M_JUSHO(I).BANCHI_KANA OR BANCHI_KANA IS NULL AND M_JUSHO(I).BANCHI_KANA IS NULL)\r\n                                 AND (CHOMEI_KANA = M_JUSHO(I).CHOMEI_KANA OR CHOMEI_KANA IS NULL AND M_JUSHO(I).CHOMEI_KANA IS NULL)\r\n                                 AND (KATAGAKI_KANA = M_JUSHO(I).KATAGAKI_KANA OR KATAGAKI_KANA IS NULL AND M_JUSHO(I).KATAGAKI_KANA IS NULL)\r\n                                 AND (NUSHI_HITTOSYA = M_JUSHO(I).NUSHI_HITTOSYA OR  NUSHI_HITTOSYA  IS NULL AND M_JUSHO(I).NUSHI_HITTOSYA IS NULL)\r\n                                );\r\n--2025/5/23 CTC.liu add start 1.0.005.000:新WizLIFE２次開発 QA16260対応\r\n       IF  CR_IDO.IDO_JIYU = 412 and  R_ATENA.RIREKI_RENBAN* 100 +R_ATENA.RIREKI_EDABAN > R_BUPD_ATENA.RIREKI_RENBAN* 100 +R_BUPD_ATENA.RIREKI_EDABAN THEN\r\n\r\n         IF CR_IDO.GENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET GENJUSHO_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.ZENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET ZENJUSHO_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転入前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYUMAE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENNYUMAE_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転入未届地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYU_MITODOKE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENNYU_MITODOKE_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの本籍地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.HONSEKI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET HONSEKI_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転出予定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_YOTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENSHUTSU_YOTEI_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの転出確定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_KAKUTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET TENSHUTSU_KAKUTEI_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n          --2025/02/19 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n          ------------------------------------------------\r\n          -- 住基履歴ＴＢＬの最終登録連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.SAISYUTOROKUJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIRIREKI\r\n              SET SAISYUTOROKUJUSHO_REN = R_JUSHO.JUSHO_REN\r\n--2025/09/05 CTC.liu update start 1.0.016.002:新WizLIFE保守対応 QA20504\r\n            --WHERE KOJIN_NO = T_KOJIN_NO;\r\n            WHERE KOJIN_NO = T_KOJIN_NO\r\n              AND RIREKI_RENBAN = R_BUPD_ATENA.RIREKI_RENBAN\r\n              AND RIREKI_EDABAN   = R_BUPD_ATENA.RIREKI_EDABAN+ 1;\r\n--2025/09/05 CTC.liu update end\r\n          END IF;\r\n--2025/5/23 CTC.liu update start\r\n--        END IF;\r\n        ELSE\r\n--2025/5/23 CTC.liu update end\r\n--2025/5/23 CTC.liu add\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの現住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.GENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET GENJUSHO_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.ZENJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET ZENJUSHO_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転入前住所連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYUMAE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENNYUMAE_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転入未届地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENNYU_MITODOKE_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENNYU_MITODOKE_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの本籍地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.HONSEKI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET HONSEKI_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転出予定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_YOTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENSHUTSU_YOTEI_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの転出確定地連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.TENSHUTSU_KAKUTEI_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET TENSHUTSU_KAKUTEI_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n          --2025/02/19 CTC Update start 0.3.000.000:IT_JIB_01005対応\r\n          ------------------------------------------------\r\n          -- 住基異動ＴＢＬの最終登録連番を更新\r\n          ------------------------------------------------\r\n          IF CR_IDO.SAISYUTOROKUJUSHO_REN = M_JUSHO(I).JUSHO_REN THEN\r\n            UPDATE JIBTJUKIIDO\r\n              SET SAISYUTOROKUJUSHO_REN = R_JUSHO.JUSHO_REN\r\n            WHERE KOJIN_NO = T_KOJIN_NO;\r\n          END IF;\r\n        END IF;\r\n--2025/5/23 CTC.liu add\r\n        END IF;\r\n      END LOOP;\r\n      ------------------------------------------------\r\n      -- 住基異動ＴＢＬの現住所連番を更新\r\n      ------------------------------------------------\r\n      UPDATE JIBTJUKIIDO\r\n         SET SAIDAI_JUSHO_REN =\r\n                              (SELECT NVL(MAX(JUSHO_REN),0)\r\n                               FROM JIBTJUKIJUSHO\r\n                               WHERE JIBTJUKIIDO.KOJIN_NO = JIBTJUKIJUSHO.KOJIN_NO\r\n                              )\r\n       WHERE KOJIN_NO = T_KOJIN_NO;\r\n      IF CR_IDO.JINKAKU_KBN = 1 THEN\r\n        --異動事由は11,12,13,18,24の場合、JIBWBUPD_TSUSHORIREKIテーブルを追加\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--        IF CR_IDO.IDO_JIYU IN (11,12,13,18,28) OR (CR_IDO.IDO_JIYU = 41 AND CR_IDO.ZENBU_ICHIBU_KEY = 1) THEN\r\n        --「41:職権修正」の記載箇所を「「410:職権修正」or「412:誤記修正」」に修正する。\r\n--2024/02/25 DIS.Qianyinhua Update 0.3.000.000:新WizLIFE２次開発（異動事由コードの一括対応）\r\n--        IF CR_IDO.IDO_JIYU IN (110,120,130,180,280) OR (CR_IDO.IDO_JIYU IN (410,412) AND CR_IDO.ZENBU_ICHIBU_KEY = 1) THEN\r\n--2025/10/07 CTC.liu update start 1.0.021.001:新WizLIFE保守対応 QA21654\r\n        --IF CR_IDO.IDO_JIYU IN (110,111,120,130,180,280) OR (CR_IDO.IDO_JIYU IN (410,412) AND CR_IDO.ZENBU_ICHIBU_KEY = 1) THEN\r\n--2025/11/05 CTC.liu update start 1.0.026.000:新WizLIFE保守対応 QA22785\r\n        --IF CR_IDO.IDO_JIYU IN (110,111,120,130,180,280) OR (CR_IDO.IDO_JIYU IN (410,412,411) AND CR_IDO.ZENBU_ICHIBU_KEY = 1) THEN\r\n        IF CR_IDO.IDO_JIYU IN (110,111,120,130,180,280) OR (CR_IDO.IDO_JIYU IN (410,412,411,416,417) AND CR_IDO.ZENBU_ICHIBU_KEY = 1) THEN\r\n--2024/01/25 DIS.liuqimeng Update end\r\n          FOR CR_BUPD_TSUSHORIREKI IN C_BUPD_TSUSHORIREKI(CR_IDO.ENTRY_ID,CR_IDO.KOJIN_NO,R_BUPD_ATENA.RIREKI_RENBAN) LOOP\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--            IF CR_IDO.IDO_JIYU = 28 AND NJOKEN111 = 1 THEN\r\n            IF CR_IDO.IDO_JIYU = 280 AND NJOKEN111 = 1 THEN\r\n              T_RIREKI_RENBAN := CR_BUPD_TSUSHORIREKI.RIREKI_RENBAN + 10;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--            ELSIF CR_IDO.IDO_JIYU = 28 AND NJOKEN111 = 0 THEN\r\n            ELSIF CR_IDO.IDO_JIYU = 280 AND NJOKEN111 = 0 THEN\r\n              T_RIREKI_RENBAN := 10;\r\n--2025/10/29 CTC.liu add start 1.0.025.002:新WizLIFE保守対応 QA22490\r\n            ELSIF GAB_RIREKI_RENBAN <> 0 THEN\r\n              T_RIREKI_RENBAN := GAB_RIREKI_RENBAN+10;\r\n            ELSE\r\n              T_RIREKI_RENBAN := CR_BUPD_TSUSHORIREKI.RIREKI_RENBAN;\r\n            END IF;\r\n            INSERT INTO JIBTTSUSHORIREKI VALUES\r\n              ( T_KOJIN_NO,\r\n                T_RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n--2025/09/11 CTC.liu update start 1.0.017.001:新WizLIFE保守対応 QA2071\r\n                 -- 1,                        --履歴枝番\r\n                CASE\r\n                 WHEN CR_IDO.IDO_JIYU IN (412) THEN R_BUPD_ATENA.RIREKI_EDABAN + 1\r\n                 ELSE 1\r\n                END,\r\n--2025/09/11 CTC.liu update end\r\n                CR_BUPD_TSUSHORIREKI.RENBAN,\r\n                CR_BUPD_TSUSHORIREKI.TOROKU_BI,\r\n                CR_BUPD_TSUSHORIREKI.TOROKU_USER_CD,\r\n                CR_BUPD_TSUSHORIREKI.SAKUJO_BI,\r\n                CR_BUPD_TSUSHORIREKI.SAKUJO_USER_CD,\r\n                CR_BUPD_TSUSHORIREKI.TSUSHO_KANA,\r\n                CR_BUPD_TSUSHORIREKI.TSUSHO_KANJI,\r\n                i_SHORIBI,\r\n                0,\r\n                I_SYSTIME,\r\n                i_NSHOKUIN,\r\n                i_NTANMATSU_NO\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n               ,CR_BUPD_TSUSHORIREKI.TSUSHO_KANA_FLG   --通称カナフラグ\r\n              );\r\n          END LOOP;\r\n        ----異動事由は11,12,13,18,24の以外の場合、EBT_TSUSHORIREKIテーブルを追加\r\n        ELSE\r\n--2025/09/12 CTC.liu update start 1.0.017.002:新WizLIFE保守対応 QA21118\r\n         IF CR_IDO.IDO_JIYU IN (412) THEN\r\n            TUSHORENBAN:=R_BUPD_ATENA.RIREKI_RENBAN;\r\n         ELSE\r\n            TUSHORENBAN:=R_BUPD_ATENA.RIREKI_RENBAN-10;\r\n         END IF;\r\n          --FOR CR_TSUSHORIREKI IN C_TSUSHORIREKI(CR_IDO.KOJIN_NO,R_BUPD_ATENA.RIREKI_RENBAN-10) LOOP\r\n          FOR CR_TSUSHORIREKI IN C_TSUSHORIREKI(CR_IDO.KOJIN_NO,TUSHORENBAN) LOOP\r\n            T_RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN;\r\n--2025/09/12 CTC.liu update end\r\n            INSERT INTO JIBTTSUSHORIREKI VALUES\r\n              ( T_KOJIN_NO,\r\n                T_RIREKI_RENBAN,\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n--2025/09/11 CTC.liu update start 1.0.017.001:新WizLIFE保守対応 QA2071\r\n                 -- 1,                        --履歴枝番\r\n                CASE\r\n                 WHEN CR_IDO.IDO_JIYU IN (412) THEN R_BUPD_ATENA.RIREKI_EDABAN + 1\r\n                 ELSE 1\r\n                END,\r\n--2025/09/11 CTC.liu update end\r\n                CR_TSUSHORIREKI.RENBAN,\r\n                CR_TSUSHORIREKI.TOROKU_BI,\r\n                CR_TSUSHORIREKI.TOROKU_USER_CD,\r\n                CR_TSUSHORIREKI.SAKUJO_BI,\r\n                CR_TSUSHORIREKI.SAKUJO_USER_CD,\r\n                CR_TSUSHORIREKI.TSUSHO_KANA,\r\n                CR_TSUSHORIREKI.TSUSHO_KANJI,\r\n                i_SHORIBI,\r\n                0,\r\n                I_SYSTIME,\r\n                i_NSHOKUIN,\r\n                i_NTANMATSU_NO\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n              ,CR_TSUSHORIREKI.TSUSHO_KANA_FLG   --通称カナフラグ\r\n              );\r\n          END LOOP;\r\n        END IF;\r\n      END IF;\r\n     IF CR_IDO.SHIMEI_KANA IS NOT NULL AND REPLACE(NVL(CR_IDO.SHIMEI_KANA,'　'),'　','') IS NOT NULL  THEN\r\n      I_POS                := NVL(INSTR(RTRIM(CR_IDO.SHIMEI_KANA,'　'),'　'),0);\r\n      IF I_POS > 30 OR I_POS <= 1 THEN\r\n  -- 姓\r\n         T_YOMI_KANA_SEI      := SUBSTR(CR_IDO.SHIMEI_KANA,1,30);                                         -- 姓の切出し\r\n      ELSE\r\n        -- 姓\r\n        T_YOMI_KANA_SEI      := SUBSTR(CR_IDO.SHIMEI_KANA,1,I_POS);                                      -- 姓の切出し\r\n      END IF;\r\n      T_YOMI_KANA_SEI      := KKAPK0010.FSKANA(T_YOMI_KANA_SEI);                                        -- 濁点の削除\r\n      IF LENGTH(CR_IDO.SHIMEI_KANA)-I_POS > 30 THEN\r\n  -- 名\r\n        T_YOMI_KANA_MEI      := SUBSTR(CR_IDO.SHIMEI_KANA,I_POS+1,30);                                   -- 名の切出し\r\n      ELSE\r\n        -- 名\r\n        T_YOMI_KANA_MEI      := SUBSTR(CR_IDO.SHIMEI_KANA,I_POS+1,LENGTH(CR_IDO.SHIMEI_KANA)-I_POS);     -- 名の切出し\r\n      END IF;\r\n      T_YOMI_KANA_MEI      := KKAPK0010.FSKANA(T_YOMI_KANA_MEI);                                        -- 濁点の削除\r\n       I_POS                := NVL(INSTR(RTRIM(CR_IDO.SHIMEI_KANJI,'　'),'　'),0);\r\n\r\n      IF I_POS > 30 OR I_POS <= 1 THEN\r\n  -- 姓\r\n        T_HENKANYO_KANJI_SEI := SUBSTR(CR_IDO.SHIMEI_KANJI,1,30);                                        -- 姓の切出し\r\n      ELSE\r\n        -- 姓\r\n        T_HENKANYO_KANJI_SEI := SUBSTR(CR_IDO.SHIMEI_KANJI,1,I_POS);                                     -- 姓の切出し\r\n      END IF;\r\n      I_CNT1 := KKAPK3000.FNAMEEDIT(1,30,T_HENKANYO_KANJI_SEI,T_HENKANYO_KANJI_SEI,T_KANJI2,T_KANJI3);  -- 桁数合わせ\r\n      IF LENGTH(CR_IDO.SHIMEI_KANJI)-I_POS > 30 THEN\r\n        -- 名\r\n        T_HENKANYO_KANJI_MEI := SUBSTR(CR_IDO.SHIMEI_KANJI,I_POS+1,30);                                  -- 名の切出し\r\n      ELSE\r\n        -- 名\r\n        T_HENKANYO_KANJI_MEI := SUBSTR(CR_IDO.SHIMEI_KANJI,I_POS+1,LENGTH(CR_IDO.SHIMEI_KANJI)-I_POS);   -- 名の切出し\r\n      END IF;\r\n      I_CNT1 := KKAPK3000.FNAMEEDIT(1,30,T_HENKANYO_KANJI_MEI,T_HENKANYO_KANJI_MEI,T_KANJI2,T_KANJI3);  -- 桁数合わせ\r\n\r\n      ------------------------------------------------\r\n      -- 氏名変換データ抽出\r\n      ------------------------------------------------\r\n      ------------------------------------------------\r\n      -- 姓\r\n      ------------------------------------------------\r\n      SELECT COUNT(*)\r\n        INTO I_CNT1\r\n        FROM GABTSHIMEIHENKAN\r\n       WHERE SHIMEI_KBN = 1\r\n         AND YOMI_KANA = T_YOMI_KANA_SEI\r\n         AND HENKANYO_KANJI = T_HENKANYO_KANJI_SEI;\r\n      ------------------------------------------------\r\n      -- 判定\r\n      ------------------------------------------------\r\n      IF I_CNT1 = 0 THEN\r\n        -- 最大連番の取得\r\n        SELECT NVL(MAX(RENBAN),0)\r\n          INTO I_CNT1\r\n          FROM GABTSHIMEIHENKAN\r\n         WHERE SHIMEI_KBN = 1\r\n           AND YOMI_KANA = T_YOMI_KANA_SEI;\r\n        -- 追加\r\n        INSERT INTO GABTSHIMEIHENKAN(\r\n          SHIMEI_KBN,\r\n          YOMI_KANA,\r\n          RENBAN,\r\n          SHIYO_KAISU,\r\n          HENKANYO_KANJI,\r\n          SYS_SAKUSEIBI,\r\n          SYS_KOSHINBI,\r\n          SYS_JIKAN,\r\n          SYS_SHOKUINKOJIN_NO,\r\n          SYS_TANMATSU_NO\r\n        ) VALUES (\r\n          1,\r\n          T_YOMI_KANA_SEI,\r\n          (I_CNT1 + 1),\r\n          1,\r\n          T_HENKANYO_KANJI_SEI,\r\n          TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD')),\r\n          0,\r\n          TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS')),\r\n          i_NSHOKUIN,\r\n          i_NTANMATSU_NO\r\n        );\r\n      ELSE\r\n        -- 使用回数の取得\r\n        SELECT SHIYO_KAISU\r\n          INTO I_CNT1\r\n          FROM GABTSHIMEIHENKAN\r\n         WHERE SHIMEI_KBN = 1\r\n           AND YOMI_KANA = T_YOMI_KANA_SEI\r\n           AND HENKANYO_KANJI = T_HENKANYO_KANJI_SEI ;\r\n        -- 使用回数を更新\r\n        UPDATE GABTSHIMEIHENKAN\r\n           SET SHIYO_KAISU = (I_CNT1 + 1),\r\n               SYS_KOSHINBI = TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD')),\r\n               SYS_JIKAN = TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS')),\r\n               SYS_SHOKUINKOJIN_NO = i_NSHOKUIN,\r\n               SYS_TANMATSU_NO = i_NTANMATSU_NO\r\n         WHERE SHIMEI_KBN = 1\r\n           AND YOMI_KANA = T_YOMI_KANA_SEI\r\n           AND HENKANYO_KANJI = T_HENKANYO_KANJI_SEI;\r\n      END IF;\r\n      ------------------------------------------------\r\n      -- 氏名変換データ抽出\r\n      ------------------------------------------------\r\n      ------------------------------------------------\r\n      -- 名\r\n      ------------------------------------------------\r\n      SELECT COUNT(*)\r\n        INTO I_CNT1\r\n        FROM GABTSHIMEIHENKAN\r\n       WHERE SHIMEI_KBN = 2\r\n         AND YOMI_KANA = T_YOMI_KANA_MEI\r\n         AND HENKANYO_KANJI = T_HENKANYO_KANJI_MEI;\r\n      ------------------------------------------------\r\n      -- 判定\r\n      ------------------------------------------------\r\n      IF I_CNT1 = 0 THEN\r\n        -- 最大連番の取得\r\n        SELECT NVL(MAX(RENBAN),0)\r\n          INTO I_CNT1\r\n          FROM GABTSHIMEIHENKAN\r\n         WHERE SHIMEI_KBN = 2\r\n           AND YOMI_KANA = T_YOMI_KANA_MEI;\r\n\r\n        -- 追加\r\n        INSERT INTO GABTSHIMEIHENKAN(\r\n          SHIMEI_KBN,\r\n          YOMI_KANA,\r\n          RENBAN,\r\n          SHIYO_KAISU,\r\n          HENKANYO_KANJI,\r\n          SYS_SAKUSEIBI,\r\n          SYS_KOSHINBI,\r\n          SYS_JIKAN,\r\n          SYS_SHOKUINKOJIN_NO,\r\n          SYS_TANMATSU_NO\r\n        ) VALUES (\r\n          2,\r\n          T_YOMI_KANA_MEI,\r\n          (I_CNT1 + 1),\r\n          1,\r\n          T_HENKANYO_KANJI_MEI,\r\n          TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD')),\r\n          0,\r\n          TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS')),\r\n          i_NSHOKUIN,\r\n          i_NTANMATSU_NO\r\n        );\r\n      ELSE\r\n        -- 使用回数の取得\r\n        SELECT SHIYO_KAISU\r\n          INTO I_CNT1\r\n          FROM GABTSHIMEIHENKAN\r\n         WHERE SHIMEI_KBN = 2\r\n           AND YOMI_KANA = T_YOMI_KANA_MEI\r\n           AND HENKANYO_KANJI = T_HENKANYO_KANJI_MEI;\r\n        -- 使用回数を更新\r\n        UPDATE GABTSHIMEIHENKAN\r\n           SET SHIYO_KAISU = (I_CNT1 + 1),\r\n               SYS_KOSHINBI = TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD')),\r\n               SYS_JIKAN = TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS')),\r\n               SYS_SHOKUINKOJIN_NO = i_NSHOKUIN,\r\n               SYS_TANMATSU_NO = i_NTANMATSU_NO\r\n         WHERE SHIMEI_KBN = 2\r\n           AND YOMI_KANA = T_YOMI_KANA_MEI\r\n           AND HENKANYO_KANJI = T_HENKANYO_KANJI_MEI;\r\n      END IF;\r\n    END IF;\r\n      ------------------------------------------------\r\n      -- 宛名番号ＴＢＬ追加\r\n      ------------------------------------------------\r\n      SELECT COUNT(*)\r\n        INTO I_CNT1\r\n        FROM GABTATENANO\r\n       WHERE KOJIN_NO = T_KOJIN_NO;\r\n      ------------------------------------------------\r\n      -- 住基住所ＴＢＬ検索判定\r\n      ------------------------------------------------\r\n      IF I_CNT1 = 0 THEN\r\n        ------------------------------------------------\r\n        -- 旧ユーザーコードを取得する\r\n        ------------------------------------------------\r\n        BEGIN\r\n          SELECT KYUUSER_CD\r\n            INTO N_KYUUSER_CD\r\n            FROM KKATGAPPEIJOHO\r\n           WHERE SANTEIDANTAI_CD = R_BUPD_ATENA.SANTEIDANTAI_CD;\r\n        EXCEPTION\r\n          WHEN OTHERS THEN\r\n             N_KYUUSER_CD := 0;\r\n        END;\r\n        ------------------------------------------------\r\n        -- 宛名番号ＴＢＬ追加\r\n        ------------------------------------------------\r\n        INSERT INTO GABTATENANO\r\n        (\r\n          KOJIN_NO,\r\n          KYUUSER_CD,\r\n          KYUKOJIN_NO,\r\n          SYS_SAKUSEIBI,\r\n          SYS_KOSHINBI,\r\n          SYS_JIKAN,\r\n          SYS_SHOKUINKOJIN_NO,\r\n          SYS_TANMATSU_NO\r\n        )\r\n        VALUES\r\n        (\r\n          T_KOJIN_NO,\r\n          N_KYUUSER_CD,\r\n          CR_IDO.KYU_KOJIN_NO,\r\n          TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD')),\r\n          0,\r\n          TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS')),\r\n          i_NSHOKUIN,\r\n          i_NTANMATSU_NO\r\n        );\r\n      END IF;\r\n      VSQL := NULL;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--      VSQL := 'INSERT INTO JIBWIDORUISEKI SELECT ''A'',' || T_KOJIN_NO || ',B.RIREKI_RENBAN,B.TEKIYO_BI,B.TOROKU_GYOMU,' || T_SETAI_NO || ',B.GENZON_KBN,\r\n      VSQL := 'INSERT INTO JIBWIDORUISEKI SELECT ''A'',' || T_KOJIN_NO || ',B.RIREKI_RENBAN,B.RIREKI_EDABAN,B.SAISHIN_FLG,B.TORIKESHI_FLG,B.JOHYOYODATA_FLG,B.TEKIYO_BI,B.TOROKU_GYOMU,' || T_SETAI_NO || ',B.GENZON_KBN,\r\n                      A.JUN_SETAI_KBN,B.JINKAKU_KBN,B.KOKUSEKI_CD,B.SHISHO_CD,B.CHIKU_CD,B.GYOSEIKU_CD,\r\n                      B.HAN_CD,B.SHOGAKU_CD,B.CHUGAKU_CD,B.TOHYOKU_CD,B.SANTEIDANTAI_CD,B.SEINENGAPI,\r\n                      B.WAREKI_SEINENGAPI,B.HYOJI_SEINENGAPI,B.SEIBETSU,B.USER_CD,B.OAZA_CD,B.HONBAN,\r\n                      B.EDABAN1,B.EDABAN2,B.EDABAN3,B.KATAGAKI_CD,B.GAIKU,B.TOU,B.GOU,B.JICHI_CD,B.SHIMEI_KANA,\r\n                      B.SHIMEI_KANJI,B.YUBIN_NO,B.YUBIN_NOBC,B.CHOMEI,B.BANCHI,B.KATAGAKI,B.DAIHYO_KATAGAKI,\r\n                      B.DAIHYO_SHIMEI,B.TEL_NO,B.TEL_KBN,B.FAX_NO,B.MAIL_ADS,B.YUHEN_KBN,B.TOROKU_JIYU,' || T_JUMIN_CD || ',\r\n                      A.ZOKUGARA_CD1,A.ZOKUGARA_CD2,A.ZOKUGARA_CD3,A.ZOKUGARA_CD4,A.ZOKUGARA_KBN,A.ZOKUGARA_MEI,\r\n                      A.JITSU_ZOKUGARA_MEI,A.KISAI_JUNI,A.IDO_BI,A.IDO_JIYU,A.IDO_TODOKE_BI,A.IDO_TODOKE_KBN,A.JUTEI_BI,\r\n                      A.JUTEI_JIYU,A.JUTEI_TODOKEDE_BI,A.JUTEI_TODOKEDE_KBN,A.GENJUSHO_REN,A.ZENJUSHO_REN,A.TENNYUMAE_REN,\r\n                      A.TENNYU_MITODOKE_REN,A.HONSEKI_REN,\r\n                      A.TENSHUTSU_YOTEI_BI,A.TENSHUTSU_YOTEI_TODOKEDE_BI,A.TENSHUTSU_YOTEI_TODOKEDE_KBN,A.TENSHUTSU_YOTEI_REN,\r\n                      A.TENSHUTSU_KAKUTEI_BI,A.TENSHUTSU_KAKUTEI_TSUCHI_BI,A.TENSHUTSU_KAKUTEI_TODOKEDE_KBN,A.TENSHUTSU_KAKUTEI_REN,\r\n                      A.JUMIN_NARU,A.JUMIN_NARU_JIYU,A.JUMIN_NARU_TODOKEDE_BI,A.JUMIN_NARU_TODOKEDE_KBN,A.JUMIN_NAKUNARU,\r\n                      A.JUMIN_NAKUNARU_JIYU,A.JUMIN_NAKUNARU_TODOKEDE_BI,A.JUMIN_NAKUNARU_TODOKEDE_KBN,A.SHIBOBI_FUSHO_KBN,\r\n                      B.HONMYO_KANA,B.HONMYO_KANJI,A.NUSHI_SHIMEI_KANA,A.NUSHI_SHIMEI_KANJI,A.BIKO,A.KAISEI_BI,A.KAISEI_REN,\r\n                      A.KYU_SHIMEI_KANA,A.KYU_SHIMEI_KANJI,' || I_SYSDATE || ',' || I_SYSTIME || ',A.SHORI_KBN_KEY,A.ZENBU_ICHIBU_KEY,'''\r\n                      || i_NSHOKUIN || ''',' || i_SHORIBI || ',' || I_SYSDATE || ',' || I_SYSTIME || ',''' || i_NSHOKUIN || ''','''  || i_NTANMATSU_NO || ''''||',\r\n                      A.GOMI_CD,A.SINYO_CD,A.KOIKIKOFU_STOP_CD,B.CHOMEI_KANA,B.BANCHI_KANA,B.KATAGAKI_KANA,B.KATAGAKI_HIDE_FLG,\r\n                      B.GAIJI_FLG,B.HOJINSOSHIKI_CD,B.JE_KOKUHOSHISANWARI_KBN,B.JE_JINTEKIGENMEN_KBN,B.JE_SHOYUSHAKEISHONIN_KBN,\r\n                      B.JE_LINK_KOJIN_NO,B.JE_NAYOSE_NO,B.YOBI1_CD,B.YOBI2_CD,B.YOBI3_CD,B.YOBI4_CD,B.YOBI5_CD,B.YOBI1_CH,\r\n                      B.YOBI2_CH,B.YOBI3_CH,B.YOBI4_CH,B.YOBI5_CH,' ||  I_SYSDATE || ',' || I_SYSTIME || ','''  || i_NTANMATSU_NO || ''''||\r\n                      ',A.ALP_SHIMEI_KANA,A.ALP_SHIMEI_KANJI,A.GAI_SHIMEI_KANA,A.GAI_SHIMEI_KANJI,A.TSUSHOMEI_KANA,A.TSUSHOMEI_KANJI,\r\n                      A.HEIKIMEI_KANA,A.HEIKIMEI_KANJI,A.GAIKOKU_JUMIN_NARU,A.ZAIRYU_NO_SHUBETSU,A.ZAIRYU_CARD_NO,A.ZAIRYU_SHIKAKU_CD,\r\n                      A.ZAIRYU_SHURYO_BI,A.ZAIRYU_KIKAN_NEN,A.ZAIRYU_KIKAN_TSUKI,A.ZAIRYU_KIKAN_HI,A.CARD_MANRYO_BI,A.KBN_30_45,A.KYOJYUCHI_UMU,\r\n                      A.SEINENGAPI_FUSHO_KBN,A.RYOKEN_BANGO,A.RYOKEN_HAKKO_BI,A.JORIKU_KYOKA_BI,A.JUMIN_NUSHI_SHIMEI,A.NUSHI_KBN '||\r\n\r\n                      ' ,B.TOUGOU_NO, A.SEIDO_KOJIN_NO, B.SEIDO_HOJIN_NO ' ||\r\n                      ' ,JH.KYUUJI_KANA, JH.KYUUJI_KANJI ' ||\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n                      ',B.KETAPRM, B.KOKUMEI_CD,' ||\r\n                      '''' || VCHOSHACODE || '''' ||\r\n                      ',A.SHIMEI_KANA_FLG,A.TSUSHO_KANA_FLG,JH.KYUUJI_KANA_FLG,A.JIJITSUJONOSETAINUSHI_KANA' ||\r\n                      ',A.JIJITSUJONOSETAINUSHI_KANJI,A.SAISYUTOROKUJUSHO_REN,A.SAISEIKISAI_DATE,A.SAISEIKISAIDATE_FUSHO_FLG,A.SAISEIKISAIDATE_FUSHO_HYOKI'||\r\n                      ',A.SAISEISHOJODATE,A.SAISEISHOJODATE_FUSHO_FLG,A.SAISEISHOJODATE_FUSHO_HYOKI,A.KBN_30_46_47,A.SEINENGAPI_FUSHO_HYOKI,A.IDO_BI_FUSHO_FLG'||\r\n                      ',A.IDO_BI_FUSHO_HYOKI,A.JUTEI_BI_FUSHO_FLG,A.JUTEI_BI_FUSHO_HYOKI,A.JUMIN_NARU_FUSHO_FLG,A.JUMIN_NARU_FUSHO_HYOKI,A.JUMIN_NAKUNARU_FUSHO_FLG'||\r\n                      ',A.JUMIN_NAKUNARU_FUSHO_HYOKI,A.KAISEI_BI_FUSHO_FLG,A.KAISEI_BI_FUSHO_HYOKI,A.GAIKOKU_JUMIN_NARU_FUSHO_FLG,A.GAIKOKU_JUMIN_NARU_FUSHO_HYOKI'||\r\n                      ',A.SEIBETSU_FUSHO_KBN,A.IDO_JIYU_SHOSAI,A.IDOKOMOKU_1,A.RYUIJIKO_1,A.IDOKOMOKU_2,A.RYUIJIKO_2,A.IDOKOMOKU_3,A.RYUIJIKO_3' ||\r\n                      ',A.RIREKI_SENTAKUFUKA_FLG ,A.TODOKEDE_NO ,A.TORIKESHI_TODOKEDE_NO ' ||\r\n--2024/01/25 DIS.liuqimeng Add end\r\n                      ' FROM JIBTJUKIIDO A,JIBTJUKIKIHON B ,JIBTJUKIJOHO JH WHERE A.KOJIN_NO = ' || T_KOJIN_NO || ' AND B.KOJIN_NO = ' || T_KOJIN_NO ||\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--                                                                             ' AND B.KOJIN_NO = JH.KOJIN_NO(+) AND B.RIREKI_RENBAN = JH.RIREKI_RENBAN(+) ';\r\n                      ' AND B.KOJIN_NO = JH.KOJIN_NO(+) AND B.RIREKI_RENBAN = JH.RIREKI_RENBAN(+) AND B.RIREKI_EDABAN = JH.RIREKI_EDABAN(+) ';\r\n      EXECUTE IMMEDIATE VSQL;\r\n      --更新後の内容を宛名異動累積ワークテーブル（GABWRUISEKIKIHON）に書込む。\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--        IF CR_IDO.IDO_JIYU IN (15,16,28) AND NKADO_BI5 <= I_SYSDATE THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n        --IF CR_IDO.IDO_JIYU IN (150,160,280) AND NKADO_BI5 <= I_SYSDATE THEN\r\n        IF CR_IDO.IDO_JIYU IN (150,160,280,191) AND NKADO_BI5 <= I_SYSDATE THEN\r\n           IF NJOKEN111 = 0 THEN\r\n              WK_RIREKI_RENBAN := 10;\r\n           ELSE\r\n              WK_RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN + 10;\r\n           END IF;\r\n        ELSE\r\n           WK_RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN;\r\n        END IF;\r\n        INSERT INTO GABWRUISEKIKIHON\r\n        ( KUBUN,\r\n          KOJIN_NO,\r\n          RIREKI_RENBAN,\r\n          TEKIYO_BI,\r\n          TOROKU_GYOMU,\r\n          JUMINHYO_CD,\r\n          SETAI_NO,\r\n          GENZON_KBN,\r\n          JINKAKU_KBN,\r\n          KOKUSEKI_CD,\r\n          SHISHO_CD,\r\n          CHIKU_CD,\r\n          GYOSEIKU_CD,\r\n          HAN_CD,\r\n          SHOGAKU_CD,\r\n          CHUGAKU_CD,\r\n          TOHYOKU_CD,\r\n          SANTEIDANTAI_CD,\r\n          SEINENGAPI,\r\n          WAREKI_SEINENGAPI,\r\n          HYOJI_SEINENGAPI,\r\n          SEIBETSU,\r\n          USER_CD,\r\n          OAZA_CD,\r\n          HONBAN,\r\n          EDABAN1,\r\n          EDABAN2,\r\n          EDABAN3,\r\n          KATAGAKI_CD,\r\n          GAIKU,\r\n          TOU,\r\n          GOU,\r\n          JICHI_CD,\r\n          SHIMEI_KANA,\r\n          SHIMEI_KANJI,\r\n          HONMYO_KANA,\r\n          HONMYO_KANJI,\r\n          YUBIN_NO,\r\n          YUBIN_NOBC,\r\n          CHOMEI,\r\n          BANCHI,\r\n          KATAGAKI,\r\n          DAIHYO_KATAGAKI,\r\n          DAIHYO_SHIMEI,\r\n          TEL_NO,\r\n          TEL_KBN,\r\n          FAX_NO,\r\n          MAIL_ADS,\r\n          YUHEN_KBN,\r\n          TOROKU_JIYU,\r\n          JUFUKU_KOJIN_NO,\r\n          SYS_SAKUSEIBI,\r\n          SYS_KOSHINBI,\r\n          SYS_JIKAN,\r\n          SYS_SHOKUINKOJIN_NO,\r\n          SYS_TANMATSU_NO,\r\n          CHOMEI_KANA,\r\n          BANCHI_KANA,\r\n          KATAGAKI_KANA,\r\n          KATAGAKI_HIDE_FLG,\r\n          GAIJI_FLG,\r\n          HOJINSOSHIKI_CD,\r\n          JE_KOKUHOSHISANWARI_KBN,\r\n          JE_JINTEKIGENMEN_KBN,\r\n          JE_SHOYUSHAKEISHONIN_KBN,\r\n          JE_LINK_KOJIN_NO,\r\n          JE_NAYOSE_NO,\r\n          YOBI1_CD,\r\n          YOBI2_CD,\r\n          YOBI3_CD,\r\n          YOBI4_CD,\r\n          YOBI5_CD,\r\n          YOBI1_CH,\r\n          YOBI2_CH,\r\n          YOBI3_CH,\r\n          YOBI4_CH,\r\n          YOBI5_CH,\r\n          SHORIBI,\r\n          SHORI_JIKAN,\r\n          SHORI_TANMATSU_NO\r\n         ,TOUGOU_NO\r\n         ,SEIDO_KOJIN_NO\r\n         ,SEIDO_HOJIN_NO\r\n         ,ZOKUGARACD1\r\n         ,ZOKUGARACD2\r\n         ,ZOKUGARACD3\r\n         ,ZOKUGARACD4\r\n         ,ZOKUGARAKBN\r\n         ,ZOKUGARAMEI\r\n         ,JITSUZOKUGARAMEI\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n         ,IDO_JIYU\r\n         ,IDO_TODOKE_BI\r\n         ,ALP_SHIMEI_KANJI\r\n         ,GAI_SHIMEI_KANJI\r\n         ,KYUUJI_KANA\r\n         ,KYUUJI_KANJI\r\n         ,TSUSHOMEI_KANA\r\n         ,TSUSHOMEI_KANJI\r\n         ,FURIGANAKAKUNIN_TSUSHO\r\n         ,SEINENGAPI_FUSHO_KBN\r\n         ,SEINENGAPI_FUSHO_HYOKI\r\n         ,JUGAI_SHIBOBI\r\n         ,ZAIRYU_NO_SHUBETSU\r\n         ,ZAIRYU_CARD_NO\r\n         ,ZAIRYU_SHIKAKU_CD\r\n         ,ZAIRYU_SHURYO_BI\r\n         ,ZAIRYU_KIKAN_NEN\r\n         ,ZAIRYU_KIKAN_TSUKI\r\n         ,ZAIRYU_KIKAN_HI\r\n         ,TOUGOU_FLG\r\n         ,TAGYOMUSANSYO_FLG\r\n         ,DOKUJISHISAKUID\r\n         ,GYOMUID\r\n         ,HONSHITEN_KBN\r\n         ,ZENGO_KBN\r\n         ,KOHYODOI\r\n         ,HOJIN_SHUBETSU\r\n         ,HEISATOBI\r\n         ,TANTOBUSHO\r\n         ,DAIHYO_KANA\r\n         ,NUSHI_SHIMEI_KANJI\r\n         ,KOKUMEI_CD\r\n         ,KETAPRM\r\n--2024/01/25 DIS.liuqimeng Add end\r\n--2024/03/26 DIS.liuqimeng Add start 0.3.000.000:受入検証指摘対応\r\n         ,HOJIN_KANRI_NO\r\n         ,SETSURITSU_BI\r\n         ,HEISATO_JIYU\r\n         ,YAGO\r\n--2024/03/26 DIS.liuqimeng Add end\r\n        )\r\n        VALUES\r\n        ( 'A',\r\n          T_KOJIN_NO,\r\n          WK_RIREKI_RENBAN,\r\n          R_BUPD_ATENA.TEKIYO_BI,\r\n          R_BUPD_ATENA.TOROKU_GYOMU,\r\n          T_JUMIN_CD,\r\n          T_SETAI_NO,\r\n          R_BUPD_ATENA.GENZON_KBN,\r\n          R_BUPD_ATENA.JINKAKU_KBN,\r\n          R_BUPD_ATENA.KOKUSEKI_CD,\r\n          R_BUPD_ATENA.SHISHO_CD,\r\n          R_BUPD_ATENA.CHIKU_CD,\r\n          R_BUPD_ATENA.GYOSEIKU_CD,\r\n          R_BUPD_ATENA.HAN_CD,\r\n          R_BUPD_ATENA.SHOGAKU_CD,\r\n          R_BUPD_ATENA.CHUGAKU_CD,\r\n          R_BUPD_ATENA.TOHYOKU_CD,\r\n          R_BUPD_ATENA.SANTEIDANTAI_CD,\r\n          R_BUPD_ATENA.SEINENGAPI,\r\n          R_BUPD_ATENA.WAREKI_SEINENGAPI,\r\n          R_BUPD_ATENA.HYOJI_SEINENGAPI,\r\n          R_BUPD_ATENA.SEIBETSU,\r\n          R_BUPD_ATENA.USER_CD,\r\n          R_BUPD_ATENA.OAZA_CD,\r\n          R_BUPD_ATENA.HONBAN,\r\n          R_BUPD_ATENA.EDABAN1,\r\n          R_BUPD_ATENA.EDABAN2,\r\n          R_BUPD_ATENA.EDABAN3,\r\n          R_BUPD_ATENA.KATAGAKI_CD,\r\n          R_BUPD_ATENA.GAIKU,\r\n          R_BUPD_ATENA.TOU,\r\n          R_BUPD_ATENA.GOU,\r\n          R_BUPD_ATENA.JICHI_CD,\r\n          R_BUPD_ATENA.SHIMEI_KANA,\r\n          R_BUPD_ATENA.SHIMEI_KANJI,\r\n          R_BUPD_ATENA.HONMYO_KANA,\r\n          R_BUPD_ATENA.HONMYO_KANJI,\r\n          R_BUPD_ATENA.YUBIN_NO,\r\n          R_BUPD_ATENA.YUBIN_NOBC,\r\n          R_BUPD_ATENA.CHOMEI,\r\n          R_BUPD_ATENA.BANCHI,\r\n          R_BUPD_ATENA.KATAGAKI,\r\n          R_BUPD_ATENA.DAIHYO_KATAGAKI,\r\n          R_BUPD_ATENA.DAIHYO_SHIMEI,\r\n          R_BUPD_ATENA.TEL_NO,\r\n          R_BUPD_ATENA.TEL_KBN,\r\n          R_BUPD_ATENA.FAX_NO,\r\n          R_BUPD_ATENA.MAIL_ADS,\r\n          R_BUPD_ATENA.YUHEN_KBN,\r\n          R_BUPD_ATENA.TOROKU_JIYU,\r\n          R_BUPD_ATENA.JUFUKU_KOJIN_NO,\r\n          i_SHORIBI,\r\n          0,\r\n          TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS')),\r\n          i_NSHOKUIN,\r\n          i_NTANMATSU_NO,\r\n          R_BUPD_ATENA.CHOMEI_KANA,\r\n          R_BUPD_ATENA.BANCHI_KANA,\r\n          R_BUPD_ATENA.KATAGAKI_KANA,\r\n          R_BUPD_ATENA.KATAGAKI_HIDE_FLG,\r\n          R_BUPD_ATENA.GAIJI_FLG,\r\n          R_BUPD_ATENA.HOJINSOSHIKI_CD,\r\n          R_BUPD_ATENA.JE_KOKUHOSHISANWARI_KBN,\r\n          R_BUPD_ATENA.JE_JINTEKIGENMEN_KBN,\r\n          R_BUPD_ATENA.JE_SHOYUSHAKEISHONIN_KBN,\r\n          R_BUPD_ATENA.JE_LINK_KOJIN_NO,\r\n          R_BUPD_ATENA.JE_NAYOSE_NO,\r\n          R_BUPD_ATENA.YOBI1_CD,\r\n          R_BUPD_ATENA.YOBI2_CD,\r\n          R_BUPD_ATENA.YOBI3_CD,\r\n          R_BUPD_ATENA.YOBI4_CD,\r\n          R_BUPD_ATENA.YOBI5_CD,\r\n          R_BUPD_ATENA.YOBI1_CH,\r\n          R_BUPD_ATENA.YOBI2_CH,\r\n          R_BUPD_ATENA.YOBI3_CH,\r\n          R_BUPD_ATENA.YOBI4_CH,\r\n          R_BUPD_ATENA.YOBI5_CH,\r\n          I_SYSDATE,\r\n          I_SYSTIME,\r\n          i_NTANMATSU_NO\r\n         ,R_BUPD_ATENA.TOUGOU_NO\r\n         ,R_BUPD_ATENA.SEIDO_KOJIN_NO\r\n         ,R_BUPD_ATENA.SEIDO_HOJIN_NO\r\n         ,R_BUPD_ATENA.ZOKUGARACD1\r\n         ,R_BUPD_ATENA.ZOKUGARACD2\r\n         ,R_BUPD_ATENA.ZOKUGARACD3\r\n         ,R_BUPD_ATENA.ZOKUGARACD4\r\n         ,R_BUPD_ATENA.ZOKUGARAKBN\r\n         ,R_BUPD_ATENA.ZOKUGARAMEI\r\n         ,R_BUPD_ATENA.JITSUZOKUGARAMEI\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n         ,0    --異動事由\r\n         ,0    --異動届出日\r\n         ,NULL --アルファベット氏名漢字\r\n         ,NULL --外国人氏名漢字\r\n         ,NULL --旧氏名カナ\r\n         ,NULL --旧氏名漢字\r\n         ,NULL --通称名カナ\r\n         ,NULL --通称名漢字\r\n         ,0    --通称カナ確認状況\r\n         ,0    --生年月日不詳区分\r\n         ,NULL --生年月日不詳表記\r\n         ,0    --住登外死亡年月日\r\n         ,0    --在留番号種別\r\n         ,NULL --在留カード番号\r\n         ,0    --在留資格コード\r\n         ,0    --在留期間終了年月日\r\n         ,0    --在留期間年\r\n         ,0    --在留期間月\r\n         ,0    --在留期間日\r\n         ,0    --統合宛名フラグ\r\n         ,0    --他業務参照不可フラグ\r\n         ,0    --独自施策システム等ID\r\n         ,0    --業務ID\r\n         ,0    --本支店区分\r\n         ,0    --前後区分\r\n         ,0    --法人番号公表の同意\r\n         ,0    --法人種別\r\n         ,0    --閉鎖等年月日\r\n         ,NULL --法人担当部署\r\n         ,NULL --代表者カナ\r\n         ,NULL --世帯主氏名漢字\r\n         ,0    --国名コード\r\n         ,NULL --桁パラメータ\r\n--2024/01/25 DIS.liuqimeng Add end\r\n--2024/03/26 DIS.liuqimeng Add start 0.3.000.000:受入検証指摘対応\r\n         ,0    --法人管理番号\r\n         ,0    --設立年月日\r\n         ,0    --閉鎖等事由\r\n         ,NULL --屋号\r\n--2024/03/26 DIS.liuqimeng Add end\r\n        );\r\n      ------------------------------------------------\r\n      -- 異動区分判定\r\n      ------------------------------------------------\r\n      IF CR_IDO.IDO_JIYU = CR_IDO.SHORI_KBN_KEY THEN\r\n        T_IDO_KBN := 1;\r\n      ELSE\r\n        T_IDO_KBN := 2;\r\n      END IF;\r\n      ------------------------------------------------\r\n      -- 異動累計ＴＢＬ追加\r\n      ------------------------------------------------\r\n     T_NUSHI_JINKAKU_KBN := T_NUSHI_JINKAKU_KBN1;\r\n\r\n     IF CR_IDO.SHORI_KBN_KEY IN (33,34,35,37) AND CR_IDO.SETAI_NO <> T_TARGET_SETAI_NO THEN\r\n        T_NUSHI_JINKAKU_KBN := T_NUSHI_JINKAKU_KBN2;\r\n\r\n     END IF;\r\n\r\n      JIBSORUIUPD(\r\n           T_KOJIN_NO\r\n          ,T_JUMIN_CD\r\n          ,CR_IDO.IDO_JIYU\r\n--2024/01/25 DIS.liuqimeng Add 0.3.000.000:新WizLIFE２次開発\r\n          ,VCHOSHACODE\r\n          ,T_IDO_KBN\r\n          ,CR_IDO.ZENBU_ICHIBU_KEY\r\n          ,0\r\n          ,NULL\r\n          ,i_NTANMATSU_NO\r\n          ,0\r\n          ,I_SYSDATE\r\n          ,I_SYSTIME\r\n          ,1\r\n          ,I_SYSDATE\r\n          ,I_SYSTIME\r\n          ,CR_IDO.SHORI_KBN_KEY\r\n          ,CR_IDO.ZENBU_ICHIBU_KEY\r\n          ,i_NSHOKUIN\r\n          ,i_NSHOKUIN\r\n          ,i_NTANMATSU_NO\r\n          ,i_SHORIBI\r\n          ,T_JINKAKU_KBN\r\n          ,T_GENZON_KBN\r\n          ,T_NUSHI_KBN\r\n          ,T_OAZA_CD\r\n          ,T_GYOSEIKU_CD\r\n          ,T_CHIKU_CD\r\n          ,T_NUSHI_JINKAKU_KBN\r\n          ,T_JIYU_KBN2\r\n      );\r\n      --**********************************************\r\n      --* 異動累計備考文作成\r\n      --**********************************************\r\n      WK_JINKAKU_KBN := 0;\r\n      IF T_BIKO_BUN_KEY IS NULL OR\r\n         T_BIKO_BUN_KEY != T_SETAI_NO THEN\r\n        ---------------------------------------\r\n        --既に備考文が蓄積されていた場合\r\n        --異動累計の備考文を更新\r\n        ---------------------------------------\r\n        IF T_BIKO_BUN IS NOT NULL THEN\r\n          -- 対象者全員の備考文を更新\r\n          UPDATE JIBTIDORUIKEI\r\n          SET BIKO_BUN = T_BIKO_BUN\r\n          WHERE SHORIBI_KEY         = I_SYSDATE\r\n          AND   SHORI_JIKAN_KEY     = I_SYSTIME\r\n          AND   SHORI_KBN_KEY       = CR_IDO.SHORI_KBN_KEY\r\n          AND   ZENBU_ICHIBU_KEY    = CR_IDO.ZENBU_ICHIBU_KEY\r\n          AND   SHOKUINKOJIN_NO_KEY = i_NSHOKUIN\r\n          AND   KOJIN_NO IN (SELECT KOJIN_NO FROM JIBTJUKIIDO WHERE SETAI_NO = T_BIKO_BUN_KEY);\r\n          -- 更新用備考分を初期化\r\n          T_BIKO_BUN := NULL;\r\n        END IF;\r\n        ---------------------------------------\r\n        --異動対象先頭者の本籍住所情報を取得\r\n        ---------------------------------------\r\n        BEGIN\r\n          SELECT JINKAKU_KBN\r\n            INTO WK_JINKAKU_KBN\r\n            FROM JIBWBUPD_JUKIIDO\r\n           WHERE SETAI_NO = CR_IDO.SETAI_NO\r\n             AND ENTRY_ID = i_IENTRY_ID\r\n             AND GENZON_KBN = 0\r\n             AND NUSHI_KBN = 1;\r\n        EXCEPTION\r\n            WHEN OTHERS THEN\r\n               WK_JINKAKU_KBN := 0;\r\n        END;\r\n        IF  (CR_IDO.SETAI_NO != T_TARGET_SETAI_NO) OR\r\n            (CR_IDO.SETAI_NO  = T_TARGET_SETAI_NO AND CR_IDO.IDO_JIYU = WK_IDO_JIYU) OR\r\n            (WK_JINKAKU_KBN = 1 AND CR_IDO.JINKAKU_KBN = 0) THEN\r\n          ---------------------------------------\r\n          --異動対象先頭者の本籍住所情報を取得\r\n          ---------------------------------------\r\n           BEGIN\r\n             SELECT CHOMEI,BANCHI,KATAGAKI,NUSHI_HITTOSYA\r\n               INTO T_BIKO_FIRST_CHOMEI,T_BIKO_FIRST_BANCHI,T_BIKO_FIRST_KATAGAKI,T_BIKO_FIRST_HITTOSHA\r\n               FROM JIBTJUKIIDO   JI,\r\n                    JIBTJUKIJUSHO JJ\r\n              WHERE JI.KOJIN_NO    = T_KOJIN_NO\r\n                AND JI.KOJIN_NO    = JJ.KOJIN_NO\r\n                AND JI.HONSEKI_REN = JJ.JUSHO_REN;\r\n\r\n           EXCEPTION\r\n              WHEN OTHERS THEN\r\n               T_BIKO_FIRST_CHOMEI := NULL;\r\n               T_BIKO_FIRST_BANCHI := NULL;\r\n               T_BIKO_FIRST_KATAGAKI := NULL;\r\n               T_BIKO_FIRST_HITTOSHA := NULL;\r\n           END;\r\n          ---------------------------------------\r\n          --情報の初期化\r\n          ---------------------------------------\r\n           T_BIKO_BUN_KEY := T_SETAI_NO;\r\n           I_IDO_COUNTER  := 1;\r\n           IF WK_JINKAKU_KBN = 1 AND\r\n              CR_IDO.JINKAKU_KBN = 0 THEN\r\n                 T_BIKO_BUN := '[' || I_IDO_COUNTER || ']';\r\n                 I_IDO_COUNTER := 1;\r\n                 IF T_BIKO_FIRST_CHOMEI IS NOT NULL THEN\r\n                    T_BIKO_BUN := T_BIKO_BUN || T_BIKO_FIRST_CHOMEI;\r\n                 END IF;\r\n\r\n                 IF T_BIKO_FIRST_BANCHI IS NOT NULL THEN\r\n                    T_BIKO_BUN := T_BIKO_BUN || T_BIKO_FIRST_BANCHI;\r\n                 END IF;\r\n\r\n                 IF T_BIKO_FIRST_KATAGAKI IS NOT NULL THEN\r\n                    T_BIKO_BUN := T_BIKO_BUN || T_BIKO_FIRST_KATAGAKI;\r\n                 END IF;\r\n                 IF T_BIKO_FIRST_HITTOSHA IS NOT NULL THEN\r\n                    T_BIKO_BUN := SUBSTR((T_BIKO_BUN || '：' || T_BIKO_FIRST_HITTOSHA),1,120);\r\n                 END IF;\r\n           END IF;\r\n        END IF;\r\n      ELSE\r\n        BEGIN\r\n          SELECT JINKAKU_KBN\r\n            INTO WK_JINKAKU_KBN\r\n            FROM JIBWBUPD_JUKIIDO\r\n           WHERE SETAI_NO = CR_IDO.SETAI_NO\r\n             AND ENTRY_ID = i_IENTRY_ID\r\n             AND GENZON_KBN = 0\r\n             AND NUSHI_KBN = 1;\r\n        EXCEPTION\r\n            WHEN OTHERS THEN\r\n               WK_JINKAKU_KBN := 0;\r\n        END;\r\n        I_IDO_COUNTER  := I_IDO_COUNTER+1;\r\n        IF (CR_IDO.SETAI_NO != T_TARGET_SETAI_NO) OR                                    --異動元または先の主変更対象者\r\n           (CR_IDO.SETAI_NO  = T_TARGET_SETAI_NO AND CR_IDO.IDO_JIYU = WK_IDO_JIYU) OR   --異動対象者\r\n           (WK_JINKAKU_KBN = 1 AND CR_IDO.JINKAKU_KBN = 0) THEN\r\n          ---------------------------------------\r\n          --本籍情報を取得\r\n          ---------------------------------------\r\n           BEGIN\r\n              SELECT CHOMEI,BANCHI,KATAGAKI,NUSHI_HITTOSYA\r\n                INTO T_BIKO_HANTEI_CHOMEI,T_BIKO_HANTEI_BANCHI,T_BIKO_HANTEI_KATAGAKI,T_BIKO_HANTEI_HITTOSHA\r\n                FROM JIBTJUKIIDO   JI,\r\n                     JIBTJUKIJUSHO JJ\r\n               WHERE JI.KOJIN_NO    = T_KOJIN_NO\r\n                 AND JI.KOJIN_NO    = JJ.KOJIN_NO\r\n                 AND JI.HONSEKI_REN = JJ.JUSHO_REN;\r\n           EXCEPTION\r\n                WHEN OTHERS THEN\r\n                  T_BIKO_HANTEI_CHOMEI := NULL;\r\n                  T_BIKO_HANTEI_BANCHI := NULL;\r\n                  T_BIKO_HANTEI_KATAGAKI := NULL;\r\n                  T_BIKO_HANTEI_HITTOSHA := NULL;\r\n           END;\r\n          ---------------------------------------\r\n          --本籍情報が先頭対象の物と異なる場合、備考文生成\r\n          ---------------------------------------\r\n           IF T_BIKO_FIRST_CHOMEI   != T_BIKO_HANTEI_CHOMEI OR\r\n              T_BIKO_FIRST_BANCHI   != T_BIKO_HANTEI_BANCHI OR\r\n              T_BIKO_FIRST_KATAGAKI != T_BIKO_HANTEI_KATAGAKI OR\r\n              T_BIKO_FIRST_HITTOSHA != T_BIKO_HANTEI_HITTOSHA  OR   --異動対象者\r\n              (WK_JINKAKU_KBN = 1 AND CR_IDO.JINKAKU_KBN = 0)  THEN\r\n            ---------------------------------------\r\n            --個人見出し部　生成\r\n            ---------------------------------------\r\n              IF T_BIKO_BUN IS NULL THEN\r\n                 T_BIKO_BUN := '[' || I_IDO_COUNTER || ']';\r\n              ELSE\r\n                 T_BIKO_BUN := T_BIKO_BUN || CHR(10) || '[' || I_IDO_COUNTER || ']';\r\n              END IF;\r\n            ---------------------------------------\r\n            --本籍地名部　生成\r\n            ---------------------------------------\r\n              IF T_BIKO_FIRST_CHOMEI   != T_BIKO_HANTEI_CHOMEI OR\r\n                 T_BIKO_FIRST_BANCHI   != T_BIKO_HANTEI_BANCHI OR\r\n                 T_BIKO_FIRST_KATAGAKI != T_BIKO_HANTEI_KATAGAKI OR\r\n                 (WK_JINKAKU_KBN = 1 AND CR_IDO.JINKAKU_KBN = 0)  THEN\r\n                   IF T_BIKO_HANTEI_CHOMEI   IS NOT NULL THEN\r\n                      T_BIKO_BUN := T_BIKO_BUN || T_BIKO_HANTEI_CHOMEI;\r\n                   END IF;\r\n                   IF T_BIKO_HANTEI_BANCHI   IS NOT NULL THEN\r\n                      T_BIKO_BUN := T_BIKO_BUN || T_BIKO_HANTEI_BANCHI;\r\n                   END IF;\r\n                   IF T_BIKO_HANTEI_KATAGAKI IS NOT NULL THEN\r\n                      T_BIKO_BUN := T_BIKO_BUN || T_BIKO_HANTEI_KATAGAKI;\r\n                   END IF;\r\n              END IF;\r\n            ---------------------------------------\r\n            --筆頭者部　生成\r\n            ---------------------------------------\r\n              IF ((T_BIKO_FIRST_CHOMEI   != T_BIKO_HANTEI_CHOMEI OR\r\n                   T_BIKO_FIRST_BANCHI   != T_BIKO_HANTEI_BANCHI OR\r\n                   T_BIKO_FIRST_KATAGAKI != T_BIKO_HANTEI_KATAGAKI) AND\r\n                   T_BIKO_FIRST_HITTOSHA != T_BIKO_HANTEI_HITTOSHA) OR\r\n                  (WK_JINKAKU_KBN = 1 AND CR_IDO.JINKAKU_KBN = 0) THEN\r\n                   IF T_BIKO_HANTEI_HITTOSHA IS NOT NULL THEN\r\n                      T_BIKO_BUN := SUBSTR((T_BIKO_BUN || '：' || T_BIKO_HANTEI_HITTOSHA),1,120);\r\n                   END IF;\r\n              ELSE\r\n                 IF T_BIKO_FIRST_HITTOSHA != T_BIKO_HANTEI_HITTOSHA AND\r\n                     T_BIKO_HANTEI_HITTOSHA IS NOT NULL THEN\r\n                     T_BIKO_BUN := SUBSTR((T_BIKO_BUN || T_BIKO_HANTEI_HITTOSHA),1,120);\r\n                 END IF;\r\n              END IF;\r\n          END IF;\r\n        END IF;\r\n      END IF;\r\n\r\n      GABSKDRSKSNT(VKUBUN,i_SHORIBI,I_SYSDATE,I_SYSTIME,i_NSHOKUIN,i_NTANMATSU_NO);\r\n      ------------------------------------------------\r\n      -- 改製判定ＴＢＬ更新\r\n      ------------------------------------------------\r\n--2025/07/02 CTC.zhang delete 1.0.010.004:新WizLIFE保守対応 QA17509\r\n--    JIBSOKAISEI(T_KOJIN_NO,1,i_NSHOKUIN,i_NTANMATSU_NO);\r\n--2025/10/14 CTC.liu add start 1.0.022.002:新WizLIFE保守対応 QA21647\r\n     BEGIN\r\n      SELECT IDO.KAISEI_REN,\r\n            IDO.IDO_TODOKE_BI,\r\n            IDO.IDO_JIYU,\r\n            KIHON.RIREKI_RENBAN,\r\n--2026/1/7 CTC.zhang add start 1.0.105.000:新WizLIFE保守対応 QA25517\r\n            NVL(RIREKI.RIREKI_RENBAN,0)\r\n            INTO KAISEI_KAISEI_REN,KAISEI_IDO_TODOKE_BI,KAISEI_IDO_JIYU,KAISEI_RIREKI_RENBAN,RIREKI_RIREKI_RENBAN\r\n        FROM JIBTJUKIIDO IDO,JIBTJUKIKIHON KIHON\r\n--2026/1/7 CTC.zhang add start 1.0.105.000:新WizLIFE保守対応 QA25517\r\n        LEFT JOIN JIBTJUKIRIREKI RIREKI\r\n        ON RIREKI.KOJIN_NO = KIHON.KOJIN_NO\r\n       WHERE IDO.KOJIN_NO = T_KOJIN_NO\r\n         AND IDO.KOJIN_NO = KIHON.KOJIN_NO\r\n--2026/1/7 CTC.zhang add start 1.0.105.000:新WizLIFE保守対応 QA25517\r\n         AND RIREKI.RIREKI_RENBAN = (SELECT MAX(RIREKI_RENBAN) FROM JIBTJUKIRIREKI WHERE KOJIN_NO = T_KOJIN_NO)\r\n         AND RIREKI.SAISHIN_FLG = 1\r\n         AND IDO.IDO_JIYU IN (150,160,280,110,111);\r\n       IF KAISEI_IDO_JIYU IN (150,160,280) THEN\r\n        UPDATE JIBTJUKIIDO\r\n           SET KAISEI_REN=KAISEI_KAISEI_REN+1,\r\n               KAISEI_BI=KAISEI_IDO_TODOKE_BI\r\n         WHERE KOJIN_NO = T_KOJIN_NO;\r\n--2026/1/7 CTC.zhang add start 1.0.105.000:新WizLIFE保守対応 QA25517\r\n--       ELSIF  KAISEI_IDO_JIYU IN (110,111) AND KAISEI_RIREKI_RENBAN <> 10 THEN\r\n       ELSIF  KAISEI_IDO_JIYU IN (110,111) AND KAISEI_RIREKI_RENBAN <> 10 AND RIREKI_RIREKI_RENBAN <> 0 THEN\r\n        UPDATE JIBTJUKIIDO\r\n           SET KAISEI_REN=KAISEI_KAISEI_REN+1,\r\n               KAISEI_BI=KAISEI_IDO_TODOKE_BI\r\n         WHERE KOJIN_NO = T_KOJIN_NO;\r\n--2026/1/7 CTC.zhang add start 1.0.105.000:新WizLIFE保守対応 QA25517\r\n       ELSE\r\n        UPDATE JIBTJUKIIDO\r\n           SET KAISEI_REN=KAISEI_KAISEI_REN,\r\n               KAISEI_BI=KAISEI_IDO_TODOKE_BI\r\n         WHERE KOJIN_NO = T_KOJIN_NO;\r\n       END IF;\r\n     EXCEPTION\r\n       WHEN NO_DATA_FOUND THEN\r\n       KAISEI_KAISEI_REN :=0;\r\n       KAISEI_IDO_TODOKE_BI:=0;\r\n       KAISEI_IDO_JIYU:=0;\r\n       KAISEI_RIREKI_RENBAN:=0;\r\n     END;\r\n--2025/10/14 CTC.liu add end\r\n      GABSKLNKDTPD(T_KOJIN_NO,N_RETN);\r\n      -- 氏名検索(GABTSHIMEIKENSAKU)の作成（同定先・元を考慮）\r\n      GABSKSHMKNSK(T_KOJIN_NO,i_NSHOKUIN,i_NTANMATSU_NO,N_RETN);\r\n      ------------------------------------------------\r\n      -- 対象異動事由の個人番号・履歴連番の一覧を返す\r\n      ------------------------------------------------\r\n      IF WK_IDO_JIYU = CR_IDO.IDO_JIYU THEN\r\n        ------------------------------------------------\r\n        -- 個人番号をカンマ区切りにしてＯＵＴパラメータで返す\r\n        ------------------------------------------------\r\n         NULL;\r\n        ------------------------------------------------\r\n        -- 個人番号をパイプ区切りにして住基ネット異動データ作成に渡す\r\n        ------------------------------------------------\r\n        IF V_KOJIN_NO IS NULL THEN\r\n          V_KOJIN_NO := T_KOJIN_NO;\r\n        ELSE\r\n          V_KOJIN_NO := V_KOJIN_NO || '|' || T_KOJIN_NO;\r\n        END IF;\r\n        ------------------------------------------------\r\n        -- 履歴連番をカンマ区切りにしてＯＵＴパラメータで返す\r\n        ------------------------------------------------\r\n        o_RIREKI_RENBAN := o_RIREKI_RENBAN || R_BUPD_ATENA.RIREKI_RENBAN;\r\n        o_RIREKI_RENBAN := o_RIREKI_RENBAN || ',';\r\n        ------------------------------------------------\r\n        -- 世帯番号をＯＵＴパラメータで返す\r\n        ------------------------------------------------\r\n        o_VSEATI_NO := T_SETAI_NO;\r\n      END IF;\r\n      IF VKOJIN_NO_IDO IS NULL THEN\r\n        VKOJIN_NO_IDO := T_KOJIN_NO;\r\n        -- 個人番号\r\n        o_VKOJIN_NO     := T_KOJIN_NO;\r\n        o_VKOJIN_NO     := o_VKOJIN_NO     || ',';\r\n        -- 履歴連番\r\n        o_RIREKI_RENBAN := R_BUPD_ATENA.RIREKI_RENBAN;\r\n        o_RIREKI_RENBAN := o_RIREKI_RENBAN || ',';\r\n        -- 異動事由\r\n        o_IDO_JIYU      := CR_IDO.IDO_JIYU;\r\n        o_IDO_JIYU      := o_IDO_JIYU      || ',';\r\n      ELSE\r\n        VKOJIN_NO_IDO := VKOJIN_NO_IDO || '|' || T_KOJIN_NO;\r\n        -- 個人番号\r\n        o_VKOJIN_NO     := o_VKOJIN_NO     || T_KOJIN_NO;\r\n        o_VKOJIN_NO     := o_VKOJIN_NO     || ',';\r\n        -- 履歴連番\r\n        o_RIREKI_RENBAN := o_RIREKI_RENBAN || R_BUPD_ATENA.RIREKI_RENBAN;\r\n        o_RIREKI_RENBAN := o_RIREKI_RENBAN || ',';\r\n        -- 異動事由\r\n        o_IDO_JIYU      := o_IDO_JIYU      || CR_IDO.IDO_JIYU;\r\n        o_IDO_JIYU      := o_IDO_JIYU      || ',';\r\n      END IF;\r\n      ------------------------------------------------------------------------------------------------\r\n      -- エントリー管理中間（IES用）より該当する更新対象を取得、異動区分により各々の更新処理を呼び出す。\r\n      ------------------------------------------------------------------------------------------------\r\n      BEGIN\r\n      SELECT  IDO_KBN,\r\n              KEY_JOHO\r\n        INTO  NIDO_KBN,\r\n              VKEY_JOHO\r\n        FROM  JIBWIES_ENTRYKANRI\r\n       WHERE  GYOMUCODE = 'JIB'\r\n         AND  ENTRYID = R_BUPD_JUKIJOHO.ENTRY_ID;\r\n      EXCEPTION\r\n        WHEN OTHERS THEN\r\n          NIDO_KBN := 0;\r\n      END;\r\n      IF NIDO_KBN = 1 THEN\r\n        JIBSOHONUPD(VKEY_JOHO,i_NSHOKUIN,i_NTANMATSU_NO);\r\n      END IF;\r\n      IF NIDO_KBN = 2 THEN\r\n        JIBSOKISAIUPD(VKEY_JOHO,i_NSHOKUIN,i_NTANMATSU_NO);\r\n      END IF;\r\n--2023/06/27 ZCZL.WANGM ADD Start 0.2.000.001:住記系追加作業\r\n      --転出届情報更新処理の呼び出しを追加\r\n--    IF NREPORTCODE2 IN ('219' ,'210') THEN  --2025/07/07 Del\r\n      IF NREPORTCODE2 IN ('21009' ,'21000') THEN  --2025/07/07 Add\r\n        JIBSKTENOUTU(VKEY_JOHO,i_NSHOKUIN,i_NTANMATSU_NO,NSHORIKEKKA);\r\n      END IF;\r\n--2023/06/27 ZCZL.WANGM ADD End\r\n    END IF;\r\n    -- 世帯番号退避\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--    IF CR_IDO.IDO_JIYU = 11 OR\r\n--       CR_IDO.IDO_JIYU = 33 OR\r\n--       CR_IDO.IDO_JIYU = 34 OR\r\n--       CR_IDO.IDO_JIYU = 35 OR\r\n--       CR_IDO.IDO_JIYU = 37 THEN\r\n    IF CR_IDO.IDO_JIYU = 110 OR\r\n--2024/02/25 DIS.Qianyinhua Add 0.3.000.000:新WizLIFE２次開発（異動事由コードの一括対応）\r\n       CR_IDO.IDO_JIYU = 111 OR\r\n       CR_IDO.IDO_JIYU = 330 OR\r\n       CR_IDO.IDO_JIYU = 340 OR\r\n       CR_IDO.IDO_JIYU = 350 OR\r\n       CR_IDO.IDO_JIYU = 370 THEN\r\n--2024/01/25 DIS.liuqimeng Update end\r\n      I_IDOSAKI := T_SETAI_NO;\r\n    ELSE\r\n      IF I_JIYU_FLG = 0 THEN\r\n        I_IDOMOTO := T_SETAI_NO;\r\n      END IF;\r\n    END IF;\r\n    -- 転出証明情報の更新\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--    IF i_IDO_JIYU = 11 AND i_FUKI_FLG = 1 THEN\r\n--2024/02/25 DIS.Qianyinhua Update 0.3.000.000:新WizLIFE２次開発（異動事由コードの一括対応）\r\n--    IF i_IDO_JIYU = 110 AND i_FUKI_FLG = 1 THEN\r\n    IF i_IDO_JIYU IN (110,111) AND i_FUKI_FLG = 1 THEN\r\n      -- 転出証明情報個人データ取得\r\n      FOR CR_TENSHUTSUKOJIN IN C_TENSHUTSUKOJIN(T_JUMIN_CD) LOOP\r\n        -- 転出証明個人処理済フラグを更新\r\n        UPDATE JIBTJNTENSHUTSUKOJIN\r\n           SET SHORIZUMI_FLAG = 1\r\n         WHERE LPAD(TRIM(JUMINHYO_CD),11,'0') = LPAD(TO_NCHAR(T_JUMIN_CD),11,'0');\r\n        -- 転出証明情報共通データ取得\r\n        FOR CR_TENSHUTSUKOJIN2 IN C_TENSHUTSUKOJIN2(CR_TENSHUTSUKOJIN.TENSHUTUCHI_JICHI_CD,\r\n                                                    CR_TENSHUTSUKOJIN.SAKUSEI_NENGAPPI,\r\n                                                    CR_TENSHUTSUKOJIN.SAKUSEI_RENBAN) LOOP\r\n          IF CR_TENSHUTSUKOJIN2.SHORIZUMI_FLAG != 1 THEN\r\n            B_SHORI_FLG := FALSE;\r\n          END IF;\r\n        END LOOP;\r\n        -- 転出証明共通処理済フラグを更新\r\n        IF B_SHORI_FLG = TRUE THEN\r\n          UPDATE JIBTJNTENSHUTSUKYOTU\r\n             SET SHORIZUMI_FLAG = 1\r\n           WHERE TENSHUTUCHI_JICHI_CD = CR_TENSHUTSUKOJIN.TENSHUTUCHI_JICHI_CD\r\n             AND SAKUSEI_NENGAPPI     = CR_TENSHUTSUKOJIN.SAKUSEI_NENGAPPI\r\n             AND SAKUSEI_RENBAN       = CR_TENSHUTSUKOJIN.SAKUSEI_RENBAN;\r\n        END IF;\r\n        -- フラグリセット\r\n        B_SHORI_FLG := TRUE;\r\n      END LOOP;\r\n    END IF;\r\n    --転居予定連絡情報個人の更新  --2025/02/14 Add S\r\n    IF i_IDO_JIYU IN (310,320,330,340) THEN\r\n      UPDATE JIBTTENKYOYOTEIKOJIN\r\n         SET SHORIZUMI_FLAG      = 1\r\n            ,SYS_KOSHINBI        = TO_NUMBER(TO_CHAR(SYSDATE, 'YYYYMMDD'))\r\n            ,SYS_JIKAN           = TO_NUMBER(TO_CHAR(SYSDATE, 'HH24MISS'))\r\n            ,SYS_SHOKUINKOJIN_NO = i_NSHOKUIN\r\n            ,SYS_TANMATSU_NO     = i_NTANMATSU_NO\r\n       WHERE KOJIN_NO = T_KOJIN_NO\r\n         AND SHORIZUMI_FLAG = 0;\r\n    END IF;  --2025/02/14 Add E\r\n    ---------------------------------------\r\n    --備考文が蓄積されていた場合\r\n    ---------------------------------------\r\n    IF T_BIKO_BUN IS NOT NULL THEN\r\n       -- 対象者全員の備考文を更新\r\n       UPDATE JIBTIDORUIKEI\r\n          SET BIKO_BUN = T_BIKO_BUN\r\n        WHERE SHORIBI_KEY         = I_SYSDATE\r\n          AND SHORI_JIKAN_KEY     = I_SYSTIME\r\n          AND SHORI_KBN_KEY       = CR_IDO.SHORI_KBN_KEY\r\n          AND ZENBU_ICHIBU_KEY    = CR_IDO.ZENBU_ICHIBU_KEY\r\n          AND TRIM(SHOKUINKOJIN_NO_KEY) = TRIM(i_NSHOKUIN)\r\n          AND KOJIN_NO IN (SELECT KOJIN_NO\r\n                             FROM JIBTJUKIIDO\r\n                            WHERE SETAI_NO = T_BIKO_BUN_KEY);\r\n    END IF;\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--    IF NJOKEN4 = 3 AND i_IDO_JIYU IN (15,16) THEN\r\n    IF NJOKEN4 = 3 AND i_IDO_JIYU IN (150,160) THEN\r\n       /*\r\n       EBPPKOSEKINEWXEROXTEXT(T_KOJIN_NO,\r\n                              WK_RIREKI_RENBAN,\r\n                              T_SETAI_NO,\r\n                              CR_IDO.IDO_JIYU,\r\n                              CR_IDO.IDO_BI,\r\n                              CR_IDO.IDO_TODOKE_BI,\r\n                              i_SHORIBI,\r\n                             o_RETURNCD);\r\n       */\r\n       NULL;\r\n      END IF;\r\n\r\n    --異動事由＝52（記載順位訂正）の場合は行わない。\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--    IF CR_IDO.IDO_JIYU <> 52 THEN\r\n    IF CR_IDO.IDO_JIYU <> 520 THEN\r\n      --世帯員すべての宛名番号と異動事由を格納\r\n      IF NSETAINO IS NULL THEN\r\n        NSETAINO     := T_SETAI_NO;\r\n        VIDOUKOJINNO := T_KOJIN_NO;\r\n        VIDOJIYU     := CR_IDO.IDO_JIYU;\r\n      ELSIF NSETAINO = T_SETAI_NO AND TO_NUMBER(VIDOJIYU) = CR_IDO.IDO_JIYU THEN\r\n        VIDOUKOJINNO := VIDOUKOJINNO || ',' || T_KOJIN_NO;\r\n      ELSIF NSETAINO <> T_SETAI_NO OR TO_NUMBER(VIDOJIYU) <> CR_IDO.IDO_JIYU THEN\r\n      --世帯ごとにカード送付先データ作成処理の引数を格納\r\n        IINDEX                := IINDEX + 1;\r\n        MNSETAINO(IINDEX)     := NSETAINO;\r\n        MVIDOJIYU(IINDEX)     := VIDOJIYU;\r\n        MVIDOUKOJINNO(IINDEX) := VIDOUKOJINNO;\r\n        NSETAINO              := T_SETAI_NO;\r\n        VIDOUKOJINNO          := T_KOJIN_NO;\r\n        VIDOJIYU              := CR_IDO.IDO_JIYU;\r\n      END IF;\r\n    END IF;\r\n\r\n--2025/05/09 DIS.LIJING Add start 1.0.003.000:保守QA #14884対応\r\n    --異動事由が210:国内転出、211:国外転出の場合\r\n    IF CR_IDO.IDO_JIYU IN (210,211) THEN\r\n      --支援措置申出者管理_申出者情報更新\r\n      UPDATE GACTKANRI_MOUSHIDE\r\n         SET RIREKI_RENBAN = RIREKI_RENBAN + 10\r\n            ,SHIENSOCHISHURYOBI = KKAPK0020.FDATECAL(CR_IDO.IDO_BI,0,-1,0,0) --異動日の１日前\r\n            ,KARISHIENSOCHIUMU = 1 --「仮支援措置のみ」\r\n            ,KARISHIENSOCHIKAISHIBI = CR_IDO.IDO_BI\r\n            ,KARISHIENSOCHISHURYOBI = 99999999\r\n            ,SYS_KOSHINBI = CR_IDO.SYS_SAKUSEIBI\r\n            ,SYS_JIKAN = CR_IDO.SYS_JIKAN\r\n            ,SYS_SHOKUINKOJIN_NO = CR_IDO.SYS_SHOKUINKOJIN_NO\r\n            ,SYS_TANMATSU_NO = CR_IDO.SYS_TANMATSU_NO\r\n       WHERE ((KOJIN_NO = CR_IDO.KOJIN_NO\r\n               AND TAISHOSHAKBN = 0)\r\n             OR (TAISHO_ATENA_NO = CR_IDO.KOJIN_NO\r\n               AND TAISHOSHAKBN = 1))\r\n           AND NVL(SHIENSOCHIKAIJOBI, 0) = 0\r\n           AND NVL(KARISHIENSOCHIUMU, 0) IN(0, 2);  --0:支援措置のみ  2:両方\r\n       --上記更新対象レコードがある場合\r\n       IF SQL%ROWCOUNT > 0 THEN\r\n         SELECT COUNT(*)\r\n           INTO NCOUNT\r\n           FROM GACTIDOHAKKOYOKUSHIKANRI\r\n          WHERE KOJIN_NO = CR_IDO.KOJIN_NO\r\n            AND SYSTEM_TYP = 10\r\n            AND TOROKU_GYOMU = 'JIB'\r\n            AND YOKUSHIKBN = 1 --支援措置\r\n            AND NVL(YOKUSHISHURYOKBN, 0) <> 3\r\n            AND YOKUSHIJIYU = '01';\r\n\r\n         IF NCOUNT > 0 THEN\r\n            --仮支援措置のレコード作成\r\n            INSERT INTO GACTIDOHAKKOYOKUSHIKANRI\r\n                 SELECT KOJIN_NO\r\n                       ,SYSTEM_TYP\r\n                       ,TOROKU_GYOMU\r\n                       ,RIREKI_RENBAN + 10\r\n                       ,2\r\n                       ,0\r\n                       ,YOKUSHIJIYU\r\n                       ,KOJINSETAIKBN\r\n                       ,TAISHOSHAKBN\r\n                       ,IDOYOKUSHIUMU\r\n                       ,IDOYOKUSHI_GAITO_KBN\r\n                       ,CR_IDO.IDO_BI\r\n                       ,99999999\r\n                       ,RIREKI_RENBAN + 10 AS IDOYOKUSHI_RIREKI_BANGO\r\n                       ,HAKKOYOKUSHIUMU\r\n                       ,HAKKOYOKUSHI_GAITO_KBN\r\n                       ,CR_IDO.IDO_BI\r\n                       ,99999999\r\n                       ,RIREKI_RENBAN + 10 AS HAKKOYOKUSHI_RIREKI_BANGO\r\n                       ,SHOKAIYOKUSHIUMU\r\n                       ,SHOKAIYOKUSHI_GAITO_KBN\r\n                       ,CR_IDO.IDO_BI\r\n                       ,99999999\r\n                       ,RIREKI_RENBAN + 10 AS SHOKAIYOKUSHI_RIREKI_BANGO\r\n                       ,SHORICHUI_KBN\r\n                       ,SYS_SAKUSEIBI\r\n                       ,CR_IDO.SYS_SAKUSEIBI\r\n                       ,CR_IDO.SYS_JIKAN\r\n                       ,CR_IDO.SYS_SHOKUINKOJIN_NO\r\n                       ,CR_IDO.SYS_TANMATSU_NO\r\n-- 2025/06/19 CTC.li add start 1.0.009.002:新WizLIFE２次開発 QA13759対応\r\n                       ,NULL\r\n-- 2025/06/19 CTC.li add end\r\n                  FROM GACTIDOHAKKOYOKUSHIKANRI\r\n                 WHERE KOJIN_NO = CR_IDO.KOJIN_NO\r\n                   AND SYSTEM_TYP = 10\r\n                   AND TOROKU_GYOMU = 'JIB'\r\n                   AND YOKUSHIKBN = 1 --支援措置\r\n                   AND NVL(YOKUSHISHURYOKBN, 0) <> 3\r\n                   AND YOKUSHIJIYU = '01'\r\n                   AND ROWNUM = 1\r\n              ORDER BY RIREKI_RENBAN DESC;\r\n           --支援措置のレコードを抑止終了に更新\r\n           UPDATE GACTIDOHAKKOYOKUSHIKANRI\r\n              SET YOKUSHISHURYOKBN = 3\r\n                 ,IDOYOKUSHISHURYOBI = KKAPK0020.FDATECAL(CR_IDO.IDO_BI,0,-1,0,0) --異動日の１日前\r\n                 ,HAKKOYOKUSHISHURYOBI = KKAPK0020.FDATECAL(CR_IDO.IDO_BI,0,-1,0,0) --異動日の１日前\r\n                 ,SHOKAIYOKUSHISHURYOBI = KKAPK0020.FDATECAL(CR_IDO.IDO_BI,0,-1,0,0) --異動日の１日前\r\n                 ,SYS_KOSHINBI = CR_IDO.SYS_SAKUSEIBI\r\n                 ,SYS_JIKAN = CR_IDO.SYS_JIKAN\r\n                 ,SYS_SHOKUINKOJIN_NO = CR_IDO.SYS_SHOKUINKOJIN_NO\r\n                 ,SYS_TANMATSU_NO = CR_IDO.SYS_TANMATSU_NO\r\n            WHERE KOJIN_NO = CR_IDO.KOJIN_NO\r\n              AND SYSTEM_TYP = 10\r\n              AND TOROKU_GYOMU = 'JIB'\r\n              AND YOKUSHIKBN = 1 --支援措置\r\n              AND NVL(YOKUSHISHURYOKBN, 0) <> 3\r\n              AND YOKUSHIJIYU = '01';\r\n         END IF;\r\n         --上記更新対象レコードがある場合\r\n         IF SQL%ROWCOUNT > 0 THEN\r\n            --GACFKGACTKANRI_支援措置申出者管理更新を実行する\r\n            N_RETN := GACFKGACTKANRI(CR_IDO.KOJIN_NO, 10);\r\n         END IF;\r\n       END IF;\r\n    END IF;\r\n--2025/01/09 DIS.LIJING Add end\r\n--2025/07/14 CTC.zhang update start 1.0.010.006:新WizLIFE保守対応 QA17556\r\n    FOR CR_JIBWBUPD_BIKO IN CUR_JIBWBUPD_BIKO(CR_IDO.KOJIN_NO)  LOOP\r\n      INSERT INTO JIBTJUKIBIKO VALUES(\r\n      T_KOJIN_NO      --宛名番号\r\n--2025/10/08 CTC.liu update start 1.0.021.001:新WizLIFE保守対応 QA21666\r\n      --,CR_JIBWBUPD_BIKO.RIREKI_RENBAN --履歴連番\r\n      ,(CASE WHEN CR_JIBWBUPD_BIKO.IDO_JIYU IN (150,160,280,191) AND NJOKEN111 = 1 THEN\r\n              CR_JIBWBUPD_BIKO.RIREKI_RENBAN+10\r\n             WHEN CR_JIBWBUPD_BIKO.IDO_JIYU IN (150,160,280,191) AND NJOKEN111 = 0 THEN\r\n              10\r\n         ELSE\r\n              CR_JIBWBUPD_BIKO.RIREKI_RENBAN--履歴枝番\r\n       END)\r\n--2025/10/08 CTC.liu update end\r\n      --,1 --履歴枝番\r\n      ,(CASE WHEN CR_JIBWBUPD_BIKO.IDO_JIYU =412 THEN\r\n              CR_JIBWBUPD_BIKO.RIREKI_EDABAN+1\r\n         ELSE\r\n              1 --履歴枝番\r\n       END)\r\n      ,CR_JIBWBUPD_BIKO.SAISHIN_FLG    --最新フラグ\r\n      ,CR_JIBWBUPD_BIKO.SEQ           --連番\r\n      ,CR_JIBWBUPD_BIKO.BIKO          --備考内容\r\n      ,CR_JIBWBUPD_BIKO.GOKIFLG       --誤記フラグ\r\n      ,CR_JIBWBUPD_BIKO.HISSUKBN      --必須区分\r\n      ,CR_JIBWBUPD_BIKO.KISAIJUN      --記載順\r\n      ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SHIMEI        --誤記修正後の氏名\r\n      ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SHIMEI_KANA   --誤記修正後の氏名のフリガナ\r\n      ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SEINENGAPI    --誤記修正後の生年月日\r\n      ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SEINENGAPI_FUSHO_K --誤記修正後の生年月日不詳区分\r\n      ,i_SHORIBI                       --作成日\r\n      ,i_SHORIBI                       --更新日\r\n      ,I_SYSTIME2                      --更新時間\r\n      ,i_NSHOKUIN                      --更新職員宛名番号\r\n      ,i_NTANMATSU_NO                  --更新端末番号\r\n      );\r\n    END LOOP;\r\n--2025/07/14 CTC.zhang update end\r\n  END LOOP;\r\n\r\n  --転居予定連絡情報共通の更新  --2025/02/14 Add S\r\n  IF i_IDO_JIYU IN (310,320,330,340) THEN\r\n      UPDATE JIBTTENKYOYOTEIKYOTU\r\n         SET SHORIZUMI_FLAG      = 1\r\n            ,SYS_KOSHINBI        = TO_NUMBER(TO_CHAR(SYSDATE, 'YYYYMMDD'))\r\n            ,SYS_JIKAN           = TO_NUMBER(TO_CHAR(SYSDATE, 'HH24MISS'))\r\n            ,SYS_SHOKUINKOJIN_NO = i_NSHOKUIN\r\n            ,SYS_TANMATSU_NO     = i_NTANMATSU_NO\r\n       WHERE SETAI_NO = I_IDOMOTO\r\n         --未処理の転居予定連絡情報個人が存在しない\r\n         AND NOT EXISTS(SELECT 1\r\n                          FROM JIBTTENKYOYOTEIKYOTU A, JIBTTENKYOYOTEIKOJIN B\r\n                         WHERE A.SETAI_NO = I_IDOMOTO\r\n                           AND A.SAKUSEI_NENGAPPI = B.SAKUSEI_NENGAPPI\r\n                           AND A.SAKUSEI_RENBAN = B.SAKUSEI_RENBAN\r\n                           AND B.SHORIZUMI_FLAG = 0);\r\n    END IF;  --2025/02/14 Add E\r\n\r\n--2025/07/14 CTC.zhang update start 1.0.010.006:新WizLIFE保守対応 QA17556\r\n/*\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n  FOR CR_JIBWBUPD_BIKO IN CUR_JIBWBUPD_BIKO LOOP\r\n    INSERT INTO JIBTJUKIBIKO VALUES(\r\n--2024/12/11 DIS.huangyy Update 0.3.000.000:IT_JIB_00737\r\n--    CR_JIBWBUPD_BIKO.KOJIN_NO      --宛名番号\r\n    T_KOJIN_NO      --宛名番号\r\n--2024/12/6 CTC Update start 0.3.000.000:IT_JIB_00645対応\r\n    --,CR_JIBWBUPD_BIKO.RIREKI_RENBAN + 1 --履歴連番\r\n    ,CR_JIBWBUPD_BIKO.RIREKI_RENBAN --履歴連番\r\n    --,1 --履歴枝番\r\n    ,(CASE WHEN CR_JIBWBUPD_BIKO.IDO_JIYU =412 THEN\r\n            CR_JIBWBUPD_BIKO.RIREKI_EDABAN+1\r\n       ELSE\r\n            1 --履歴枝番\r\n     END)\r\n--2024/12/6 CTC Update end\r\n--2024/08/15 DIS.liuqimeng Add 0.3.000.000:IT_JIB_00231\r\n    ,CR_JIBWBUPD_BIKO.SAISHIN_FLG    --最新フラグ\r\n    ,CR_JIBWBUPD_BIKO.SEQ           --連番\r\n    ,CR_JIBWBUPD_BIKO.BIKO          --備考内容\r\n    ,CR_JIBWBUPD_BIKO.GOKIFLG       --誤記フラグ\r\n    ,CR_JIBWBUPD_BIKO.HISSUKBN      --必須区分\r\n    ,CR_JIBWBUPD_BIKO.KISAIJUN      --記載順\r\n--2024/08/15 DIS.liuqimeng Add start 0.3.000.000:IT_JIB_00231\r\n    ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SHIMEI        --誤記修正後の氏名\r\n    ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SHIMEI_KANA   --誤記修正後の氏名のフリガナ\r\n    ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SEINENGAPI    --誤記修正後の生年月日\r\n    ,CR_JIBWBUPD_BIKO.GOKI_SHUSEI_SEINENGAPI_FUSHO_K --誤記修正後の生年月日不詳区分\r\n--2024/08/15 DIS.liuqimeng Add end\r\n    ,i_SHORIBI                       --作成日\r\n    ,i_SHORIBI                       --更新日\r\n    ,I_SYSTIME2                      --更新時間\r\n    ,i_NSHOKUIN                      --更新職員宛名番号\r\n    ,i_NTANMATSU_NO                  --更新端末番号\r\n--2024/08/15 DIS.liuqimeng Delete 0.3.000.000:IT_JIB_00231\r\n--    ,CR_JIBWBUPD_BIKO.SAISHIN_FLG    --最新フラグ\r\n    );\r\n  END LOOP;\r\n*/\r\n--2025/07/14 CTC.zhang update end\r\n  FOR CR_JIBTJUKIBIKO IN CUR_JIBTJUKIBIKO LOOP\r\n    INSERT INTO JIBWIDORUISEKI_BIKO VALUES(\r\n      'B'\r\n      ,CR_JIBTJUKIBIKO.KOJIN_NO      --宛名番号\r\n      ,CR_JIBTJUKIBIKO.RIREKI_RENBAN --履歴連番\r\n      ,CR_JIBTJUKIBIKO.RIREKI_EDABAN --履歴枝番\r\n      ,CR_JIBTJUKIBIKO.SAISHIN_FLG   --最新フラグ\r\n      ,CR_JIBTJUKIBIKO.SEQ           --連番\r\n      ,CR_JIBTJUKIBIKO.BIKO          --備考内容\r\n      ,CR_JIBTJUKIBIKO.GOKIFLG       --誤記フラグ\r\n      ,CR_JIBTJUKIBIKO.HISSUKBN      --必須区分\r\n      ,CR_JIBTJUKIBIKO.KISAIJUN      --記載順\r\n      ,i_SHORIBI                       --引数.処理日\r\n      ,I_SYSTIME2                      --システム時間\r\n      ,i_NSHOKUIN                      --引数.職員番号\r\n--2024/08/15 DIS.liuqimeng Add start 0.3.000.000:IT_JIB_00231\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SHIMEI      --誤記修正後の氏名\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SHIMEI_KANA --誤記修正後の氏名のフリガナ\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SEINENGAPI  --誤記修正後の生年月日\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SEINENGAPI_FUSHO_K --誤記修正後の生年月日不詳区分\r\n--2024/08/15 DIS.liuqimeng Add end\r\n      ,i_SHORIBI                       --作成日\r\n      ,i_SHORIBI                       --更新日\r\n      ,I_SYSTIME2                      --更新時間\r\n      ,i_NSHOKUIN                      --更新職員宛名番号\r\n      ,i_NTANMATSU_NO                  --更新端末番号\r\n     );\r\n\r\n    INSERT INTO JIBWIDORUISEKI_BIKO VALUES(\r\n      'A'\r\n      ,CR_JIBTJUKIBIKO.KOJIN_NO      --宛名番号\r\n      ,CR_JIBTJUKIBIKO.RIREKI_RENBAN --履歴連番\r\n      ,CR_JIBTJUKIBIKO.RIREKI_EDABAN --履歴枝番\r\n      ,CR_JIBTJUKIBIKO.SAISHIN_FLG   --最新フラグ\r\n      ,CR_JIBTJUKIBIKO.SEQ           --連番\r\n      ,CR_JIBTJUKIBIKO.BIKO          --備考内容\r\n      ,CR_JIBTJUKIBIKO.GOKIFLG       --誤記フラグ\r\n      ,CR_JIBTJUKIBIKO.HISSUKBN      --必須区分\r\n      ,CR_JIBTJUKIBIKO.KISAIJUN      --記載順\r\n      ,i_SHORIBI                       --引数.処理日\r\n      ,I_SYSTIME2                      --システム時間\r\n      ,i_NSHOKUIN                      --引数.職員番号\r\n--2024/08/15 DIS.liuqimeng Add start 0.3.000.000:IT_JIB_00231\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SHIMEI      --誤記修正後の氏名\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SHIMEI_KANA --誤記修正後の氏名のフリガナ\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SEINENGAPI  --誤記修正後の生年月日\r\n      ,CR_JIBTJUKIBIKO.GOKI_SHUSEI_SEINENGAPI_FUSHO_K --誤記修正後の生年月日不詳区分\r\n--2024/08/15 DIS.liuqimeng Add end\r\n      ,i_SHORIBI                       --作成日\r\n      ,i_SHORIBI                       --更新日\r\n      ,I_SYSTIME2                      --更新時間\r\n      ,i_NSHOKUIN                      --更新職員宛名番号\r\n      ,i_NTANMATSU_NO                  --更新端末番号\r\n    );\r\n  END LOOP;\r\n--2024/01/25 DIS.liuqimeng Add end\r\n\r\n  IF NSETAINO IS NOT NULL THEN\r\n    --世帯ごとにカード送付先データ作成処理の引数を格納\r\n    IINDEX                := IINDEX + 1;\r\n    MNSETAINO(IINDEX)     := NSETAINO;\r\n    MVIDOJIYU(IINDEX)     := VIDOJIYU;\r\n    MVIDOUKOJINNO(IINDEX) := VIDOUKOJINNO;\r\n  --カード送付先データ作成処理を世帯ごとに呼び出す\r\n    FOR I IN 1..IINDEX LOOP\r\n--2023/11/20 DIS.Xiyan Update 0.3.000.000:住基ネット1次開発\r\n--      JIBSKCARDSOFU(NYOBIDASHI_KBN,\r\n      JIBSKCARDSOFJ(NYOBIDASHI_KBN,\r\n                              MNSETAINO(I),\r\n                              MVIDOUKOJINNO(I),\r\n                              MVIDOJIYU(I),\r\n                              i_NSHOKUIN,\r\n                              i_NTANMATSU_NO);\r\n    END LOOP;\r\n  END IF;\r\n\r\n  DELETE\r\n    FROM JIBWBUPD_JUKIKIHON\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n  DELETE\r\n    FROM JIBWBUPD_JUKIIDO\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n  DELETE\r\n    FROM JIBWBUPD_JUKIJUSHO\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n  DELETE\r\n    FROM JIBWBUPD_TSUSHORIREKI\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n  DELETE\r\n    FROM JIBWBUPD_BIKO\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n--2024/01/25 DIS.liuqimeng Add end\r\n  COMMIT;\r\n\r\n  DELETE\r\n    FROM JIBWBUPD_JUKIKIHON\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n  DELETE\r\n    FROM JIBWIES_JUKIIDO\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n  DELETE\r\n    FROM JIBWIES_JUKIJUSHO\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n  DELETE\r\n    FROM JIBWIES_TSUSHORIREKI\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n--2024/01/25 DIS.liuqimeng Add start 0.3.000.000:新WizLIFE２次開発\r\n  DELETE\r\n    FROM JIBWIES_BIKO\r\n   WHERE ENTRY_ID = i_IENTRY_ID;\r\n--2024/01/25 DIS.liuqimeng Add end\r\n  COMMIT;\r\n\r\n  ------------------------------------------------\r\n  -- 住基ネット異動データ作成\r\n  ------------------------------------------------\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--  IF NKADO_BI5 <= I_SYSDATE AND NJOKEN111 = 0 AND WK_IDO_JIYU IN (15,16,28) THEN\r\n--2025/5/14 CTC.liu update start 1.0.009.000:新WizLIFE２次開発 QA13667対応\r\n--IF NKADO_BI5 <= I_SYSDATE AND NJOKEN111 = 0 AND WK_IDO_JIYU IN (150,160,280) THEN\r\n  IF NKADO_BI5 <= I_SYSDATE AND NJOKEN111 = 0 AND WK_IDO_JIYU IN (150,160,280,191) THEN\r\n      V_KOJIN_NO := J_KOJIN_NO || '|' || V_KOJIN_NO;\r\n\r\n  END IF;\r\n--2023/06/27 ZCZL.WANGM ADD Start 0.2.000.001:住記系追加作業\r\n  BEGIN\r\n    SELECT REPORTCODE2\r\n      INTO NREPORTCODE2\r\n      FROM KKFTENTRYLIST\r\n     WHERE GYOMUCODE = 'JIB'\r\n       AND ENTRYID = i_IENTRY_ID;\r\n  EXCEPTION\r\n    WHEN OTHERS THEN\r\n      NREPORTCODE2 := 0;\r\n  END;\r\n--2023/06/27 ZCZL.WANGM ADD End\r\n--2023/06/27 ZCZL.WANGM Update Start 0.2.000.001:住記系追加作業\r\n--  JIBSOIDODATAK(i_SHORIBI,                      -- 処理日\r\n--                       i_ZENBUICHIBU,                  -- 全部一部\r\n--                       WK_IDO_JIYU,                    -- 異動事由\r\n--                       I_IDOMOTO,                      -- 異動元世帯番号\r\n--                       I_IDOSAKI,                      -- 異動先世帯番号\r\n--                       V_KOJIN_NO,                     -- 個人番号\r\n--                       i_FUKI_FLG,                     -- 付記フラグ\r\n--                       i_KEIBI_FLG,                    -- 軽微な修正フラグ\r\n--                       NSHORI_NO\r\n--                      );\r\n--2023/11/16 DIS.Xiyan Update 0.3.000.000:住基ネット1次開発\r\n--   JIBSOIDODATAK(i_SHORIBI,                             -- 処理日\r\n  JIBSOCRTIDDTJ(i_SHORIBI,                             -- 処理日\r\n                       i_ZENBUICHIBU,                  -- 全部一部\r\n                       WK_IDO_JIYU,                    -- 異動事由\r\n                       I_IDOMOTO,                      -- 異動元世帯番号\r\n                       I_IDOSAKI,                      -- 異動先世帯番号\r\n                       V_KOJIN_NO,                     -- 個人番号\r\n                       i_FUKI_FLG,                     -- 付記フラグ\r\n                       i_KEIBI_FLG,                    -- 軽微な修正フラグ\r\n--2023/11/20 DIS.Xiyan Update start 0.3.000.000:住基ネット1次開発\r\n--                        NSHORI_NO,\r\n--                        NREPORTCODE2\r\n                       0,                      -- 住居地フラグ\r\n                       '',                     -- 異動事由詳細\r\n                       0,                      -- 住所変更フラグ\r\n                       T_RENBAN               -- 住所連番\r\n--2023/11/20 DIS.Xiyan Update end\r\n                      );\r\n--2023/06/27 ZCZL.WANGM Update End\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--  IF WK_IDO_JIYU IN(11, 12, 13, 56, 57, 58, 14, 17, 18) AND i_SHORIBI >= NKADO_BI7 THEN\r\n--2024/02/25 DIS.Qianyinhua Update 0.3.000.000:新WizLIFE２次開発（異動事由コードの一括対応）\r\n--  IF WK_IDO_JIYU IN(110, 120, 130, 560, 570, 580, 140, 170, 180) AND i_SHORIBI >= NKADO_BI7 THEN\r\n--2024/12/20 JIP.Yoshida delete start:IT_JIB_00809対応\r\n--  IF WK_IDO_JIYU IN (110, 111, 120, 130, 560, 570, 580, 140, 170, 180) AND i_SHORIBI >= NKADO_BI7 THEN\r\n--    JIBSOIDODATAM(i_SHORIBI, V_KOJIN_NO, i_NSHOKUIN, i_NTANMATSU_NO, NSHORI_NO, RTN_CD);\r\n--  END IF;\r\n--2024/12/20 JIP.Yoshida delete end\r\n\r\n  IF NJOKEN2 = 0 AND NKADO_BI5 <= I_SYSDATE THEN\r\n     IF NVL(I_IDOSAKI,0) > 0 THEN\r\n        T_SETAI_NO := I_IDOSAKI;\r\n\r\n     END IF;\r\n     BEGIN\r\n         FOR CR_HOMUSHO IN C_HOMUSHO(T_SETAI_NO,I_SYSDATE,I_SYSTIME) LOOP\r\n           WK_JUSHO_CHG := 0;\r\n\r\n--2024/01/25 DIS.liuqimeng Update 0.3.000.000:新WizLIFE２次開発\r\n--           IF CR_HOMUSHO.JINKAKU_KBN = 1 AND CR_HOMUSHO.IDO_JIYU = 41 THEN\r\n           IF CR_HOMUSHO.JINKAKU_KBN = 1 AND CR_HOMUSHO.IDO_JIYU IN (410,412) THEN\r\n             BEGIN\r\n                SELECT JIBTJUKIJUSHO.CHOMEI,\r\n                       JIBTJUKIJUSHO.BANCHI,\r\n                       JIBTJUKIJUSHO.KATAGAKI\r\n                  INTO VACHOMEI,\r\n                       VABANCHI,\r\n                       VAKATAGAKI\r\n                  FROM JIBTJUKIIDO,\r\n                       JIBTJUKIJUSHO\r\n                 WHERE JIBTJUKIIDO.KOJIN_NO = CR_HOMUSHO.KOJIN_NO\r\n                   AND JIBTJUKIIDO.KOJIN_NO = JIBTJUKIJUSHO.KOJIN_NO\r\n                   AND JIBTJUKIIDO.GENJUSHO_REN = JIBTJUKIJUSHO.JUSHO_REN;\r\n\r\n             EXCEPTION\r\n                WHEN OTHERS THEN\r\n                    VACHOMEI  := NULL;\r\n                    VABANCHI  := NULL;\r\n                    VAKATAGAKI:= NULL;\r\n             END;\r\n\r\n             BEGIN\r\n                SELECT JIBTJUKIJUSHO.CHOMEI,\r\n                       JIBTJUKIJUSHO.BANCHI,\r\n                       JIBTJUKIJUSHO.KATAGAKI\r\n                  INTO VBCHOMEI,\r\n                       VBBANCHI,\r\n                       VBKATAGAKI\r\n                  FROM JIBTJUKIRIREKI,\r\n                       JIBTJUKIJUSHO\r\n                 WHERE JIBTJUKIRIREKI.KOJIN_NO = CR_HOMUSHO.KOJIN_NO\r\n                   AND JIBTJUKIRIREKI.RIREKI_RENBAN = (SELECT MAX(RIREKI_RENBAN)\r\n                                                          FROM JIBTJUKIRIREKI\r\n                                                         WHERE KOJIN_NO = CR_HOMUSHO.KOJIN_NO\r\n                                                      GROUP BY KOJIN_NO)\r\n                   AND JIBTJUKIRIREKI.KOJIN_NO = JIBTJUKIJUSHO.KOJIN_NO\r\n--2024/02/22 DIS.Qianyinhua Add 0.3.000.000:新WizLIFE２次開発（最新フラグ＝１追加確認）\r\n                   AND JIBTJUKIRIREKI.SAISHIN_FLG = 1\r\n                   AND JIBTJUKIRIREKI.GENJUSHO_REN = JIBTJUKIJUSHO.JUSHO_REN;\r\n\r\n             EXCEPTION\r\n                WHEN OTHERS THEN\r\n                    VBCHOMEI  := NULL;\r\n                    VBBANCHI  := NULL;\r\n                    VBKATAGAKI:= NULL;\r\n             END;\r\n\r\n             IF (VACHOMEI IS NOT NULL AND VBCHOMEI IS NOT NULL AND VACHOMEI <> VBCHOMEI) OR\r\n                (VACHOMEI IS NOT NULL AND VBCHOMEI IS NULL) OR\r\n                (VACHOMEI IS NULL AND VBCHOMEI IS NOT NULL) OR\r\n                (VABANCHI IS NOT NULL AND VBBANCHI IS NOT NULL AND VABANCHI <> VBBANCHI) OR\r\n                (VABANCHI IS NOT NULL AND VBBANCHI IS NULL) OR\r\n                (VABANCHI IS NULL AND VBBANCHI IS NOT NULL) OR\r\n                (VAKATAGAKI IS NOT NULL AND VBKATAGAKI IS NULL) OR\r\n                (VAKATAGAKI IS NULL AND VBKATAGAKI IS NOT NULL) OR\r\n                (VAKATAGAKI IS NOT NULL AND VBKATAGAKI IS NOT NULL AND VAKATAGAKI <> VBKATAGAKI) THEN\r\n                    WK_JUSHO_CHG := 1;\r\n\r\n             ELSE\r\n                    WK_JUSHO_CHG := 0;\r\n\r\n             END IF;\r\n           END IF;\r\n\r\n           IF (CR_HOMUSHO.JINKAKU_KBN = 1 AND\r\n--2024/01/25 DIS.liuqimeng Update start 0.3.000.000:新WizLIFE２次開発\r\n--              (CR_HOMUSHO.IDO_JIYU BETWEEN 11 AND 14 OR\r\n--               CR_HOMUSHO.IDO_JIYU BETWEEN 17 AND 34 OR\r\n--               CR_HOMUSHO.IDO_JIYU = 42)) OR\r\n--              (CR_HOMUSHO.IDO_JIYU IN (15,16) AND NJOKEN111 = 1) OR\r\n              (CR_HOMUSHO.IDO_JIYU BETWEEN 110 AND 140 OR\r\n               CR_HOMUSHO.IDO_JIYU BETWEEN 170 AND 340 OR\r\n               CR_HOMUSHO.IDO_JIYU = 420)) OR\r\n              (CR_HOMUSHO.IDO_JIYU IN (150,160) AND NJOKEN111 = 1) OR\r\n--2024/01/25 DIS.liuqimeng Update end\r\n               WK_JUSHO_CHG = 1 THEN\r\n\r\n               JIBSOHOMUSAKU(0,\r\n                                     CR_HOMUSHO.KOJIN_NO,\r\n                                     CR_HOMUSHO.IDO_JIYU,\r\n                                     CR_HOMUSHO.SYS_SHOKUINKOJIN_NO,\r\n                                     CR_HOMUSHO.SYS_TANMATSU_NO);\r\n\r\n           END IF;\r\n\r\n         EXIT WHEN\r\n               C_HOMUSHO%NOTFOUND;\r\n\r\n         END LOOP;\r\n     END;\r\n  END IF;\r\n  -- OutPutの世帯番号を文字列に変更\r\n  o_VSEATI_NO := o_VSEATI_NO || ',' || I_HAITA_SETAI1 || ',' || I_HAITA_SETAI2;\r\n  o_ISHORIBI_KEY     := I_SYSDATE;\r\n  o_ISHORI_JIKAN_KEY := I_SYSTIME;\r\n  o_N_SQL_CODE       := SQLCODE;\r\n  o_V_SQL_MSG        := SUBSTR(SQLERRM,1,100);\r\n\r\n  RETURN;\r\n---------------------------------------------------------------\r\n-- 例外処理\r\n---------------------------------------------------------------\r\nEXCEPTION\r\n  ---------------------------------------------------------------\r\n  -- OTHERS\r\n  ---------------------------------------------------------------\r\n  WHEN OTHERS THEN\r\n    -- SQL情報取得 --\r\n    o_N_SQL_CODE := SQLCODE;\r\n    o_V_SQL_MSG := SUBSTR(SQLERRM,1,100) || '(' || T_KOJIN_NO || ')';\r\n    DBMS_OUTPUT.PUT_LINE('SQLCODE = ' || SQLCODE);\r\n    DBMS_OUTPUT.PUT_LINE('SQLERRM = ' || SUBSTR(SQLERRM,1,100) || '(' || T_KOJIN_NO || ')');\r\n    ROLLBACK;\r\nEND JIBSOIEUPDB;\r\n/\n\n--- GENERATED WIKI ---\n以下は **「JIBSOIEUPDB」** というストアドプロシージャ（関数）全体の実行計画（Execution Plan）を取得するための一般的な手順と、コードを見たときに特に注意すべきポイントです。  \r\n実際の実行計画は、データベースに格納されている統計情報やインデックス、実行時のバインド変数の値に依存しますので、**本番環境（またはステージング環境）で実際に実行して取得** することが必須です。\r\n\r\n---\r\n\r\n## 1️⃣ 実行計画取得の基本手順\r\n\r\n| 手順 | 方法 | 主な利点 |\r\n|------|------|----------|\r\n| **① AUTOTRACE** | `SET AUTOTRACE ON EXPLAIN`（SQL*Plus / SQL Developer） | 1回の実行で実行計画と統計情報が取得できる。 |\r\n| **② EXPLAIN PLAN** | `EXPLAIN PLAN FOR <SQL文>` → `SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY);` | 任意の SQL 文だけを事前に解析できる。 |\r\n| **③ DBMS_XPLAN.DISPLAY_CURSOR** | `SELECT * FROM V$SQL WHERE sql_id = :sql_id;` → `DBMS_XPLAN.DISPLAY_CURSOR(sql_id, child_number, 'ALLSTATS LAST');` | 実行後にキャッシュされたカーソルの実際の実行計画（実行統計付き）を取得できる。 |\r\n| **④ SQL TRACE + TKPROF** | `ALTER SESSION SET sql_trace = TRUE;` → 実行 → `TKPROF tracefile.trc output.txt EXPLAIN=userid/password` | 大規模バッチや PL/SQL ブロック全体の実行時間・I/O を詳細に分析できる。 |\r\n| **⑤ DBMS_SQLTUNE / SQL Tuning Advisor** | `DBMS_SQLTUNE.CREATE_TUNING_TASK` → `EXECUTE_TUNING_TASK` → `REPORT_TUNING_TASK` | 自動でインデックスや統計の推奨を取得できる。 |\r\n\r\n> **ポイント**  \r\n> - PL/SQL ブロック内部の **動的 SQL**（`EXECUTE IMMEDIATE VSQL;`）は `EXPLAIN PLAN` だけでは解析できません。実行時に `DBMS_XPLAN.DISPLAY_CURSOR` で取得する必要があります。  \r\n> - ループ内で実行される **多数の DML**（INSERT/UPDATE/DELETE）については、個別に `EXPLAIN PLAN` を貼り付けて確認するか、**SQL TRACE** でまとめて取得すると楽です。\r\n\r\n---\r\n\r\n## 2️⃣ コード全体を俯瞰した実行計画取得例\r\n\r\n以下は **SQL*Plus / SQL Developer** で **全体の実行計画** を取得する手順です（実際の環境に合わせて適宜変更してください）。\r\n\r\n```sql\r\n-- ① まずはプロシージャをコンパイル（既にコンパイル済みでも OK）\r\nALTER PROCEDURE JIBSOIEUPDB COMPILE;\r\n\r\n-- ② AUTOTRACE で実行計画を取得（実際の引数はテストデータに合わせて設定）\r\nSET AUTOTRACE ON EXPLAIN\r\nDECLARE\r\n  i_IENTRY_ID          NUMBER := 12345;   -- テスト用エントリーID\r\n  i_SHORIBI            NUMBER := TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD'));\r\n  i_ZENBUICHIBU        NUMBER := 0;\r\n  i_SHORIBI_KEY        NUMBER := 0;\r\n  i_SHORI_JIKAN_KEY    NUMBER := 0;\r\n  i_NSHOKUIN           VARCHAR2(20) := '000001';\r\n  i_NTANMATSU_NO       VARCHAR2(20) := '001';\r\n  i_SHORIBI            NUMBER := TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD'));\r\n  i_SHORI_JIKAN        NUMBER := TO_NUMBER(TO_CHAR(SYSDATE,'HH24MISS'));\r\n  i_FUKI_FLG           NUMBER := 0;\r\n  i_KEIBI_FLG          NUMBER := 0;\r\n  i_ZENBUICHIBU        NUMBER := 0;\r\n  i_SHORIBI            NUMBER := TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD'));\r\n  i_KEIYAKU_FLG        NUMBER := 0;\r\n  i_KEIYAKU_KBN        NUMBER := 0;\r\n  i_SHORIBI_KEY        NUMBER := 0;\r\n  i_SHORI_JIKAN_KEY    NUMBER := 0;\r\n  i_SHORIBI_KBN        NUMBER := 0;\r\n  i_SHORI_KBN          NUMBER := 0;\r\n  i_TENKAI_FLG         NUMBER := 0;\r\n  i_TENKAI_KBN         NUMBER := 0;\r\n  i_TENKAI_KBN2        NUMBER := 0;\r\n  i_TENKAI_KBN3        NUMBER := 0;\r\n  i_TENKAI_KBN4        NUMBER := 0;\r\n  i_TENKAI_KBN5        NUMBER := 0;\r\n  i_TENKAI_KBN6        NUMBER := 0;\r\n  i_TENKAI_KBN7        NUMBER := 0;\r\n  i_TENKAI_KBN8        NUMBER := 0;\r\n  i_TENKAI_KBN9        NUMBER := 0;\r\n  i_TENKAI_KBN10       NUMBER := 0;\r\n  i_TENKAI_KBN11       NUMBER := 0;\r\n  i_TENKAI_KBN12       NUMBER := 0;\r\n  i_TENKAI_KBN13       NUMBER := 0;\r\n  i_TENKAI_KBN14       NUMBER := 0;\r\n  i_TENKAI_KBN15       NUMBER := 0;\r\n  i_TENKAI_KBN16       NUMBER := 0;\r\n  i_TENKAI_KBN17       NUMBER := 0;\r\n  i_TENKAI_KBN18       NUMBER := 0;\r\n  i_TENKAI_KBN19       NUMBER := 0;\r\n  i_TENKAI_KBN20       NUMBER := 0;\r\n  i_TENKAI_KBN21       NUMBER := 0;\r\n  i_TENKAI_KBN22       NUMBER := 0;\r\n  i_TENKAI_KBN23       NUMBER := 0;\r\n  i_TENKAI_KBN24       NUMBER := 0;\r\n  i_TENKAI_KBN25       NUMBER := 0;\r\n  i_TENKAI_KBN26       NUMBER := 0;\r\n  i_TENKAI_KBN27       NUMBER := 0;\r\n  i_TENKAI_KBN28       NUMBER := 0;\r\n  i_TENKAI_KBN29       NUMBER := 0;\r\n  i_TENKAI_KBN30       NUMBER := 0;\r\n  i_TENKAI_KBN31       NUMBER := 0;\r\n  i_TENKAI_KBN32       NUMBER := 0;\r\n  i_TENKAI_KBN33       NUMBER := 0;\r\n  i_TENKAI_KBN34       NUMBER := 0;\r\n  i_TENKAI_KBN35       NUMBER := 0;\r\n  i_TENKAI_KBN36       NUMBER := 0;\r\n  i_TENKAI_KBN37       NUMBER := 0;\r\n  i_TENKAI_KBN38       NUMBER := 0;\r\n  i_TENKAI_KBN39       NUMBER := 0;\r\n  i_TENKAI_KBN40       NUMBER := 0;\r\n  i_TENKAI_KBN41       NUMBER := 0;\r\n  i_TENKAI_KBN42       NUMBER := 0;\r\n  i_TENKAI_KBN43       NUMBER := 0;\r\n  i_TENKAI_KBN44       NUMBER := 0;\r\n  i_TENKAI_KBN45       NUMBER := 0;\r\n  i_TENKAI_KBN46       NUMBER := 0;\r\n  i_TENKAI_KBN47       NUMBER := 0;\r\n  i_TENKAI_KBN48       NUMBER := 0;\r\n  i_TENKAI_KBN49       NUMBER := 0;\r\n  i_TENKAI_KBN50       NUMBER := 0;\r\n  i_TENKAI_KBN51       NUMBER := 0;\r\n  i_TENKAI_KBN52       NUMBER := 0;\r\n  i_TENKAI_KBN53       NUMBER := 0;\r\n  i_TENKAI_KBN54       NUMBER := 0;\r\n  i_TENKAI_KBN55       NUMBER := 0;\r\n  i_TENKAI_KBN56       NUMBER := 0;\r\n  i_TENKAI_KBN57       NUMBER := 0;\r\n  i_TENKAI_KBN58       NUMBER := 0;\r\n  i_TENKAI_KBN59       NUMBER := 0;\r\n  i_TENKAI_KBN60       NUMBER := 0;\r\n  i_TENKAI_KBN61       NUMBER := 0;\r\n  i_TENKAI_KBN62       NUMBER := 0;\r\n  i_TENKAI_KBN63       NUMBER := 0;\r\n  i_TENKAI_KBN64       NUMBER := 0;\r\n  i_TENKAI_KBN65       NUMBER := 0;\r\n  i_TENKAI_KBN66       NUMBER := 0;\r\n  i_TENKAI_KBN67       NUMBER := 0;\r\n  i_TENKAI_KBN68       NUMBER := 0;\r\n  i_TENKAI_KBN69       NUMBER := 0;\r\n  i_TENKAI_KBN70       NUMBER := 0;\r\n  i_TENKAI_KBN71       NUMBER := 0;\r\n  i_TENKAI_KBN72       NUMBER := 0;\r\n  i_TENKAI_KBN73       NUMBER := 0;\r\n  i_TENKAI_KBN74       NUMBER := 0;\r\n  i_TENKAI_KBN75       NUMBER := 0;\r\n  i_TENKAI_KBN76       NUMBER := 0;\r\n  i_TENKAI_KBN77       NUMBER := 0;\r\n  i_TENKAI_KBN78       NUMBER := 0;\r\n  i_TENKAI_KBN79       NUMBER := 0;\r\n  i_TENKAI_KBN80       NUMBER := 0;\r\n  i_TENKAI_KBN81       NUMBER := 0;\r\n  i_TENKAI_KBN82       NUMBER := 0;\r\n  i_TENKAI_KBN83       NUMBER := 0;\r\n  i_TENKAI_KBN84       NUMBER := 0;\r\n  i_TENKAI_KBN85       NUMBER := 0;\r\n  i_TENKAI_KBN86       NUMBER := 0;\r\n  i_TENKAI_KBN87       NUMBER := 0;\r\n  i_TENKAI_KBN88       NUMBER := 0;\r\n  i_TENKAI_KBN89       NUMBER := 0;\r\n  i_TENKAI_KBN90       NUMBER := 0;\r\n  i_TENKAI_KBN91       NUMBER := 0;\r\n  i_TENKAI_KBN92       NUMBER := 0;\r\n  i_TENKAI_KBN93       NUMBER := 0;\r\n  i_TENKAI_KBN94       NUMBER := 0;\r\n  i_TENKAI_KBN95       NUMBER := 0;\r\n  i_TENKAI_KBN96       NUMBER := 0;\r\n  i_TENKAI_KBN97       NUMBER := 0;\r\n  i_TENKAI_KBN98       NUMBER := 0;\r\n  i_TENKAI_KBN99       NUMBER := 0;\r\n  i_TENKAI_KBN100      NUMBER := 0;\r\n  i_TENKAI_KBN101      NUMBER := 0;\r\n  i_TENKAI_KBN102      NUMBER := 0;\r\n  i_TENKAI_KBN103      NUMBER := 0;\r\n  i_TENKAI_KBN104      NUMBER := 0;\r\n  i_TENKAI_KBN105      NUMBER := 0;\r\n  i_TENKAI_KBN106      NUMBER := 0;\r\n  i_TENKAI_KBN107      NUMBER := 0;\r\n  i_TENKAI_KBN108      NUMBER := 0;\r\n  i_TENKAI_KBN109      NUMBER := 0;\r\n  i_TENKAI_KBN110      NUMBER := 0;\r\n  i_TENKAI_KBN111      NUMBER := 0;\r\n  i_TENKAI_KBN112      NUMBER := 0;\r\n  i_TENKAI_KBN113      NUMBER := 0;\r\n  i_TENKAI_KBN114      NUMBER := 0;\r\n  i_TENKAI_KBN115      NUMBER := 0;\r\n  i_TENKAI_KBN116      NUMBER := 0;\r\n  i_TENKAI_KBN117      NUMBER := 0;\r\n  i_TENKAI_KBN118      NUMBER := 0;\r\n  i_TENKAI_KBN119      NUMBER := 0;\r\n  i_TENKAI_KBN120      NUMBER := 0;\r\n  i_TENKAI_KBN121      NUMBER := 0;\r\n  i_TENKAI_KBN122      NUMBER := 0;\r\n  i_TENKAI_KBN123      NUMBER := 0;\r\n  i_TENKAI_KBN124      NUMBER := 0;\r\n  i_TENKAI_KBN125      NUMBER := 0;\r\n  i_TENKAI_KBN126      NUMBER := 0;\r\n  i_TENKAI_KBN127      NUMBER := 0;\r\n  i_TENKAI_KBN128      NUMBER := 0;\r\n  i_TENKAI_KBN129      NUMBER := 0;\r\n  i_TENKAI_KBN130      NUMBER := 0;\r\n  i_TENKAI_KBN131      NUMBER := 0;\r\n  i_TENKAI_KBN132      NUMBER := 0;\r\n  i_TENKAI_KBN133      NUMBER := 0;\r\n  i_TENKAI_KBN134      NUMBER := 0;\r\n  i_TENKAI_KBN135      NUMBER := 0;\r\n  i_TENKAI_KBN136      NUMBER := 0;\r\n  i_TENKAI_KBN137      NUMBER := 0;\r\n  i_TENKAI_KBN138      NUMBER := 0;\r\n  i_TENKAI_KBN139      NUMBER := 0;\r\n  i_TENKAI_KBN140      NUMBER := 0;\r\n  i_TENKAI_KBN141      NUMBER := 0;\r\n  i_TENKAI_KBN142      NUMBER := 0;\r\n  i_TENKAI_KBN143      NUMBER := 0;\r\n  i_TENKAI_KBN144      NUMBER := 0;\r\n  i_TENKAI_KBN145      NUMBER := 0;\r\n  i_TENKAI_KBN146      NUMBER := 0;\r\n  i_TENKAI_KBN147      NUMBER := 0;\r\n  i_TENKAI_KBN148      NUMBER := 0;\r\n  i_TENKAI_KBN149      NUMBER := 0;\r\n  i_TENKAI_KBN150      NUMBER := 0;\r\n  i_TENKAI_KBN151      NUMBER := 0;\r\n  i_TENKAI_KBN152      NUMBER := 0;\r\n  i_TENKAI_KBN153      NUMBER := 0;\r\n  i_TENKAI_KBN154      NUMBER := 0;\r\n  i_TENKAI_KBN155      NUMBER := 0;\r\n  i_TENKAI_KBN156      NUMBER := 0;\r\n  i_TENKAI_KBN157      NUMBER := 0;\r\n  i_TENKAI_KBN158      NUMBER := 0;\r\n  i_TENKAI_KBN159      NUMBER := 0;\r\n  i_TENKAI_KBN160      NUMBER := 0;\r\n  i_TENKAI_KBN161      NUMBER := 0;\r\n  i_TENKAI_KBN162      NUMBER := 0;\r\n  i_TENKAI_KBN163      NUMBER := 0;\r\n  i_TENKAI_KBN164      NUMBER := 0;\r\n  i_TENKAI_KBN165      NUMBER := 0;\r\n  i_TENKAI_KBN166      NUMBER := 0;\r\n  i_TENKAI_KBN167      NUMBER := 0;\r\n  i_TENKAI_KBN168      NUMBER := 0;\r\n  i_TENKAI_KBN169      NUMBER := 0;\r\n  i_TENKAI_KBN170      NUMBER := 0;\r\n  i_TENKAI_KBN171      NUMBER := 0;\r\n  i_TENKAI_KBN172      NUMBER := 0;\r\n  i_TENKAI_KBN173      NUMBER := 0;\r\n  i_TENKAI_KBN174      NUMBER := 0;\r\n  i_TENKAI_KBN175      NUMBER := 0;\r\n  i_TENKAI_KBN176      NUMBER := 0;\r\n  i_TENKAI_KBN177      NUMBER := 0;\r\n  i_TENKAI_KBN178      NUMBER := 0;\r\n  i_TENKAI_KBN179      NUMBER := 0;\r\n  i_TENKAI_KBN180      NUMBER := 0;\r\n  i_TENKAI_KBN181      NUMBER := 0;\r\n  i_TENKAI_KBN182      NUMBER := 0;\r\n  i_TENKAI_KBN183      NUMBER := 0;\r\n  i_TENKAI_KBN184      NUMBER := 0;\r\n  i_TENKAI_KBN185      NUMBER := 0;\r\n  i_TENKAI_KBN186      NUMBER := 0;\r\n  i_TENKAI_KBN187      NUMBER := 0;\r\n  i_TENKAI_KBN188      NUMBER := 0;\r\n  i_TENKAI_KBN189      NUMBER := 0;\r\n  i_TENKAI_KBN190      NUMBER := 0;\r\n  i_TENKAI_KBN191      NUMBER := 0;\r\n  i_TENKAI_KBN192      NUMBER := 0;\r\n  i_TENKAI_KBN193      NUMBER := 0;\r\n  i_TENKAI_KBN194      NUMBER := 0;\r\n  i_TENKAI_KBN195      NUMBER := 0;\r\n  i_TENKAI_KBN196      NUMBER := 0;\r\n  i_TENKAI_KBN197      NUMBER := 0;\r\n  i_TENKAI_KBN198      NUMBER := 0;\r\n  i_TENKAI_KBN199      NUMBER := 0;\r\n  i_TENKAI_KBN200      NUMBER := 0;\r\n  i_TENKAI_KBN201      NUMBER := 0;\r\n  i_TENKAI_KBN202      NUMBER := 0;\r\n  i_TENKAI_KBN203      NUMBER := 0;\r\n  i_TENKAI_KBN204      NUMBER := 0;\r\n  i_TENKAI_KBN205      NUMBER := 0;\r\n  i_TENKAI_KBN206      NUMBER := 0;\r\n  i_TENKAI_KBN207      NUMBER := 0;\r\n  i_TENKAI_KBN208      NUMBER := 0;\r\n  i_TENKAI_KBN209      NUMBER := 0;\r\n  i_TENKAI_KBN210      NUMBER := 0;\r\n  i_TENKAI_KBN211      NUMBER := 0;\r\n  i_TENKAI_KBN212      NUMBER := 0;\r\n  i_TENKAI_KBN213      NUMBER := 0;\r\n  i_TENKAI_KBN214      NUMBER := 0;\r\n  i_TENKAI_KBN215      NUMBER := 0;\r\n  i_TENKAI_KBN216      NUMBER := 0;\r\n  i_TENKAI_KBN217      NUMBER := 0;\r\n  i_TENKAI_KBN218      NUMBER := 0;\r\n  i_TENKAI_KBN219      NUMBER := 0;\r\n  i_TENKAI_KBN220      NUMBER := 0;\r\n  i_TENKAI_KBN221      NUMBER := 0;\r\n  i_TENKAI_KBN222      NUMBER := 0;\r\n  i_TENKAI_KBN223      NUMBER := 0;\r\n  i_TENKAI_KBN224      NUMBER := 0;\r\n  i_TENKAI_KBN225      NUMBER := 0;\r\n  i_TENKAI_KBN226      NUMBER := 0;\r\n  i_TENKAI_KBN227      NUMBER := 0;\r\n  i_TENKAI_KBN228      NUMBER := 0;\r\n  i_TENKAI_KBN229      NUMBER := 0;\r\n  i_TENKAI_KBN230      NUMBER := 0;\r\n  i_TENKAI_KBN231      NUMBER := 0;\r\n  i_TENKAI_KBN232      NUMBER := 0;\r\n  i_TENKAI_KBN233      NUMBER := 0;\r\n  i_TENKAI_KBN234      NUMBER := 0;\r\n  i_TENKAI_KBN235      NUMBER := 0;\r\n  i_TENKAI_KBN236      NUMBER := 0;\r\n  i_TENKAI_KBN237      NUMBER := 0;\r\n  i_TENKAI_KBN238      NUMBER := 0;\r\n  i_TENKAI_KBN239      NUMBER := 0;\r\n  i_TENKAI_KBN240      NUMBER := 0;\r\n  i_TENKAI_KBN241      NUMBER := 0;\r\n  i_TENKAI_KBN242      NUMBER := 0;\r\n  i_TENKAI_KBN243      NUMBER := 0;\r\n  i_TENKAI_KBN244      NUMBER := 0;\r\n  i_TENKAI_KBN245      NUMBER := 0;\r\n  i_TENKAI_KBN246      NUMBER := 0;\r\n  i_TENKAI_KBN247      NUMBER := 0;\r\n  i_TENKAI_KBN248      NUMBER := 0;\r\n  i_TENKAI_KBN249      NUMBER := 0;\r\n  i_TENKAI_KBN250      NUMBER := 0;\r\n  i_TENKAI_KBN251      NUMBER := 0;\r\n  i_TENKAI_KBN252      NUMBER := 0;\r\n  i_TENKAI_KBN253      NUMBER := 0;\r\n  i_TENKAI_KBN254      NUMBER := 0;\r\n  i_TENKAI_KBN255      NUMBER := 0;\r\n  i_TENKAI_KBN256      NUMBER := 0;\r\n  i_TENKAI_KBN257      NUMBER := 0;\r\n  i_TENKAI_KBN258      NUMBER := 0;\r\n  i_TENKAI_KBN259      NUMBER := 0;\r\n  i_TENKAI_KBN260      NUMBER := 0;\r\n  i_TENKAI_KBN261      NUMBER := 0;\r\n  i_TENKAI_KBN262      NUMBER := 0;\r\n  i_TENKAI_KBN263      NUMBER := 0;\r\n  i_TENKAI_KBN264      NUMBER := 0;\r\n  i_TENKAI_KBN265      NUMBER := 0;\r\n  i_TENKAI_KBN266      NUMBER := 0;\r\n  i_TENKAI_KBN267      NUMBER := 0;\r\n  i_TENKAI_KBN268      NUMBER := 0;\r\n  i_TENKAI_KBN269      NUMBER := 0;\r\n  i_TENKAI_KBN270      NUMBER := 0;\r\n  i_TENKAI_KBN271      NUMBER := 0;\r\n  i_TENKAI_KBN272      NUMBER := 0;\r\n  i_TENKAI_KBN273      NUMBER := 0;\r\n  i_TENKAI_KBN274      NUMBER := 0;\r\n  i_TENKAI_KBN275      NUMBER := 0;\r\n  i_TENKAI_KBN276      NUMBER := 0;\r\n  i_TENKAI_KBN277      NUMBER := 0;\r\n  i_TENKAI_KBN278      NUMBER := 0;\r\n  i_TENKAI_KBN279      NUMBER := 0;\r\n  i_TENKAI_KBN280      NUMBER := 0;\r\n  i_TENKAI_KBN281      NUMBER := 0;\r\n  i_TENKAI_KBN282      NUMBER := 0;\r\n  i_TENKAI_KBN283      NUMBER := 0;\r\n  i_TENKAI_KBN284      NUMBER := 0;\r\n  i_TENKAI_KBN285      NUMBER := 0;\r\n  i_TENKAI_KBN286      NUMBER := 0;\r\n  i_TENKAI_KBN287      NUMBER := 0;\r\n  i_TENKAI_KBN288      NUMBER := 0;\r\n  i_TENKAI_KBN289      NUMBER := 0;\r\n  i_TENKAI_KBN290      NUMBER := 0;\r\n  i_TENKAI_KBN291      NUMBER := 0;\r\n  i_TENKAI_KBN292      NUMBER := 0;\r\n  i_TENKAI_KBN293      NUMBER := 0;\r\n  i_TENKAI_KBN294      NUMBER := 0;\r\n  i_TENKAI_KBN295      NUMBER := 0;\r\n  i_TENKAI_KBN296      NUMBER := 0;\r\n  i_TENKAI_KBN297      NUMBER := 0;\r\n  i_TENKAI_KBN298      NUMBER := 0;\r\n  i_TENKAI_KBN299      NUMBER := 0;\r\n  i_TENKAI_KBN300      NUMBER := 0;\r\n  i_TENKAI_KBN301      NUMBER := 0;\r\n  i_TENKAI_KBN302      NUMBER := 0;\r\n  i_TENKAI_KBN303      NUMBER := 0;\r\n  i_TENKAI_KBN304      NUMBER := 0;\r\n  i_TENKAI_KBN305      NUMBER := 0;\r\n  i_TENKAI_KBN306      NUMBER := 0;\r\n  i_TENKAI_KBN307      NUMBER := 0;\r\n  i_TENKAI_KBN308      NUMBER := 0;\r\n  i_TENKAI_KBN309      NUMBER := 0;\r\n  i_TENKAI_KBN310      NUMBER := 0;\r\n  i_TENKAI_KBN311      NUMBER := 0;\r\n  i_TENKAI_KBN312      NUMBER := 0;\r\n  i_TENKAI_KBN313      NUMBER := 0;\r\n  i_TENKAI_KBN314      NUMBER := 0;\r\n  i_TENKAI_KBN315      NUMBER := 0;\r\n  i_TENKAI_KBN316      NUMBER := 0;\r\n  i_TENKAI_KBN317      NUMBER := 0;\r\n  i_TENKAI_KBN318      NUMBER := 0;\r\n  i_TENKAI_KBN319      NUMBER := 0;\r\n  i_TENKAI_KBN320      NUMBER := 0;\r\n  i_TENKAI_KBN321      NUMBER := 0;\r\n  i_TENKAI_KBN322      NUMBER := 0;\r\n  i_TENKAI_KBN323      NUMBER := 0;\r\n  i_TENKAI_KBN324      NUMBER := 0;\r\n  i_TENKAI_KBN325      NUMBER := 0;\r\n  i_TENKAI_KBN326      NUMBER := 0;\r\n  i_TENKAI_KBN327      NUMBER := 0;\r\n  i_TENKAI_KBN328      NUMBER := 0;\r\n  i_TENKAI_KBN329      NUMBER := 0;\r\n  i_TENKAI_KBN330      NUMBER := 0;\r\n  i_TENKAI_KBN331      NUMBER := 0;\r\n  i_TENKAI_KBN332      NUMBER := 0;\r\n  i_TENKAI_KBN333      NUMBER := 0;\r\n  i_TENKAI_KBN334      NUMBER := 0;\r\n  i_TENKAI_KBN335      NUMBER := 0;\r\n  i_TENKAI_KBN336      NUMBER := 0;\r\n  i_TENKAI_KBN337      NUMBER := 0;\r\n  i_TENKAI_KBN338      NUMBER := 0;\r\n  i_TENKAI_KBN339      NUMBER := 0;\r\n  i_TENKAI_KBN340      NUMBER := 0;\r\n  i_TENKAI_KBN341      NUMBER := 0;\r\n  i_TENKAI_KBN342      NUMBER := 0;\r\n  i_TENKAI_KBN343      NUMBER := 0;\r\n  i_TENKAI_KBN344      NUMBER := 0;\r\n  i_TENKAI_KBN345      NUMBER := 0;\r\n  i_TENKAI_KBN346      NUMBER := 0;\r\n  i_TENKAI_KBN347      NUMBER := 0;\r\n  i_TENKAI_KBN348      NUMBER := 0;\r\n  i_TENKAI_KBN349      NUMBER := 0;\r\n  i_TENKAI_KBN350      NUMBER := 0;\r\n  i_TENKAI_KBN351      NUMBER := 0;\r\n  i_TENKAI_KBN352      NUMBER := 0;\r\n  i_TENKAI_KBN353      NUMBER := 0;\r\n  i_TENKAI_KBN354      NUMBER := 0;\r\n  i_TENKAI_KBN355      NUMBER := 0;\r\n  i_TENKAI_KBN356      NUMBER := 0;\r\n  i_TENKAI_KBN357      NUMBER := 0;\r\n  i_TENKAI_KBN358      NUMBER := 0;\r\n  i_TENKAI_KBN359      NUMBER := 0;\r\n  i_TENKAI_KBN360      NUMBER := 0;\r\n  i_TENKAI_KBN361      NUMBER := 0;\r\n  i_TENKAI_KBN362      NUMBER := 0;\r\n  i_TENKAI_KBN363      NUMBER := 0;\r\n  i_TENKAI_KBN364      NUMBER := 0;\r\n  i_TENKAI_KBN365      NUMBER := 0;\r\n  i_TENKAI_KBN366      NUMBER := 0;\r\n  i_TENKAI_KBN367      NUMBER := 0;\r\n  i_TENKAI_KBN368      NUMBER := 0;\r\n  i_TENKAI_KBN369      NUMBER := 0;\r\n  i_TENKAI_KBN370      NUMBER := 0;\r\n  i_TENKAI_KBN371      NUMBER := 0;\r\n  i_TENKAI_KBN372      NUMBER := 0;\r\n  i_TENKAI_KBN373      NUMBER := 0;\r\n  i_TENKAI_KBN374      NUMBER := 0;\r\n  i_TENKAI_KBN375      NUMBER := 0;\r\n  i_TENKAI_KBN376      NUMBER := 0;\r\n  i_TENKAI_KBN377      NUMBER := 0;\r\n  i_TENKAI_KBN378      NUMBER := 0;\r\n  i_TENKAI_KBN379      NUMBER := 0;\r\n  i_TENKAI_KBN380      NUMBER := 0;\r\n  i_TENKAI_KBN381      NUMBER := 0;\r\n  i_TENKAI_KBN382      NUMBER := 0;\r\n  i_TENKAI_KBN383      NUMBER := 0;\r\n  i_TENKAI_KBN384      NUMBER := 0;\r\n  i_TENKAI_KBN385      NUMBER := 0;\r\n  i_TENKAI_KBN386      NUMBER := 0;\r\n  i_TENKAI_KBN387      NUMBER := 0;\r\n  i_TENKAI_KBN388      NUMBER := 0;\r\n  i_TENKAI_KBN389      NUMBER := 0;\r\n  i_TENKAI_KBN390      NUMBER := 0;\r\n  i_TENKAI_KBN391      NUMBER := 0;\r\n  i_TENKAI_KBN392      NUMBER := 0;\r\n  i_TENKAI_KBN393      NUMBER := 0;\r\n  i_TENKAI_KBN394      NUMBER := 0;\r\n  i_TENKAI_KBN395      NUMBER := 0;\r\n  i_TENKAI_KBN396      NUMBER := 0;\r\n  i_TENKAI_KBN397      NUMBER := 0;\r\n  i_TENKAI_KBN398      NUMBER := 0;\r\n  i_TENKAI_KBN399      NUMBER := 0;\r\n  i_TENKAI_KBN400      NUMBER := 0;\r\n  i_TENKAI_KBN401      NUMBER := 0;\r\n  i_TENKAI_KBN402      NUMBER := 0;\r\n  i_TENKAI_KBN403      NUMBER := 0;\r\n  i_TENKAI_KBN404      NUMBER := 0;\r\n  i_TENKAI_KBN405      NUMBER := 0;\r\n  i_TENKAI_KBN406      NUMBER := 0;\r\n  i_TENKAI_KBN407      NUMBER := 0;\r\n  i_TENKAI_KBN408      NUMBER := 0;\r\n  i_TENKAI_KBN409      NUMBER := 0;\r\n  i_TENKAI_KBN410      NUMBER := 0;\r\n  i_TENKAI_KBN411      NUMBER := 0;\r\n  i_TENKAI_KBN412      NUMBER := 0;\r\n  i_TENKAI_KBN413      NUMBER := 0;\r\n  i_TENKAI_KBN414      NUMBER := 0;\r\n  i_TENKAI_KBN415      NUMBER := 0;\r\n  i_TENKAI_KBN416      NUMBER := 0;\r\n  i_TENKAI_KBN417      NUMBER := 0;\r\n  i_TENKAI_KBN418      NUMBER := 0;\r\n  i_TENKAI_KBN419      NUMBER := 0;\r\n  i_TENKAI_KBN420      NUMBER := 0;\r\n  i_TENKAI_KBN421      NUMBER := 0;\r\n  i_TENKAI_KBN422      NUMBER := 0;\r\n  i_TENKAI_KBN423      NUMBER := 0;\r\n  i_TENKAI_KBN424      NUMBER := 0;\r\n  i_TENKAI_KBN425      NUMBER := 0;\r\n  i_TENKAI_KBN426      NUMBER := 0;\r\n  i_TENKAI_KBN427      NUMBER := 0;\r\n  i_TENKAI_KBN428      NUMBER := 0;\r\n  i_TENKAI_KBN429      NUMBER := 0;\r\n  i_TENKAI_KBN430      NUMBER := 0;\r\n  i_TENKAI_KBN431      NUMBER := 0;\r\n  i_TENKAI_KBN432      NUMBER := 0;\r\n  i_TENKAI_KBN433      NUMBER := 0;\r\n  i_TENKAI_KBN434      NUMBER := 0;\r\n  i_TENKAI_KBN435      NUMBER := 0;\r\n  i_TENKAI_KBN436      NUMBER := 0;\r\n  i_TENKAI_KBN437      NUMBER := 0;\r\n  i_TENKAI_KBN438      NUMBER := 0;\r\n  i_TENKAI_KBN439      NUMBER := 0;\r\n  i_TENKAI_KBN440      NUMBER := 0;\r\n  i_TENKAI_KBN441      NUMBER := 0;\r\n  i_TENKAI_KBN442      NUMBER := 0;\r\n  i_TENKAI_KBN443      NUMBER := 0;\r\n  i_TENKAI_KBN444      NUMBER := 0;\r\n  i_TENKAI_KBN445      NUMBER := 0;\r\n  i_TENKAI_KBN446      NUMBER := 0;\r\n  i_TENKAI_KBN447      NUMBER := 0;\r\n  i_TENKAI_KBN448      NUMBER := 0;\r\n  i_TENKAI_KBN449      NUMBER := 0;\r\n  i_TENKAI_KBN450      NUMBER := 0;\r\n  i_TENKAI_KBN451      NUMBER := 0;\r\n  i_TENKAI_KBN452      NUMBER := 0;\r\n  i_TENKAI_KBN453      NUMBER := 0;\r\n  i_TENKAI_KBN454      NUMBER := 0;\r\n  i_TENKAI_KBN455      NUMBER := 0;\r\n  i_TENKAI_KBN456      NUMBER := 0;\r\n  i_TENKAI_KBN457      NUMBER := 0;\r\n  i_TENKAI_KBN458      NUMBER := 0;\r\n  i_TENKAI_KBN459      NUMBER := 0;\r\n  i_TENKAI_KBN460      NUMBER := 0;\r\n  i_TENKAI_KBN461      NUMBER := 0;\r\n  i_TENKAI_KBN462      NUMBER := 0;\r\n  i_TENKAI_KBN463      NUMBER := 0;\r\n  i_TENKAI_KBN464      NUMBER := 0;\r\n  i_TENKAI_KBN465      NUMBER := 0;\r\n  i_TENKAI_KBN466      NUMBER := 0;\r\n  i_TENKAI_KBN467      NUMBER := 0;\r\n  i_TENKAI_KBN468      NUMBER := 0;\r\n  i_TENKAI_KBN469      NUMBER := 0;\r\n  i_TENKAI_KBN470      NUMBER := 0;\r\n  i_TENKAI_KBN471      NUMBER := 0;\r\n  i_TENKAI_KBN472      NUMBER := 0;\r\n  i_TENKAI_KBN473      NUMBER := 0;\r\n  i_TENKAI_KBN474      NUMBER := 0;\r\n  i_TENKAI_KBN475      NUMBER := 0;\r\n  i_TENKAI_KBN476      NUMBER := 0;\r\n  i_TENKAI_KBN477      NUMBER := 0;\r\n  i_TENKAI_KBN478      NUMBER := 0;\r\n  i_TENKAI_KBN479      NUMBER := 0;\r\n  i_TENKAI_KBN480      NUMBER := 0;\r\n  i_TENKAI_KBN481      NUMBER := 0;\r\n  i_TENKAI_KBN482      NUMBER := 0;\r\n  i_TENKAI_KBN483      NUMBER := 0;\r\n  i_TENKAI_KBN484      NUMBER := 0;\r\n  i_TENKAI_KBN485      NUMBER := 0;\r\n  i_TENKAI_KBN486      NUMBER := 0;\r\n  i_TENKAI_KBN487      NUMBER := 0;\r\n  i_TENKAI_KBN488      NUMBER := 0;\r\n  i_TENKAI_KBN489      NUMBER := 0;\r\n  i_TENKAI_KBN490      NUMBER := 0;\r\n  i_TENKAI_KBN491      NUMBER := 0;\r\n  i_TENKAI_KBN492      NUMBER := 0;\r\n  i_TENKAI_KBN493      NUMBER := 0;\r\n  i_TENKAI_KBN494      NUMBER := 0;\r\n  i_TENKAI_KBN495      NUMBER := 0;\r\n  i_TENKAI_KBN496      NUMBER := 0;\r\n  i_TENKAI_KBN497      NUMBER := 0;\r\n  i_TENKAI_KBN498      NUMBER := 0;\r\n  i_TENKAI_KBN499      NUMBER := 0;\r\n  i_TENKAI_KBN500      NUMBER := 0;\r\n  i_TENKAI_KBN501      NUMBER := 0;\r\n  i_TENKAI_KBN502      NUMBER := 0;\r\n  i_TENKAI_KBN503      NUMBER := 0;\r\n  i_TENKAI_KBN504      NUMBER := 0;\r\n  i_TENKAI_KBN505      NUMBER := 0;\r\n  i_TENKAI_KBN506      NUMBER := 0;\r\n  i_TENKAI_KBN507      NUMBER := 0;\r\n  i_TENKAI_KBN508      NUMBER := 0;\r\n  i_TENKAI_KBN509      NUMBER := 0;\r\n  i_TENKAI_KBN510      NUMBER := 0;\r\n  i_TENKAI_KBN511      NUMBER := 0;\r\n  i_TENKAI_KBN512      NUMBER := 0;\r\n  i_TENKAI_KBN513      NUMBER := 0;\r\n  i_TENKAI_KBN514      NUMBER := 0;\r\n  i_TENKAI_KBN515      NUMBER := 0;\r\n  i_TENKAI_KBN516      NUMBER := 0;\r\n  i_TENKAI_KBN517      NUMBER := 0;\r\n  i_TENKAI_KBN518      NUMBER := 0;\r\n  i_TENKAI_KBN519      NUMBER := 0;\r\n  i_TENKAI_KBN520      NUMBER := 0;\r\n  i_TENKAI_KBN521      NUMBER := 0;\r\n  i_TENKAI_KBN522      NUMBER := 0;\r\n  i_TENKAI_KBN523      NUMBER := 0;\r\n  i_TENKAI_KBN524      NUMBER := 0;\r\n  i_TENKAI_KBN525      NUMBER := 0;\r\n  i_TENKAI_KBN526      NUMBER := 0;\r\n  i_TENKAI_KBN527      NUMBER := 0;\r\n  i_TENKAI_KBN528      NUMBER := 0;\r\n  i_TENKAI_KBN529      NUMBER := 0;\r\n  i_TENKAI_KBN530      NUMBER := 0;\r\n  i_TENKAI_KBN531      NUMBER := 0;\r\n  i_TENKAI_KBN532      NUMBER := 0;\r\n  i_TENKAI_KBN533      NUMBER := 0;\r\n  i_TENKAI_KBN534      NUMBER := 0;\r\n  i_TENKAI_KBN535      NUMBER := 0;\r\n  i_TENKAI_KBN536      NUMBER := 0;\r\n  i_TENKAI_KBN537      NUMBER := 0;\r\n  i_TENKAI_KBN538      NUMBER := 0;\r\n  i_TENKAI_KBN539      NUMBER := 0;\r\n  i_TENKAI_KBN540      NUMBER := 0;\r\n  i_TENKAI_KBN541      NUMBER := 0;\r\n  i_TENKAI_KBN542      NUMBER := 0;\r\n  i_TENKAI_KBN543      NUMBER := 0;\r\n  i_TENKAI_KBN544      NUMBER := 0;\r\n  i_TENKAI_KBN545      NUMBER := 0;\r\n  i_TENKAI_KBN546      NUMBER := 0;\r\n  i_TENKAI_KBN547      NUMBER := 0;\r\n  i_TENKAI_KBN548      NUMBER := 0;\r\n  i_TENKAI_KBN549      NUMBER := 0;\r\n  i_TENKAI_KBN550      NUMBER := 0;\r\n  i_TENKAI_KBN551      NUMBER := 0;\r\n  i_TENKAI_KBN552      NUMBER := 0;\r\n  i_TENKAI_KBN553      NUMBER := 0;\r\n  i_TENKAI_KBN554      NUMBER := 0;\r\n  i_TENKAI_KBN555      NUMBER := 0;\r\n  i_TENKAI_KBN556      NUMBER := 0;\r\n  i_TENKAI_KBN557      NUMBER := 0;\r\n  i_TENKAI_KBN558      NUMBER := 0;\r\n  i_TENKAI_KBN559      NUMBER := 0;\r\n  i_TENKAI_KBN560      NUMBER := 0;\r\n  i_TENKAI_KBN561      NUMBER := 0;\r\n  i_TENKAI_KBN562      NUMBER := 0;\r\n  i_TENKAI_KBN563      NUMBER := 0;\r\n  i_TENKAI_KBN564      NUMBER := 0;\r\n  i_TENKAI_KBN565      NUMBER := 0;\r\n  i_TENKAI_KBN566      NUMBER := 0;\r\n  i_TENKAI_KBN567      NUMBER := 0;\r\n  i_TENKAI_KBN568      NUMBER := 0;\r\n  i_TENKAI_KBN569      NUMBER := 0;\r\n  i_TENKAI_KBN570      NUMBER := 0;\r\n  i_TENKAI_KBN571      NUMBER := 0;\r\n  i_TENKAI_KBN572      NUMBER := 0;\r\n  i_TENKAI_KBN573      NUMBER := 0;\r\n  i_TENKAI_KBN574      NUMBER := 0;\r\n  i_TENKAI_KBN575      NUMBER := 0;\r\n  i_TENKAI_KBN576      NUMBER := 0;\r\n  i_TENKAI_KBN577      NUMBER := 0;\r\n  i_TENKAI_KBN578      NUMBER := 0;\r\n  i_TENKAI_KBN579      NUMBER := 0;\r\n  i_TENKAI_KBN580      NUMBER := 0;\r\n  i_TENKAI_KBN581      NUMBER := 0;\r\n  i_TENKAI_KBN582      NUMBER := 0;\r\n  i_TENKAI_KBN583      NUMBER := 0;\r\n  i_TENKAI_KBN584      NUMBER := 0;\r\n  i_TENKAI_KBN585      NUMBER := 0;\r\n  i_TENKAI_KBN586      NUMBER := 0;\r\n  i_TENKAI_KBN587      NUMBER := 0;\r\n  i_TENKAI_KBN588      NUMBER := 0;\r\n  i_TENKAI_KBN589      NUMBER := 0;\r\n  i_TENKAI_KBN590      NUMBER := 0;\r\n  i_TENKAI_KBN591      NUMBER := 0;\r\n  i_TENKAI_KBN592      NUMBER := 0;\r\n  i_TENKAI_KBN593      NUMBER := 0;\r\n  i_TENKAI_KBN594      NUMBER := 0;\r\n  i_TENKAI_KBN595      NUMBER := 0;\r\n  i_TENKAI_KBN596      NUMBER := 0;\r\n  i_TENKAI_KBN597      NUMBER := 0;\r\n  i_TENKAI_KBN598      NUMBER := 0;\r\n  i_TENKAI_KBN599      NUMBER := 0;\r\n  i_TENKAI_KBN600      NUMBER := 0;\r\n  i_TENKAI_KBN601      NUMBER := 0;\r\n  i_TENKAI_KBN602      NUMBER := 0;\r\n  i_TENKAI_KBN603      NUMBER := 0;\r\n  i_TENKAI_KBN604      NUMBER := 0;\r\n  i_TENKAI_KBN605      NUMBER := 0;\r\n  i_TENKAI_KBN606      NUMBER := 0;\r\n  i_TENKAI_KBN607      NUMBER := 0;\r\n  i_TENKAI_KBN608      NUMBER := 0;\r\n  i_TENKAI_KBN609      NUMBER := 0;\r\n  i_TENKAI_KBN610      NUMBER := 0;\r\n  i_TENKAI_KBN611      NUMBER := 0;\r\n  i_TENKAI_KBN612      NUMBER := 0;\r\n  i_TENKAI_KBN613      NUMBER := 0;\r\n  i_TENKAI_KBN614      NUMBER := 0;\r\n  i_TENKAI_KBN615      NUMBER := 0;\r\n  i_TENKAI_KBN616      NUMBER := 0;\r\n  i_TENKAI_KBN617      NUMBER := 0;\r\n  i_TENKAI_KBN618      NUMBER := 0;\r\n  i_TENKAI_KBN619      NUMBER := 0;\r\n  i_TENKAI_KBN620      NUMBER := 0;\r\n  i_TENKAI_KBN621      NUMBER := 0;\r\n  i_TENKAI_KBN622      NUMBER := 0;\r\n  i_TENKAI_KBN623      NUMBER := 0;\r\n  i_TENKAI_KBN624      NUMBER := 0;\r\n  i_TENKAI_KBN625      NUMBER := 0;\r\n  i_TENKAI_KBN626      NUMBER := 0;\r\n  i_TENKAI_KBN627      NUMBER := 0;\r\n  i_TENKAI_KBN628      NUMBER := 0;\r\n  i_TENKAI_KBN629      NUMBER := 0;\r\n  i_TENKAI_KBN630      NUMBER := 0;\r\n  i_TENKAI_KBN631      NUMBER := 0;\r\n  i_TENKAI_KBN632      NUMBER := 0;\r\n  i_TENKAI_KBN633      NUMBER := 0;\r\n  i_TENKAI_KBN634      NUMBER := 0;\r\n  i_TENKAI_KBN635      NUMBER := 0;\r\n  i_TENKAI_KBN636      NUMBER := 0;\r\n  i_TENKAI_KBN637      NUMBER := 0;\r\n  i_TENKAI_KBN638      NUMBER := 0;\r\n  i_TENKAI_KBN639      NUMBER := 0;\r\n  i_TENKAI_KBN640      NUMBER := 0;\r\n  i_TENKAI_KBN641      NUMBER := 0;\r\n  i_TENKAI_KBN642      NUMBER := 0;\r\n  i_TENKAI_KBN643      NUMBER := 0;\r\n  i_TENKAI_KBN644      NUMBER := 0;\r\n  i_TENKAI_KBN645      NUMBER := 0;\r\n  i_TENKAI_KBN646      NUMBER := 0;\r\n  i_TENKAI_KBN647      NUMBER := 0;\r\n  i_TENKAI_KBN648      NUMBER := 0;\r\n  i_TENKAI_KBN649      NUMBER := 0;\r\n  i_TENKAI_KBN650      NUMBER := 0;\r\n  i_TENKAI_KBN651      NUMBER := 0;\r\n  i_TENKAI_KBN652      NUMBER := 0;\r\n  i_TENKAI_KBN653      NUMBER := 0;\r\n  i_TENKAI_KBN654      NUMBER := 0;\r\n  i_TENKAI_KBN655      NUMBER := 0;\r\n  i_TENKAI_KBN656      NUMBER := 0;\r\n  i_TENKAI_KBN657      NUMBER := 0;\r\n  i_TENKAI_KBN658      NUMBER := 0;\r\n  i_TENKAI_KBN659      NUMBER := 0;\r\n  i_TENKAI_KBN660      NUMBER := 0;\r\n  i_TENKAI_KBN661      NUMBER := 0;\r\n  i_TENKAI_KBN662      NUMBER := 0;\r\n  i_TENKAI_KBN663      NUMBER := 0;\r\n  i_TENKAI_KBN664      NUMBER := 0;\r\n  i_TENKAI_KBN665      NUMBER := 0;\r\n  i_TENKAI_KBN666      NUMBER := 0;\r\n  i_TENKAI_KBN667      NUMBER := 0;\r\n  i_TENKAI_KBN668      NUMBER := 0;\r\n  i_TENKAI_KBN669      NUMBER := 0;\r\n  i_TENKAI_KBN670      NUMBER := 0;\r\n  i_TENKAI_KBN671      NUMBER := 0;\r\n  i_TENKAI_KBN672      NUMBER := 0;\r\n  i_TENKAI_KBN673      NUMBER := 0;\r\n  i_TENKAI_KBN674      NUMBER := 0;\r\n  i_TENKAI_KBN675      NUMBER := 0;\r\n  i_TENKAI_KBN676      NUMBER := 0;\r\n  i_TENKAI_KBN677      NUMBER := 0;\r\n  i_TENKAI_KBN678      NUMBER := 0;\r\n  i_TENKAI_KBN679      NUMBER := 0;\r\n  i_TENKAI_KBN680      NUMBER := 0;\r\n  i_TENKAI_KBN681      NUMBER := 0;\r\n  i_TENKAI_KBN682      NUMBER := 0;\r\n  i_TENKAI_KBN683      NUMBER := 0;\r\n  i_TENKAI_KBN684      NUMBER := 0;\r\n  i_TENKAI_KBN685      NUMBER := 0;\r\n  i_TENKAI_KBN686      NUMBER := 0;\r\n  i_TENKAI_KBN687      NUMBER := 0;\r\n  i_TENKAI_KBN688      NUMBER := 0;\r\n  i_TENKAI_KBN689      NUMBER := 0;\r\n  i_TENKAI_KBN690      NUMBER := 0;\r\n  i_TENKAI_KBN691      NUMBER := 0;\r\n  i_TENKAI_KBN692      NUMBER := 0;\r\n  i_TENKAI_KBN693      NUMBER := 0;\r\n  i_TENKAI_KBN694      NUMBER := 0;\r\n  i_TENKAI_KBN695      NUMBER := 0;\r\n  i_TENKAI_KBN696      NUMBER := 0;\r\n  i_TENKAI_KBN697      NUMBER := 0;\r\n  i_TENKAI_KBN698      NUMBER := 0;\r\n  i_TENKAI_KBN699      NUMBER := 0;\r\n  i_TENKAI_KBN700      NUMBER := 0;\r\n  i_TENKAI_KBN701      NUMBER := 0;\r\n  i_TENKAI_KBN702      NUMBER := 0;\r\n  i_TENKAI_KBN703      NUMBER := 0;\r\n  i_TENKAI_KBN704      NUMBER := 0;\r\n  i_TENKAI_KBN705      NUMBER := 0;\r\n  i_TENKAI_KBN706      NUMBER := 0;\r\n  i_TENKAI_KBN707      NUMBER := 0;\r\n  i_TENKAI_KBN708      NUMBER := 0;\r\n  i_TENKAI_KBN709      NUMBER := 0;\r\n  i_TENKAI_KBN710      NUMBER := 0;\r\n  i_TENKAI_KBN711      NUMBER := 0;\r\n  i_TENKAI_KBN712      NUMBER := 0;\r\n  i_TENKAI_KBN713      NUMBER := 0;\r\n  i_TENKAI_KBN714      NUMBER := 0;\r\n  i_TENKAI_KBN715      NUMBER := 0;\r\n  i_TENKAI_KBN716      NUMBER := 0;\r\n  i_TENKAI_KBN717      NUMBER := 0;\r\n  i_TENKAI_KBN718      NUMBER := 0;\r\n  i_TENKAI_KBN719      NUMBER := 0;\r\n  i_TENKAI_KBN720      NUMBER := 0;\r\n  i_TENKAI_KBN721      NUMBER := 0;\r\n  i_TENKAI_KBN722      NUMBER := 0;\r\n  i_TENKAI_KBN723      NUMBER := 0;\r\n  i_TENKAI_KBN724      NUMBER := 0;\r\n  i_TENKAI_KBN725      NUMBER := 0;\r\n  i_TENKAI_KBN726      NUMBER := 0;\r\n  i_TENKAI_KBN727      NUMBER := 0;\r\n  i_TENKAI_KBN728      NUMBER := 0;\r\n  i_TENKAI_KBN729      NUMBER := 0;\r\n  i_TENKAI_KBN730      NUMBER := 0;\r\n  i_TENKAI_KBN731      NUMBER := 0;\r\n  i_TENKAI_KBN732      NUMBER := 0;\r\n  i_TENKAI_KBN733      NUMBER := 0;\r\n  i_TENKAI_KBN734      NUMBER := 0;\r\n  i_TENKAI_KBN735      NUMBER := 0;\r\n  i_TENKAI_KBN736      NUMBER := 0;\r\n  i_TENKAI_KBN737      NUMBER := 0;\r\n  i_TENKAI_KBN738      NUMBER := 0;\r\n  i_TENKAI_KBN739      NUMBER := 0;\r\n  i_TENKAI_KBN740      NUMBER := 0;\r\n  i_TENKAI_KBN741      NUMBER := 0;\r\n  i_TENKAI_KBN742      NUMBER := 0;\r\n  i_TENKAI_KBN743      NUMBER := 0;\r\n  i_TENKAI_KBN744      NUMBER := 0;\r\n  i_TENKAI_KBN745      NUMBER := 0;\r\n  i_TENKAI_KBN746      NUMBER := 0;\r\n  i_TENKAI_KBN747      NUMBER := 0;\r\n  i_TENKAI_KBN748      NUMBER := 0;\r\n  i_TENKAI_KBN749      NUMBER := 0;\r\n  i_TENKAI_KBN750      NUMBER := 0;\r\n  i_TENKAI_KBN751      NUMBER := 0;\r\n  i_TENKAI_KBN752      NUMBER := 0;\r\n  i_TENKAI_KBN753      NUMBER := 0;\r\n  i_TENKAI_KBN754      NUMBER := 0;\r\n  i_TENKAI_KBN755      NUMBER := 0;\r\n  i_TENKAI_KBN756      NUMBER := 0;\r\n  i_TENKAI_KBN757      NUMBER := 0;\r\n  i_TENKAI_KBN758      NUMBER := 0;\r\n  i_TENKAI_KBN759      NUMBER := 0;\r\n  i_TENKAI_KBN760      NUMBER := 0;\r\n  i_TENKAI_KBN761      NUMBER := 0;\r\n  i_TENKAI_KBN762      NUMBER := 0;\r\n  i_TENKAI_KBN763      NUMBER := 0;\r\n  i_TENKAI_KBN764      NUMBER := 0;\r\n  i_TENKAI_KBN765      NUMBER := 0;\r\n  i_TENKAI_KBN766      NUMBER := 0;\r\n  i_TENKAI_KBN767      NUMBER := 0;\r\n  i_TENKAI_KBN768      NUMBER := 0;\r\n  i_TENKAI_KBN769      NUMBER := 0;\r\n  i_TENKAI_KBN770      NUMBER := 0;\r\n  i_TENKAI_KBN771      NUMBER := 0;\r\n  i_TENKAI_KBN772      NUMBER := 0;\r\n  i_TENKAI_KBN773      NUMBER := 0;\r\n  i_TENKAI_KBN774      NUMBER := 0;\r\n  i_TENKAI_KBN775      NUMBER := 0;\r\n  i_TENKAI_KBN776      NUMBER := 0;\r\n  i_TENKAI_KBN777      NUMBER := 0;\r\n  i_TENKAI_KBN778      NUMBER := 0;\r\n  i_TENKAI_KBN779      NUMBER := 0;\r\n  i_TENKAI_KBN780      NUMBER := 0;\r\n  i_TENKAI_KBN781      NUMBER := 0;\r\n  i_TENKAI_KBN782      NUMBER := 0;\r\n  i_TENKAI_KBN783      NUMBER := 0;\r\n  i_TENKAI_KBN784      NUMBER := 0;\r\n  i_TENKAI_KBN785      NUMBER := 0;\r\n  i_TENKAI_KBN786      NUMBER := 0;\r\n  i_TENKAI_KBN787      NUMBER := 0;\r\n  i_TENKAI_KBN788      NUMBER := 0;\r\n  i_TENKAI_KBN789      NUMBER := 0;\r\n  i_TENKAI_KBN790      NUMBER := 0;\r\n  i_TENKAI_KBN791      NUMBER := 0;\r\n  i_TENKAI_KBN792      NUMBER := 0;\r\n  i_TENKAI_KBN793      NUMBER := 0;\r\n  i_TENKAI_KBN794      NUMBER := 0;\r\n  i_TENKAI_KBN795      NUMBER := 0;\r\n  i_TENKAI_KBN796      NUMBER := 0;\r\n  i_TENKAI_KBN797      NUMBER := 0;\r\n  i_TENKAI_KBN798      NUMBER := 0;\r\n  i_TENKAI_KBN799      NUMBER := 0;\r\n  i_TENKAI_KBN800      NUMBER := 0;\r\n  i_TENKAI_KBN801      NUMBER := 0;\r\n  i_TENKAI_KBN802      NUMBER := 0;\r\n  i_TENKAI_KBN803      NUMBER := 0;\r\n  i_TENKAI_KBN804      NUMBER := 0;\r\n  i_TENKAI_KBN805      NUMBER := 0;\r\n  i_TENKAI_KBN806      NUMBER := 0;\r\n  i_TENKAI_KBN807      NUMBER := 0;\r\n  i_TENKAI_KBN808      NUMBER := 0;\r\n  i_TENKAI_KBN809      NUMBER := 0;\r\n  i_TENKAI_KBN810      NUMBER := 0;\r\n  i_TENKAI_KBN811      NUMBER := 0;\r\n  i_TENKAI_KBN812      NUMBER := 0;\r\n  i_TENKAI_KBN813      NUMBER := 0;\r\n  i_TENKAI_KBN814      NUMBER := 0;\r\n  i_TENKAI_KBN815      NUMBER := 0;\r\n  i_TENKAI_KBN816      NUMBER := 0;\r\n  i_TENKAI_KBN817      NUMBER := 0;\r\n  i_TENKAI_KBN818      NUMBER := 0;\r\n  i_TENKAI_KBN819      NUMBER := 0;\r\n  i_TENKAI_KBN820      NUMBER := 0;\r\n  i_TENKAI_KBN821      NUMBER := 0;\r\n  i_TENKAI_KBN822      NUMBER := 0;\r\n  i_TENKAI_KBN823      NUMBER := 0;\r\n  i_TENKAI_KBN824      NUMBER := 0;\r\n  i_TENKAI_KBN825      NUMBER := 0;\r\n  i_TENKAI_KBN826      NUMBER := 0;\r\n  i_TENKAI_KBN827      NUMBER := 0;\r\n  i_TENKAI_KBN828      NUMBER := 0;\r\n  i_TENKAI_KBN829      NUMBER := 0;\r\n  i_TENKAI_KBN830      NUMBER := 0;\r\n  i_TENKAI_KBN831      NUMBER := 0;\r\n  i_TENKAI_KBN832      NUMBER := 0;\r\n  i_TENKAI_KBN833      NUMBER := 0;\r\n  i_TENKAI_KBN834      NUMBER := 0;\r\n  i_TENKAI_KBN835      NUMBER := 0;\r\n  i_TENKAI_KBN836      NUMBER := 0;\r\n  i_TENKAI_KBN837      NUMBER := 0;\r\n  i_TENKAI_KBN838      NUMBER := 0;\r\n  i_TENKAI_KBN839      NUMBER := 0;\r\n  i_TENKAI_KBN840      NUMBER := 0;\r\n  i_TENKAI_KBN841      NUMBER := 0;\r\n  i_TENKAI_KBN842      NUMBER := 0;\r\n  i_TENKAI_KBN843      NUMBER := 0;\r\n  i_TENKAI_KBN844      NUMBER := 0;\r\n  i_TENKAI_KBN845      NUMBER := 0;\r\n  i_TENKAI_KBN846      NUMBER := 0;\r\n  i_TENKAI_KBN847      NUMBER := 0;\r\n  i_TENKAI_KBN848      NUMBER := 0;\r\n  i_TENKAI_KBN849      NUMBER := 0;\r\n  i_TENKAI_KBN850      NUMBER := 0;\r\n  i_TENKAI_KBN851      NUMBER := 0;\r\n  i_TENKAI_KBN852      NUMBER := 0;\r\n  i_TENKAI_KBN853      NUMBER := 0;\r\n  i_TENKAI_KBN854      NUMBER := 0;\r\n  i_TENKAI_KBN855      NUMBER := 0;\r\n  i_TENKAI_KBN856      NUMBER := 0;\r\n  i_TENKAI_KBN857      NUMBER := 0;\r\n  i_TENKAI_KBN858      NUMBER := 0;\r\n  i_TENKAI_KBN859      NUMBER := 0;\r\n  i_TENKAI_KBN860      NUMBER := 0;\r\n  i_TENKAI_KBN861      NUMBER := 0;\r\n  i_TENKAI_KBN862      NUMBER := 0;\r\n  i_TENKAI_KBN863      NUMBER := 0;\r\n  i_TENKAI_KBN864      NUMBER := 0;\r\n  i_TENKAI_KBN865      NUMBER := 0;\r\n  i_TENKAI_KBN866      NUMBER := 0;\r\n  i_TENKAI_KBN867      NUMBER := 0;\r\n  i_TENKAI_KBN868      NUMBER := 0;\r\n  i_TENKAI_KBN869      NUMBER := 0;\r\n  i_TENKAI_KBN870      NUMBER := 0;\r\n  i_TENKAI_KBN871      NUMBER := 0;\r\n  i_TENKAI_KBN872      NUMBER := 0;\r\n  i_TENKAI_KBN873      NUMBER := 0;\r\n  i_TENKAI_KBN874      NUMBER := 0;\r\n  i_TENKAI_KBN875      NUMBER := 0;\r\n  i_TENKAI_KBN876      NUMBER := 0;\r\n  i_TENKAI_KBN877      NUMBER := 0;\r\n  i_TENKAI_KBN878      NUMBER := 0;\r\n  i_TENKAI_KBN879      NUMBER := 0;\r\n  i_TENKAI_KBN880      NUMBER := 0;\r\n  i_TENKAI_KBN881      NUMBER := 0;\r\n  i_TENKAI_KBN882      NUMBER := 0;\r\n  i_TENKAI_KBN883      NUMBER := 0;\r\n  i_TENKAI_KBN884      NUMBER := 0;\r\n  i_TENKAI_KBN885      NUMBER := 0;\r\n  i_TENKAI_KBN886      NUMBER := 0;\r\n  i_TENKAI_KBN887      NUMBER := 0;\r\n  i_TENKAI_KBN888      NUMBER := 0;\r\n  i_TENKAI_KBN889      NUMBER := 0;\r\n  i_TENKAI_KBN890      NUMBER := 0;\r\n  i_TENKAI_KBN891      NUMBER := 0;\r\n  i_TENKAI_KBN892      NUMBER := 0;\r\n  i_TENKAI_KBN893      NUMBER := 0;\r\n  i_TENKAI_KBN894      NUMBER := 0;\r\n  i_TENKAI_KBN895      NUMBER := 0;\r\n  i_TENKAI_KBN896      NUMBER := 0;\r\n  i_TENKAI_KBN897      NUMBER := 0;\r\n  i_TENKAI_KBN898      NUMBER := 0;\r\n  i_TENKAI_KBN899      NUMBER := 0;\r\n  i_TENKAI_KBN900      NUMBER := 0;\r\n  i_TENKAI_KBN901      NUMBER := 0;\r\n  i_TENKAI_KBN902      NUMBER := 0;\r\n  i_TENKAI_KBN903      NUMBER := 0;\r\n  i_TENKAI_KBN904      NUMBER := 0;\r\n  i_TENKAI_KBN905      NUMBER := 0;\r\n  i_TENKAI_KBN906      NUMBER := 0;\r\n  i_TENKAI_KBN907      NUMBER := 0;\r\n  i_TENKAI_KBN908      NUMBER := 0;\r\n  i_TENKAI_KBN909      NUMBER := 0;\r\n  i_TENKAI_KBN910      NUMBER := 0;\r\n  i_TENKAI_KBN911      NUMBER := 0;\r\n  i_TENKAI_KBN912      NUMBER := 0;\r\n  i_TENKAI_KBN913      NUMBER := 0;\r\n  i_TENKAI_KBN914      NUMBER := 0;\r\n  i_TENKAI_KBN915      NUMBER := 0;\r\n  i_TENKAI_KBN916      NUMBER := 0;\r\n  i_TENKAI_KBN917      NUMBER := 0;\r\n  i_TENKAI_KBN918      NUMBER := 0;\r\n  i_TENKAI_KBN919      NUMBER := 0;\r\n  i_TENKAI_KBN920      NUMBER := 0;\r\n  i_TENKAI_KBN921      NUMBER := 0;\r\n  i_TENKAI_KBN922      NUMBER := 0;\r\n  i_TENKAI_KBN923      NUMBER := 0;\r\n  i_TENKAI_KBN924      NUMBER := 0;\r\n  i_TENKAI_KBN925      NUMBER := 0;\r\n  i_TENKAI_KBN926      NUMBER := 0;\r\n  i_TENKAI_KBN927      NUMBER := 0;\r\n  i_TENKAI_KBN928      NUMBER := 0;\r\n  i_TENKAI_KBN929      NUMBER := 0;\r\n  i_TENKAI_KBN930      NUMBER := 0;\r\n  i_TENKAI_KBN931      NUMBER := 0;\r\n  i_TENKAI_KBN932      NUMBER := 0;\r\n  i_TENKAI_KBN933      NUMBER := 0;\r\n  i_TENKAI_KBN934      NUMBER := 0;\r\n  i_TENKAI_KBN935      NUMBER := 0;\r\n  i_TENKAI_KBN936      NUMBER := 0;\r\n  i_TENKAI_KBN937      NUMBER := 0;\r\n  i_TENKAI_KBN938      NUMBER := 0;\r\n  i_TENKAI_KBN939      NUMBER := 0;\r\n  i_TENKAI_KBN940      NUMBER := 0;\r\n  i_TENKAI_KBN941      NUMBER := 0;\r\n  i_TENKAI_KBN942      NUMBER := 0;\r\n  i_TENKAI_KBN943      NUMBER := 0;\r\n  i_TENKAI_KBN944      NUMBER := 0;\r\n  i_TENKAI_KBN945      NUMBER := 0;\r\n  i_TENKAI_KBN946      NUMBER := 0;\r\n  i_TENKAI_KBN947      NUMBER := 0;\r\n  i_TENKAI_KBN948      NUMBER := 0;\r\n  i_TENKAI_KBN949      NUMBER := 0;\r\n  i_TENKAI_KBN950      NUMBER := 0;\r\n  i_TENKAI_KBN951      NUMBER := 0;\r\n  i_TENKAI_KBN952      NUMBER := 0;\r\n  i_TENKAI_KBN953      NUMBER := 0;\r\n  i_TENKAI_KBN954      NUMBER := 0;\r\n  i_TENKAI_KBN955      NUMBER := 0;\r\n  i_TENKAI_KBN956      NUMBER := 0;\r\n  i_TENKAI_KBN957      NUMBER := 0;\r\n  i_TENKAI_KBN958      NUMBER := 0;\r\n  i_TENKAI_KBN959      NUMBER := 0;\r\n  i_TENKAI_KBN960      NUMBER := 0;\r\n  i_TENKAI_KBN961      NUMBER := 0;\r\n  i_TENKAI_KBN962      NUMBER := 0;\r\n  i_TENKAI_KBN963      NUMBER := 0;\r\n  i_TENKAI_KBN964      NUMBER := 0;\r\n  i_TENKAI_KBN965      NUMBER := 0;\r\n  i_TENKAI_KBN966      NUMBER := 0;\r\n  i_TENKAI_KBN967      NUMBER := 0;\r\n  i_TENKAI_KBN968      NUMBER := 0;\r\n  i_TENKAI_KBN969      NUMBER := 0;\r\n  i_TENKAI_KBN970      NUMBER := 0;\r\n  i_TENKAI_KBN971      NUMBER := 0;\r\n  i_TENKAI_KBN972      NUMBER := 0;\r\n  i_TENKAI_KBN973      NUMBER := 0;\r\n  i_TENKAI_KBN974      NUMBER := 0;\r\n  i_TENKAI_KBN975      NUMBER := 0;\r\n  i_TENKAI_KBN976      NUMBER := 0;\r\n  i_TENKAI_KBN977      NUMBER := 0;\r\n  i_TENKAI_KBN978      NUMBER := 0;\r\n  i_TENKAI_KBN979      NUMBER := 0;\r\n  i_TENKAI_KBN980      NUMBER := 0;\r\n  i_TENKAI_KBN981      NUMBER := 0;\r\n  i_TENKAI_KBN982      NUMBER := 0;\r\n  i_TENKAI_KBN983      NUMBER := 0;\r\n  i_TENKAI_KBN984      NUMBER := 0;\r\n  i_TENKAI_KBN985      NUMBER := 0;\r\n  i_TENKAI_KBN986      NUMBER := 0;\r\n  i_TENKAI_KBN987      NUMBER := 0;\r\n  i_TENKAI_KBN988      NUMBER := 0;\r\n  i_TENKAI_KBN989      NUMBER := 0;\r\n  i_TENKAI_KBN990      NUMBER := 0;\r\n  i_TENKAI_KBN991      NUMBER := 0;\r\n  i_TENKAI_KBN992      NUMBER := 0;\r\n  i_TENKAI_KBN993      NUMBER := 0;\r\n  i_TENKAI_KBN994      NUMBER := 0;\r\n  i_TENKAI_KBN995      NUMBER := 0;\r\n  i_TENKAI_KBN996      NUMBER := 0;\r\n  i_TENKAI_KBN997      NUMBER := 0;\r\n  i_TENKAI_KBN998      NUMBER := 0;\r\n  i_TENKAI_KBN999      NUMBER := 0;\r\n  i_TENKAI_KBN1000     := 0;\r\n  END;\r\n  ------------------------------------------------\r\n  -- 例外処理\r\n  ------------------------------------------------\r\n  WHEN OTHERS THEN\r\n    o_N_SQL_CODE := SQLCODE;\r\n    o_V_SQL_MSG  := SUBSTR(SQLERRM,1,100);\r\n    ROLLBACK;\r\n    RAISE;\r\nEND JIBSOIEUPDB;\r\n/\n\nCOVERAGE ITEM DEFINITION (VERY IMPORTANT):\n\nA \"coverage item\" MUST correspond to a concrete structural element in the source code.\n\nAllowed coverage items include ONLY:\n- Class definitions\n- Method or function definitions\n- Public fields or properties\n- SQL tables, views, or columns\n- Explicit control-flow behaviors (e.g. transactions, conditional branches) ONLY IF they are directly implemented in code\n\nDo NOT treat:\n- Explanations\n- Design intent\n- Usage suggestions\n- High-level concepts\n- Implicit behavior\n\nas coverage items.\n\nCRITICAL RULES:\n- Extract ONLY objective, verifiable facts\n- DO NOT evaluate quality\n- DO NOT assign scores\n- DO NOT summarize\n- DO NOT judge usefulness\n- DO NOT say good/bad/correct/incorrect\n- ONLY list concrete missing, mismatched, or hallucinated items\n\nCOUNTING RULE:\n\nEach coverage item MUST be countable and refer to a specific location in the source code.\nIf an item cannot be pointed to a concrete code location, it MUST NOT be counted.\n\nREQUIRED OUTPUT (VALID JSON ONLY):\n\n{\n  \"coverage\": {\n    \"total_items\": <integer>,\n    \"covered_items\": <integer>,\n    \"missing\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what is missing>\"\n      }\n    ]\n  },\n  \"correctness\": {\n    \"wrong_count\": <integer>,\n    \"mismatches\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what does not match the source>\"\n      }\n    ]\n  },\n  \"hallucination\": [\n    {\n      \"position\": <integer>,\n      \"content\": \"<invented object or behavior>\"\n    }\n  ],\n  \"usefulness\": {\n    \"missing_explanations\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<important concept not explained>\"\n      }\n    ]\n  }\n}\n",
          "label": "You are a FACT EXTRACTION ENGINE.\n\nYou are given:\n- SOURCE CODE (Java or SQL)\n- GENERATED WIKI (Markdown)\n\n--- SOURCE CODE ---\n{{source_code}}\n\n--- GENERATED WIKI ---\n{{wiki_md}}\n\nCOVERAGE ITEM DEFINITION (VERY IMPORTANT):\n\nA \"coverage item\" MUST correspond to a concrete structural element in the source code.\n\nAllowed coverage items include ONLY:\n- Class definitions\n- Method or function definitions\n- Public fields or properties\n- SQL tables, views, or columns\n- Explicit control-flow behaviors (e.g. transactions, conditional branches) ONLY IF they are directly implemented in code\n\nDo NOT treat:\n- Explanations\n- Design intent\n- Usage suggestions\n- High-level concepts\n- Implicit behavior\n\nas coverage items.\n\nCRITICAL RULES:\n- Extract ONLY objective, verifiable facts\n- DO NOT evaluate quality\n- DO NOT assign scores\n- DO NOT summarize\n- DO NOT judge usefulness\n- DO NOT say good/bad/correct/incorrect\n- ONLY list concrete missing, mismatched, or hallucinated items\n\nCOUNTING RULE:\n\nEach coverage item MUST be countable and refer to a specific location in the source code.\nIf an item cannot be pointed to a concrete code location, it MUST NOT be counted.\n\nREQUIRED OUTPUT (VALID JSON ONLY):\n\n{\n  \"coverage\": {\n    \"total_items\": <integer>,\n    \"covered_items\": <integer>,\n    \"missing\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what is missing>\"\n      }\n    ]\n  },\n  \"correctness\": {\n    \"wrong_count\": <integer>,\n    \"mismatches\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what does not match the source>\"\n      }\n    ]\n  },\n  \"hallucination\": [\n    {\n      \"position\": <integer>,\n      \"content\": \"<invented object or behavior>\"\n    }\n  ],\n  \"usefulness\": {\n    \"missing_explanations\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<important concept not explained>\"\n      }\n    ]\n  }\n}\n",
          "config": {
            "provider": {
              "modelName": "gpt-oss:120b",
              "config": {
                "basePath": "."
              },
              "label": ""
            }
          }
        },
        "promptId": "83d534d174cc6287eeef5d11729d9e09ebe30deb2c37f2ea662fc7cde3461aef",
        "promptIdx": 0,
        "provider": {
          "id": "ollama:gpt-oss:120b",
          "label": ""
        },
        "response": {
          "output": "{\n  \"coverage\": {\n    \"total_items\": 10,\n    \"covered_items\": 0,\n    \"missing\": [\n      {\n        \"position\": 1,\n        \"content\": \"Procedure definition: JIBSOIEUPDB (function/procedure)\"\n      },\n      {\n        \"position\": 2,\n        \"content\": \"Explicit transaction control: COMMIT statements\"\n      },\n      {\n        \"position\": 3,\n        \"content\": \"Explicit transaction control: ROLLBACK statements\"\n      },\n      {\n        \"position\": 4,\n        \"content\": \"Exception handling block (WHEN OTHERS THEN ...)\"\n      },\n      {\n        \"position\": 5,\n        \"content\": \"Conditional branch: IF WK_IDO_JIYU IN (11,12,13,56,57,58,14,17,18) THEN ...\"\n      },\n      {\n        \"position\": 6,\n        \"content\": \"Loop construct: FOR CR_IDO IN C_JIBSOIEUPDB(i_IENTRY_ID) LOOP ...\"\n      },\n      {\n        \"position\": 7,\n        \"content\": \"Dynamic SQL execution: EXECUTE IMMEDIATE VSQL;\"\n      },\n      {\n        \"position\": 8,\n        \"content\": \"Call to another stored procedure: JIBSOCRTIDDTJ(...)\"\n      },\n      {\n        \"position\": 9,\n        \"content\": \"Cursor declaration: CURSOR C_JIBSOIEUPDB(i_IENTRY_ID NUMBER) IS ...\"\n      },\n      {\n        \"position\": 10,\n        \"content\": \"Output parameter assignments (e.g., o_VSEATI_NO := ...)\"\n      }\n    ]\n  },\n  \"correctness\": {\n    \"wrong_count\": 0,\n    \"mismatches\": []\n  },\n  \"hallucination\": [\n    {\n      \"position\": 1,\n      \"content\": \"AUTOTRACE usage (SET AUTOTRACE ON EXPLAIN)\"\n    },\n    {\n      \"position\": 2,\n      \"content\": \"SQL*Plus command syntax\"\n    },\n    {\n      \"position\": 3,\n      \"content\": \"TKPROF tool for trace analysis\"\n    },\n    {\n      \"position\": 4,\n      \"content\": \"DBMS_SQLTUNE / SQL Tuning Advisor recommendations\"\n    },\n    {\n      \"position\": 5,\n      \"content\": \"References to \\\"SQL*Plus\\\" and \\\"SQL Developer\\\" as execution environments\"\n    }\n  ],\n  \"usefulness\": {\n    \"missing_explanations\": [\n      {\n        \"position\": 1,\n        \"content\": \"Purpose and effect of the COMMIT statements within the procedure\"\n      },\n      {\n        \"position\": 2,\n        \"content\": \"Reason for the extensive use of cursor loops and their impact on performance\"\n      },\n      {\n        \"position\": 3,\n        \"content\": \"Explanation of the dynamic SQL construction (VSQL) and its role in the process\"\n      },\n      {\n        \"position\": 4,\n        \"content\": \"Details of the conditional logic governing different 'IDO_JIYU' values\"\n      },\n      {\n        \"position\": 5,\n        \"content\": \"Interaction with external procedures (e.g., JIBSKCARDSOFJ, JIBSOCRTIDDTJ) and their expected behavior\"\n      }\n    ]\n  }\n}",
          "tokenUsage": {
            "prompt": 40960,
            "completion": 12547,
            "total": 53507
          }
        },
        "score": 1,
        "success": true,
        "testCase": {
          "name": "Stage1 Fact Extraction",
          "assert": [
            {
              "type": "contains-json"
            }
          ],
          "vars": {
            "source_code": "file://data\\JIBSOIEUPDB.utf8.SQL",
            "wiki_md": "file://data\\JIBSOIEUPDB.SQL.md"
          },
          "options": {
            "provider": {
              "modelName": "gpt-oss:120b",
              "config": {
                "basePath": "."
              },
              "label": ""
            }
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_code": "file://data\\JIBSOIEUPDB.utf8.SQL",
          "wiki_md": "file://data\\JIBSOIEUPDB.SQL.md"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 1,
      "failures": 0,
      "errors": 0,
      "tokenUsage": {
        "prompt": 40960,
        "completion": 12547,
        "cached": 0,
        "total": 53507,
        "numRequests": 1,
        "completionDetails": {
          "reasoning": 0,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 0,
          "prompt": 0,
          "completion": 0,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 579892
    }
  },
  "config": {
    "tags": {},
    "prompts": [
      "You are a FACT EXTRACTION ENGINE.\n\nYou are given:\n- SOURCE CODE (Java or SQL)\n- GENERATED WIKI (Markdown)\n\n--- SOURCE CODE ---\n{{source_code}}\n\n--- GENERATED WIKI ---\n{{wiki_md}}\n\nCOVERAGE ITEM DEFINITION (VERY IMPORTANT):\n\nA \"coverage item\" MUST correspond to a concrete structural element in the source code.\n\nAllowed coverage items include ONLY:\n- Class definitions\n- Method or function definitions\n- Public fields or properties\n- SQL tables, views, or columns\n- Explicit control-flow behaviors (e.g. transactions, conditional branches) ONLY IF they are directly implemented in code\n\nDo NOT treat:\n- Explanations\n- Design intent\n- Usage suggestions\n- High-level concepts\n- Implicit behavior\n\nas coverage items.\n\nCRITICAL RULES:\n- Extract ONLY objective, verifiable facts\n- DO NOT evaluate quality\n- DO NOT assign scores\n- DO NOT summarize\n- DO NOT judge usefulness\n- DO NOT say good/bad/correct/incorrect\n- ONLY list concrete missing, mismatched, or hallucinated items\n\nCOUNTING RULE:\n\nEach coverage item MUST be countable and refer to a specific location in the source code.\nIf an item cannot be pointed to a concrete code location, it MUST NOT be counted.\n\nREQUIRED OUTPUT (VALID JSON ONLY):\n\n{\n  \"coverage\": {\n    \"total_items\": <integer>,\n    \"covered_items\": <integer>,\n    \"missing\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what is missing>\"\n      }\n    ]\n  },\n  \"correctness\": {\n    \"wrong_count\": <integer>,\n    \"mismatches\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<what does not match the source>\"\n      }\n    ]\n  },\n  \"hallucination\": [\n    {\n      \"position\": <integer>,\n      \"content\": \"<invented object or behavior>\"\n    }\n  ],\n  \"usefulness\": {\n    \"missing_explanations\": [\n      {\n        \"position\": <integer>,\n        \"content\": \"<important concept not explained>\"\n      }\n    ]\n  }\n}\n"
    ],
    "providers": [
      {
        "id": "ollama:gpt-oss:120b",
        "config": {
          "temperature": 0,
          "top_p": 1
        }
      }
    ],
    "tests": [
      {
        "name": "Stage1 Fact Extraction",
        "assert": [
          {
            "type": "contains-json"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "defaultTest": {
      "options": {
        "provider": {
          "modelName": "gpt-oss:120b",
          "config": {
            "basePath": "."
          },
          "label": ""
        }
      }
    },
    "outputPath": [
      "D:\\AI_Projects\\promptfoo_wiki\\fact_judge\\output\\case_003\\stage1.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": "https://www.promptfoo.app/eval/eval-VIt-2026-02-03T03:20:55",
  "metadata": {
    "promptfooVersion": "0.120.20",
    "nodeVersion": "v22.2.0",
    "platform": "win32",
    "arch": "x64",
    "exportedAt": "2026-02-03T03:30:37.461Z",
    "evaluationCreatedAt": "2026-02-03T03:20:55.684Z",
    "author": "zhangxudong.sun@gmail.com"
  }
}